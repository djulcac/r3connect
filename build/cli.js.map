{"version":3,"sources":["webpack:///webpack/bootstrap c95571435e01a4488452","webpack:///./src/utils.js","webpack:///./src/lib/Exceptions.js","webpack:///./src/lib/Pool.js","webpack:///./src/lib/Client.js","webpack:///external \"joi\"","webpack:///external \"path\"","webpack:///./src/index.js","webpack:///./src/lib/Configuration.js","webpack:///./src/lib/Server.js","webpack:///./src/routes/index.js","webpack:///./src/routes/rfc.js","webpack:///./~/source-map-support/register.js","webpack:///./~/source-map-support/source-map-support.js","webpack:///external \"error-subclass\"","webpack:///external \"fs\"","webpack:///external \"good\"","webpack:///external \"hapi\"","webpack:///external \"hapi-boom-decorators\"","webpack:///external \"module\"","webpack:///external \"node-rfc\"","webpack:///external \"object-hash\"","webpack:///external \"pool2\"","webpack:///external \"source-map\"","webpack:///./package.json","webpack:///external \"chalk\"","webpack:///external \"child_process\"","webpack:///external \"fs-extra\"","webpack:///external \"os\"","webpack:///external \"update-notifier\"","webpack:///./src/cli.js"],"names":["promisify","pad","makeLoggable","isFunction","findByPath","removeUndefinedValues","isListed","func","boundObject","args","Promise","resolve","reject","rejectError","resolveValues","checkReturn","handled","setTimeout","callback","error","values","push","bind","input","length","character","Array","join","toString","slice","object","log","tag","data","details","logger","scope","name","constructor","tags","isArray","concat","Object","assign","prototype","call","apply","path","parts","trim","split","value","shift","copy","keys","forEach","key","undefined","list","searchValue","some","match","RegExp","HttpException","message","statusCode","code","context","RFCException","client","parseInt","parsedMessage","parseMessage","prefix","ERROR","result","map","line","substring","LogonException","TimeoutException","configuration","hash","generateHash","pool","pools","end","applicationServer","lastError","acquire","boundRelease","release","Client","connect","then","catch","startsWith","destroy","remove","Pool","options","bailTimeout","dispose","close","ping","originalAcquire","on","connection","create","acquireTimeout","disposeTimeout","pingTimeout","idleTimeout","requestTimeout","Infinity","max","min","testOnBorrow","evictionRunIntervalMillis","maxRequests","backoff","jitter","bailAfter","require","nodeRFC","connectTime","numberOfInvokes","functionModule","parameters","invoke","startTime","Date","invokePromise","parse","timeoutPromise","invokeTimeout","race","all","invokeTime","NodeRFC","ashost","sysnr","instanceNumber","saprouter","router","user","username","passwd","password","MYSAPSSO2","mysapsso2","trace","connectPromise","connectTimeout","r3connect","Configuration","Server","module","exports","config","fallbackConfig","set","content","validate","fallbackValue","schema","server","host","string","port","number","routes","cors","boolean","tls","binary","cert","logs","array","items","connections","pattern","token","allow","integer","functionModules","whitelist","blacklist","createServer","debug","request","filter","Boolean","get","route","register","ops","interval","reporters","console","file","decorate","replyWithError","boom","ext","reply","response","isBoom","continue","output","payload","start","info","uri","method","description","notes","params","regex","optional","example","required","default","JSON","stringify","iv_input","handler","whitelisted","blacklisted","state","meta","requirex","success","bold","green","text","blue","red","warn","yellow","pathToFallbackConfig","__dirname","pathToConfig","process","cwd","loadConfig","loadedConfig","pkg","notify","project","readFileSync","exit","command","argv","configAlreadyExists","statSync","defineProperty","target","targetLib","platform","watch","spawn","docker"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;QC9CgBA,S,GAAAA,S;QAmDAC,G,GAAAA,G;QAQAC,Y,GAAAA,Y;QA8BAC,U,GAAAA,U;QAIAC,U,GAAAA,U;QASAC,qB,GAAAA,qB;QAWAC,Q,GAAAA,Q;AAnIhB;;;;;;;;;;;;;;;;;;AAkBO,SAASN,SAAT,CAAmBO,IAAnB,EAAmCC,WAAnC,EAAmE;AACxE,SAAO;AAAA,sCAAIC,IAAJ;AAAIA,UAAJ;AAAA;;AAAA,WACL,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAoBC,MAApB,EAAyC;AACnD;AACA,UAAIC,cAAoB,IAAxB;AACA,UAAIC,gBAAwB,IAA5B;AACA,UAAMC,cAAwB,SAAxBA,WAAwB,GAAM;AAClC;AACA,YAAIC,UAAmB,KAAvB;AACA,YAAIH,WAAJ,EAAiB;AACfD,iBAAOC,WAAP;AACAG,oBAAU,IAAV;AACD,SAHD,MAGO,IAAIF,aAAJ,EAAmB;AACxBH,kBAAQG,aAAR;AACAE,oBAAU,IAAV;AACD;;AAED;AACA,YAAI,CAACA,OAAL,EAAc;AACZC,qBAAWF,WAAX,EAAwB,EAAxB;AACD;AACF,OAfD;AAgBAE,iBAAWF,WAAX,EAAwB,EAAxB;;AAEA;AACA,UAAMG,WAAqB,SAArBA,QAAqB,CAACC,KAAD,EAA4B;AAAA,2CAAXC,MAAW;AAAXA,gBAAW;AAAA;;AACrD,YAAID,KAAJ,EAAW;AACTN,wBAAcM,KAAd;AACA;AACD,SAHD,MAGO;AACLL,0BAAgBM,MAAhB;AACA;AACD;AACF,OARD;AASAX,WAAKY,IAAL,CAAUH,QAAV;;AAEA;AACAD,iBAAW,YAAM;AACf,YAAI;AACF,cAAIT,WAAJ,EAAiB;AACfD,iBAAKe,IAAL,CAAUd,WAAV,mBAA0BC,IAA1B;AACD,WAFD,MAEO;AACLF,kCAAQE,IAAR;AACD;AACF,SAND,CAME,OAAOU,KAAP,EAAc;AACdN,wBAAcM,KAAd;AACD;AACF,OAVD,EAUG,CAVH;AAWD,KA9CD,CADK;AAAA,GAAP;AAgDD;;AAEM,SAASlB,GAAT,CACLsB,KADK,EAELC,MAFK,EAIG;AAAA,MADRC,SACQ,uEADY,GACZ;;AACR,SAAO,CAACC,MAAMF,MAAN,EAAcG,IAAd,CAAmBF,SAAnB,IAAgCF,MAAMK,QAAN,EAAjC,EAAmDC,KAAnD,CAAyD,CAAC,CAAD,GAAKL,MAA9D,CAAP;AACD;;AAEM,SAAStB,YAAT,CAAsB4B,MAAtB,EAA8C;AACnD,MAAMC,MAAgB,SAASA,GAAT,CACpBC,GADoB,EAEpBC,IAFoB,EAGpBC,OAHoB,EAIpB;AACA,QAAI,KAAKC,MAAT,EAAiB;AACf,UAAMC,QAAgB,KAAKC,IAAL,IAAa,KAAKC,WAAL,CAAiBD,IAApD;AACA,UAAME,OAAcb,MAAMc,OAAN,CAAcR,GAAd,IAChB,CAACI,KAAD,EAAQK,MAAR,CAAeT,GAAf,CADgB,GAEhB,CAACI,KAAD,EAAQJ,GAAR,CAFJ;AAGA,WAAKG,MAAL,CAAYI,IAAZ,EAAkBN,IAAlB;;AAEA,UAAIC,OAAJ,EAAa;AACX,aAAKC,MAAL,CAAYI,IAAZ,EAAkBL,OAAlB;AACD;AACF;AACF,GAhBD;;AAkBA;AACAQ,SAAOC,MAAP,CAAcb,MAAd,EAAsB;AACpBC;AADoB,GAAtB;AAGAW,SAAOC,MAAP,CAAcb,OAAOc,SAArB,EAAgC;AAC9Bb;AAD8B,GAAhC;;AAIA,SAAOD,MAAP;AACD;;AAEM,SAAS3B,UAAT,CAAoB2B,MAApB,EAA0C;AAC/C,SAAO,CAAC,EAAEA,UAAUA,OAAOQ,WAAjB,IAAgCR,OAAOe,IAAvC,IAA+Cf,OAAOgB,KAAxD,CAAR;AACD;;AAEM,SAAS1C,UAAT,CAAoB0B,MAApB,EAAoCiB,IAApC,EAAuD;AAC5D,MAAMC,QAAuBD,KAAKE,IAAL,OAAgB,EAAhB,GAAqB,EAArB,GAA0BF,KAAKG,KAAL,CAAW,GAAX,CAAvD;AACA,MAAIC,QAAcrB,MAAlB;AACA,SAAOqB,SAASH,MAAMxB,MAAN,GAAe,CAA/B,EAAkC;AAChC2B,YAAQA,MAAMH,MAAMI,KAAN,EAAN,CAAR;AACD;AACD,SAAOD,KAAP;AACD;;AAEM,SAAS9C,qBAAT,CAA+ByB,MAA/B,EAAuD;AAC5D,MAAMuB,OAAeX,OAAOC,MAAP,CAAc,EAAd,EAAkBb,MAAlB,CAArB;AACAY,SAAOY,IAAP,CAAYD,IAAZ,EAAkBE,OAAlB,CAA0B,UAACC,GAAD,EAAc;AACtC,QAAIH,KAAKG,GAAL,MAAcC,SAAlB,EAA6B;AAC3B,aAAOJ,KAAKG,GAAL,CAAP;AACD;AACF,GAJD;;AAMA,SAAOH,IAAP;AACD;;AAEM,SAAS/C,QAAT,CAAkBoD,IAAlB,EAA+BC,WAA/B,EAA6D;AAClE,SAAOD,KAAKE,IAAL,CACL,UAACT,KAAD;AAAA,WACE,CAAC,CAACQ,YAAYE,KAAZ,CAAkB,IAAIC,MAAJ,OAAeX,MAAMD,KAAN,CAAY,GAAZ,EAAiBvB,IAAjB,CAAsB,MAAtB,CAAf,OAAlB,CADJ;AAAA,GADK,CAAP;AAID,C;;;;;;;;;;;;;;;;ACtHD;;;;;;;;;;+eAlBA;;;;;;;;;;;;;;;;;;IAoBaoC,a,WAAAA,a;;;AAGX,yBACEC,OADF,EAKE;AAAA,QAHAC,UAGA,uEAHsB,GAGtB;AAAA,QAFAC,IAEA;AAAA,QADAC,OACA;;AAAA;;AAAA,8HACMH,OADN;;AAAA,UAPFG,OAOE,GAPiB,IAOjB;;AAEA,UAAKF,UAAL,GAAkBA,UAAlB;AACA,UAAKC,IAAL,GAAYA,IAAZ;AACA,UAAKC,OAAL,GAAeA,OAAf;AAJA;AAKD;;;;;IAGUC,Y,WAAAA,Y;;;AAGX,wBACEJ,OADF,EAEEC,UAFF,EAGEC,IAHF,EAIEC,OAJF,EAKEE,MALF,EAME;AAAA;;AAAA,6HACML,OADN,EACeC,UADf,EAC2BC,IAD3B,EACiCC,OADjC;;AAAA,WARFE,MAQE,GARgB,IAQhB;;AAEA,WAAKA,MAAL,GAAcA,MAAd;AAFA;AAGD;;;;0BAEYlD,K,EAAcgD,O,EAAkBE,M,EAAyB;AACpE,UAAMb,MAAerC,MAAMqC,GAA3B;AACA,UAAIQ,UAAmB,IAAvB;;AAEA;AACA,UAAME,OAAeI,SAASnD,MAAM+C,IAAf,EAAqB,EAArB,CAArB;AACA,cAAQA,IAAR;AACE,aAAK,CAAL;AAAQ;AACN,gBAAMK,gBAAwB,KAAKC,YAAL,CAAkBrD,MAAM6C,OAAxB,CAA9B;AACA,gBAAMS,SAAiBF,cAAc,YAAd,IAChBA,cAAc,YAAd,CADgB,UAEnB,EAFJ;AAGAP,2BAAaS,MAAb,GAAsBF,cAAcG,KAApC;AACA;AACD;;AAED;AAAS;AACPV,sBAAU7C,MAAM6C,OAAhB;AACD;AAZH;;AAeA;AACA,UAAIW,SAAiB,IAArB;AACA,UAAI,SAASP,YAAb,EAA2B;AACzBO,iBAAS,IAAI,IAAJ,CAASX,OAAT,EAAkB,GAAlB,EAAuBR,GAAvB,EAA4BW,OAA5B,EAAqCE,MAArC,CAAT;AACD,OAFD,MAEO;AACLM,iBAAS,IAAI,IAAJ,CAASX,OAAT,EAAkBG,OAAlB,EAA2BE,MAA3B,CAAT;AACD;AACD,aAAOM,MAAP;AACD;;;mCAEiD;AAAA,UAA9BX,OAA8B,uEAAZ,EAAY;;AAChD,UAAMW,SAAiB,EAAvB;AACAX,cACGd,KADH,CACS,IADT,EAEG0B,GAFH,CAEO,UAACC,IAAD;AAAA,eAA0BA,KAAK5B,IAAL,EAA1B;AAAA,OAFP,EAGGM,OAHH,CAGW,UAACsB,IAAD,EAAkB;AACzB,YAAMrB,MAAcqB,KAAKC,SAAL,CAAe,CAAf,EAAkB,EAAlB,EAAsB7B,IAAtB,EAApB;AACA,YAAME,QAAgB0B,KAAKC,SAAL,CAAe,EAAf,EAAmB7B,IAAnB,EAAtB;AACA,YAAIO,GAAJ,EAAS;AACPmB,iBAAOnB,GAAP,IAAcL,KAAd;AACD;AACF,OATH;AAUA,aAAOwB,MAAP;AACD;;;;EA1D+BZ,a;;IA6DrBgB,c,WAAAA,c;;;AACX,0BAAYf,OAAZ,EAA6BG,OAA7B,EAA+C;AAAA;;AAAA,2HACvCH,OADuC,EAC9B,GAD8B,EACzB,mBADyB,EACJG,OADI;AAE9C;;;EAHiCC,Y;;IAMvBY,gB,WAAAA,gB;;;AAGX,4BAAYhB,OAAZ,EAA6BG,OAA7B,EAA+CE,MAA/C,EAAgE;AAAA;;AAAA,qIACxDL,OADwD,EAC/C,GAD+C,EAC1C,aAD0C,EAC3BG,OAD2B;;AAAA,WAFhEE,MAEgE,GAF9C,IAE8C;;AAE9D,WAAKA,MAAL,GAAcA,MAAd;AAF8D;AAG/D;;;EANmCN,a;;;;;;;;;;;;;;;;;mBCvGtC;;;;;;;;;;;;;;;;;;AAkBA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;kBAEe;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,iCA8BSkB,aA9BT,EA8BwC;AACjD,aAAO,0BAAWA,aAAX,CAAP;AACD;;AA5BD;;AAJW;AAAA;AAAA,2BAkCGA,aAlCH,EAkC0B;AACnC,UAAMC,OAAe,KAAKC,YAAL,CAAkBF,aAAlB,CAArB;AACA,UAAMG,OAAgB,KAAKC,KAAL,CAAWH,IAAX,CAAtB;;AAEA,UAAIE,IAAJ,EAAU;AACRA,aAAKE,GAAL;AACA,aAAKD,KAAL,CAAWH,IAAX,IAAmBzB,SAAnB;AACA,aAAK1B,GAAL,CACE,OADF,gCAE8BmD,IAF9B,oBAEiDD,cAAcM,iBAF/D;AAID;AACF;AA9CU;AAAA;AAAA,2BAgDGN,aAhDH,EAgD0B9C,MAhD1B,EAgDqD;AAAA;;AAC9D,UAAIqD,YAAoB,IAAxB;AACA,UAAMJ,OAAe,mBACnB1C,OAAOC,MAAP,CACE;AACE8C,iBAAS,iBAACvE,QAAD,EAAwB;AAC/B,gBAAKa,GAAL,CACE,OADF,uCAEqCkD,cAAcM,iBAFnD;;AAKA,cAAI;AACF,gBAAMG,eAAyBN,KAAKO,OAAL,CAAarE,IAAb,CAAkB8D,IAAlB,CAA/B;AACA,kBAAKQ,MAAL,CACGC,OADH,CACWZ,aADX,EAC0BS,YAD1B,EACwCvD,MADxC,EAEG2D,IAFH,CAEQ,UAACzB,MAAD,EAAoB;AACxBnD,uBAAS,IAAT,EAAemD,MAAf;AACD,aAJH,EAKG0B,KALH,CAKS,UAAC5E,KAAD,EAAkB;AACvB;AACA,kBAAIA,MAAMkD,MAAV,EAAkB;AAChB;AACA,oBAAIlD,MAAM+C,IAAN,IAAc/C,MAAM+C,IAAN,CAAW8B,UAAX,CAAsB,MAAtB,CAAlB,EAAiD;AAC/CZ,uBAAKa,OAAL,CAAa9E,MAAMkD,MAAnB;AACD,iBAFD,MAEO;AACLe,uBAAKc,MAAL,CAAY/E,MAAMkD,MAAlB;AACD;AACF,eAPD,MAOO;AACL;AACA;AACAmB,4BAAYrE,KAAZ;AACAF,2BACE;AAAA,yBAAMkF,KAAKD,MAAL,CAAYjB,aAAZ,CAAN;AAAA,iBADF,EAEE,MAAKmB,OAAL,CAAaC,WAFf;AAID;;AAEDnF,uBAASC,KAAT;AACD,aAzBH;AA0BD,WA5BD,CA4BE,OAAOA,KAAP,EAAc;AACdD,qBAASC,KAAT;AACD;AACF,SAtCH;;AAwCEmF,iBAAS,iBAACjC,MAAD,EAAiBnD,QAAjB,EAAwC;AAC/C,gBAAKa,GAAL,CACE,OADF,iCAE+BkD,cAAcM,iBAF7C;AAIAlB,iBAAOkC,KAAP;AACArF;AACD,SA/CH;;AAiDE+E,iBAAS,iBAAC5B,MAAD,EAAiBnD,QAAjB,EAAwC;AAC/C,gBAAKa,GAAL,CACE,OADF,kCAEgCkD,cAAcM,iBAF9C;AAIArE;AACD,SAvDH;;AAyDEsF,cAAM,cAACnC,MAAD,EAAiBnD,QAAjB,EAAwC;AAC5C;AACAD,qBAAW,YAAM;AACf,gBAAIoD,OAAOmC,IAAP,EAAJ,EAAmB;AACjBtF;AACD,aAFD,MAEO;AACLA,uBACE,+CACc+D,cAAcM,iBAD5B,eADF;AAKD;AACF,WAVD,EAUG,CAVH;AAWD;AAtEH,OADF,EAyEE,KAAKa,OAzEP,CADmB,CAArB;;AA8EA;AACA;AACA,UAAMK,kBAA4BrB,KAAKK,OAAL,CAAanE,IAAb,CAAkB8D,IAAlB,CAAlC;AACAA,WAAKK,OAAL,GAAe,SAASA,OAAT,GAA4B;AACzC,eAAO,sBAAUgB,eAAV,EAA2BrB,IAA3B,IACJU,IADI,CACC;AAAA;AAAA,cAAEzB,MAAF;;AAAA,iBAA8BA,MAA9B;AAAA,SADD,EAEJ0B,KAFI,CAEE,UAAC5E,KAAD,EAAkB;AACvB,gBAAMqE,aAAarE,KAAnB;AACD,SAJI,CAAP;AAKD,OAND;;AAQA;AACAiE,WAAKsB,EAAL,CAAQ,OAAR,EAAiB,UAACvF,KAAD,EAAkB;AACjC,YAAI,CAACA,MAAM+C,IAAX,EAAiB;AACf,gBAAKnC,GAAL,CACE,OADF,iCAE+BkD,cAAcM,iBAF7C,SAGEpE,KAHF;AAKD;AACF,OARD;;AAUA,aAAOiE,IAAP;AACD;AAvJU;AAAA;AAAA,wBAyJAH,aAzJA,EAyJuB9C,MAzJvB,EAyJkD;AAC3D,UAAM+C,OAAe,KAAKC,YAAL,CAAkBF,aAAlB,CAArB;AACA,UAAI0B,aAAsB,IAA1B;;AAEA;AACA,UAAI,KAAKtB,KAAL,CAAWH,IAAX,CAAJ,EAAsB;AACpByB,qBAAa,KAAKtB,KAAL,CAAWH,IAAX,CAAb;AACA,aAAKnD,GAAL,CACE,OADF,8BAE4BmD,IAF5B,mBAE8CD,cAAcM,iBAF5D;AAID,OAND,MAMO;AACLoB,qBAAa,KAAKC,MAAL,CAAY3B,aAAZ,EAA2B9C,MAA3B,CAAb;AACA,aAAKkD,KAAL,CAAWH,IAAX,IAAmByB,UAAnB;AACA,aAAK5E,GAAL,CACE,OADF,8BAE4BmD,IAF5B,oBAE+CD,cAAcM,iBAF7D;AAID;;AAED,aAAOoB,UAAP;AACD;AA9KU;;AAAA;AAAA,YAEJxE,MAFI,GAEgB,IAFhB,SAKJkD,KALI,GAKY,EALZ,SAOJe,OAPI,GAOc;AACvBS,kBAAgB,KAAK,EAAL,GAAU,EAAV,GAAe,IADR;AAEvBC,kBAAgB,KAAK,IAFE;AAGvBC,eAAa,IAAI,IAHM;AAIvBC,eAAa,MAAM,IAJI;AAKvBC,kBAAgBC,QALO;;AAOvBC,OAAK,CAPkB;AAQvBC,OAAK,CARkB;AASvBC,gBAAc,IATS;AAUvBC,6BAA2B,IAAI,EAAJ,GAAS,IAVb;AAWvBC,eAAaL,QAXU;AAYvBM,WAAS;AACPJ,SAAK,IAAI,IADF;AAEPD,SAAK,KAAK,IAFH;AAGPM,YAAQ;AAHD,GAZc;AAiBvBC,aAAW,CAjBY;AAkBvBrB,eAAa,KAAK;AAlBK,CAPd,SA4BJT,MA5BI,4B;;;;;;;;;;;;;;;;;mBCxBf;;;;;;;;;;;;;;;;;;AAkBA;;AACA;;;;kBAEe;AAAA;AAAA;;;AAaX;AAbW,wBAckB;AAC3B;AACA,aAAO,mBAAA+B,CAAQ,EAAR,EAAoB/B,MAA3B;AACD;AAjBU;;AAmBX,kBAAYgC,OAAZ,EAA6BjC,OAA7B,EAAgD;AAAA;;AAAA,SAjBhDiC,OAiBgD,GAjB7B,IAiB6B;AAAA,SAhBhDjC,OAgBgD,GAhB3B,IAgB2B;AAAA,SAfhDxD,MAegD,GAf5B,IAe4B;AAAA,SAdhD0F,WAcgD,GAdzB,IAcyB;AAAA,SAbhDC,eAagD,GAbtB,CAasB;;AAC9C,SAAKF,OAAL,GAAeA,OAAf;AACA,SAAKjC,OAAL,GAAeA,OAAf;AACD;;AAtBU;AAAA;AAAA,4BAgFM;AACf,aAAO,KAAKiC,OAAL,CAAarB,KAAb,CAAmBzD,KAAnB,CAAyB,KAAK8E,OAA9B,CAAP;AACD;AAlFU;AAAA;AAAA,2BAoFK;AACd,aAAO,KAAKA,OAAL,CAAapB,IAAb,CAAkB1D,KAAlB,CAAwB,KAAK8E,OAA7B,CAAP;AACD;AAtFU;AAAA;AAAA,2BAwFJG,cAxFI,EAwFoBC,UAxFpB,EAwFkD;AAAA;;AAC3D,UAAMC,SAAmB,KAAKL,OAAL,CAAaK,MAAtC;AACA,UAAMC,YAAkB,IAAIC,IAAJ,EAAxB;;AAEA;AACA,WAAKL,eAAL,GAAuB,KAAKA,eAAL,GAAuB,CAA9C;;AAEA;AACA,UAAMrH,OAAc,CAACsH,cAAD,EAAiBC,UAAjB,CAApB;AACA,UAAMI,gBAAyB,sBAAUH,MAAV,EAAkB,KAAKL,OAAvB,EAC5B9E,KAD4B,CACtB,KAAK8E,OADiB,EACRnH,IADQ,EAE5BsF,KAF4B,CAEtB,UAAC5E,KAAD,EAAkB;AACvB,cAAM,yBAAakH,KAAb,CAAmBlH,KAAnB,QAAN;AACD,OAJ4B,CAA/B;;AAMA;AACA,UAAMmH,iBAA0B,IAAI5H,OAAJ,CAC9B,UAACC,OAAD,EAAoBC,MAApB,EAAyC;AACvCK,mBAAW,YAAM;AACfL,iBACE,4FAC2D,MACtD0B,WADsD,CAC1C8D,OAD0C,CAClCmC,aADkC,GAClB,IAFzC,iBAGE;AACER;AADF,WAHF,QADF;AAUD,SAXD,EAWG,MAAKzF,WAAL,CAAiB8D,OAAjB,CAAyBmC,aAX5B;AAYD,OAd6B,CAAhC;;AAiBA;AACA,aAAO7H,QAAQ8H,IAAR,CAAa,CAACJ,aAAD,EAAgBE,cAAhB,CAAb,EACJxC,IADI,CACC,gBAA+B;AAAA;AAAA,YAA7BnB,MAA6B;;AACnC;AACA,cAAKgB,OAAL;;AAEA;AACA,eAAOjF,QAAQ+H,GAAR,CAAY,CACjB9D,MADiB,EAEjB;AACE+D,sBAAY,IAAIP,IAAJ,KAAaD,SAD3B;AAEEL,uBAAa,MAAKC,eAAL,KAAyB,CAAzB,GAA6B,MAAKD,WAAlC,GAAgD;AAF/D,SAFiB,CAAZ,CAAP;AAOD,OAbI,EAcJ9B,KAdI,CAcE,UAAC5E,KAAD,EAAkB;AACvB;AACA,cAAKwE,OAAL;;AAEA;AACA,cAAMxE,KAAN;AACD,OApBI,CAAP;AAqBD;AA/IU;AAAA;AAAA,4BAyBT8D,aAzBS,EA0BTU,OA1BS,EA2BTxD,MA3BS,EA4BA;AAAA;;AACT,UAAMyF,UAAkB,IAAI,KAAKe,OAAT,CACtB,kCAAsB;AACpBC,gBAAQ3D,cAAcM,iBADF;AAEpBsD,eAAO,gBAAI5D,cAAc6D,cAAlB,EAAkC,CAAlC,EAAqC,GAArC,CAFa;AAGpBzE,gBAAQ,gBAAIY,cAAcZ,MAAlB,EAA0B,CAA1B,EAA6B,GAA7B,CAHY;AAIpB0E,mBAAW9D,cAAc+D,MAJL;AAKpBC,cAAMhE,cAAciE,QALA;AAMpBC,gBAAQlE,cAAcmE,QANF;AAOpBC,mBAAWpE,cAAcqE,SAPL;AAQpBC,eAAO;AARa,OAAtB,CADsB,CAAxB;AAYA,UAAM1D,UAAoB+B,QAAQ/B,OAAlC;AACA,UAAMqC,YAAkB,IAAIC,IAAJ,EAAxB;;AAEA;AACA,UAAMqB,iBAA0B,sBAAU3D,OAAV,EAAmB+B,OAAnB,EAC7B9E,KAD6B,CACvB8E,OADuB,EAE7B9B,IAF6B,CAExB,YAAc;AAClB;AACA,YAAMzB,SAAiB,IAAIuB,MAAJ,CAAWgC,OAAX,EAAoBjC,OAApB,CAAvB;AACAtB,eAAOlC,MAAP,GAAgBA,MAAhB;AACAkC,eAAOwD,WAAP,GAAqB,IAAIM,IAAJ,KAAaD,SAAlC;AACA,eAAO7D,MAAP;AACD,OAR6B,EAS7B0B,KAT6B,CASvB,UAAC5E,KAAD,EAAkB;AACvB,cAAM,2BAAekH,KAAf,CACJlH,KADI,EAEJuB,OAAOC,MAAP,CAAc,EAAd,EAAkBsC,aAAlB,EAAiC,EAAEmE,UAAU,UAAZ,EAAjC,CAFI,CAAN;AAID,OAd6B,CAAhC;;AAgBA;AACA,UAAMd,iBAA0B,IAAI5H,OAAJ,CAC9B,UAACC,OAAD,EAAoBC,MAApB,EAAyC;AACvCK,mBAAW,YAAM;AACfL,iBACE,qFACoD,OAAKwF,OAAL,CAC/CqD,cAD+C,GAC9B,IAFtB,iBAGE/G,OAAOC,MAAP,CAAc,EAAd,EAAkBsC,aAAlB,EAAiC,EAAEmE,UAAU,UAAZ,EAAjC,CAHF,CADF;AAOD,SARD,EAQG,OAAKhD,OAAL,CAAaqD,cARhB;AASD,OAX6B,CAAhC;;AAcA;AACA,aAAO/I,QAAQ8H,IAAR,CAAa,CAACgB,cAAD,EAAiBlB,cAAjB,CAAb,CAAP;AACD;AA9EU;;AAAA;AAAA,YAQJlC,OARI,GAQc;AACvBqD,kBAAgB,IAAI,IADG;AAEvBlB,iBAAe,KAAK,IAFG,EARd,S;;;;;;ACrBf,gC;;;;;;ACAA,iC;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMmB,YAAoB;AACxB9D,0BADwB;AAExB+D,wCAFwB;AAGxBxD,sBAHwB;AAIxByD;AAJwB,CAA1B;;kBAOeF,S;AACR,IAAM9D,0CAAN;AACA,IAAM+D,+DAAN;AACA,IAAMC,0CAAN;AACA,IAAMzD,oCAAN;AACP0D,OAAOC,OAAP,GAAiBJ,SAAjB,C;;;;;;;;;;;;;;;ACjBA;;;;AACA;;;;;;kBAEe;AAKX,yBAAYK,MAAZ,EAAwCC,cAAxC,EAAgE;AAAA;;AAAA,SAHhED,MAGgE,GAH9C,IAG8C;AAAA,SAFhEC,cAEgE,GAFtC,IAEsC;;AAC9D,SAAKA,cAAL,GAAsBA,cAAtB;AACA,SAAKC,GAAL,CAASF,MAAT;AACD;;AARU;AAAA;AAAA,wBAoDPG,OApDO,EAoDsB;AAC/B,UAAI,CAACA,OAAL,EAAc;AACZ,aAAKnI,GAAL,CACE,OADF,EAEE,6FAFF;AAIA,aAAKgI,MAAL,GAAc,KAAKC,cAAnB;AACD,OAND,MAMO;AACL,YAAID,SAAkB,IAAtB;;AAEA;AACA,YAAI,OAAOG,OAAP,KAAmB,UAAvB,EAAmC;AACjCH,mBAASG,QAAQ,KAAKF,cAAb,CAAT;AACD,SAFD,MAEO;AACLD,mBAASG,OAAT;AACD;;AAED;AACA,YAAI;AACFP,wBAAcQ,QAAd,CAAuBJ,MAAvB;AACA,eAAKhI,GAAL,CAAS,OAAT,EAAkB,sCAAlB;AACA,eAAKgI,MAAL,GAAcA,MAAd;AACD,SAJD,CAIE,OAAO5I,KAAP,EAAc;AACd,eAAKY,GAAL,CACE,OADF,yIAEuIZ,MAAM6C,OAF7I;AAIA,eAAK+F,MAAL,GAAc,KAAKA,MAAL,IAAe,KAAKC,cAAlC;AACD;AACF;AACF;AAlFU;AAAA;AAAA,wBAoFPjH,IApFO,EAoFY;AACrB,UAAII,QAAa,uBAAW,KAAK4G,MAAhB,EAAwBhH,IAAxB,CAAjB;;AAEA;AACA,UAAII,UAAUM,SAAd,EAAyB;AACvBN,gBAAQ,uBAAW,KAAK6G,cAAhB,EAAgCjH,IAAhC,CAAR;AACD,OAFD,MAEO,IAAI,uBAAWI,KAAX,CAAJ,EAAuB;AAC5B;AACA,YAAMiH,gBAAqB,uBAAW,KAAKJ,cAAhB,EAAgCjH,IAAhC,CAA3B;AACAI,gBAAQA,MAAMiH,aAAN,CAAR;AACD;;AAED,UAAIjH,UAAUM,SAAd,EAAyB;AACvB,aAAK1B,GAAL,CACE,OADF,6CAE2CgB,IAF3C;AAID;;AAED,aAAOI,KAAP;AACD;AAxGU;AAAA;AAAA,6BAUK4G,MAVL,EAU8B;AACvC,UAAMM,SAAS,cAAIvI,MAAJ,GAAawB,IAAb,CAAkB;AAC/BgH,gBAAQ,cAAIxI,MAAJ,GAAawB,IAAb,CAAkB;AACxBiH,gBAAM,cAAIC,MAAJ,EADkB;AAExBC,gBAAM,cAAIC,MAAJ,GAAatD,GAAb,CAAiB,CAAjB,CAFkB;AAGxBuD,kBAAQ,cAAI7I,MAAJ,GAAawB,IAAb,CAAkB;AACxBsH,kBAAM,cAAIC,OAAJ;AADkB,WAAlB,CAHgB;AAMxBC,eAAK,cAAIhJ,MAAJ,GAAawB,IAAb,CAAkB;AACrBE,iBAAK,cAAIuH,MAAJ,EADgB;AAErBC,kBAAM,cAAID,MAAJ;AAFe,WAAlB;AANmB,SAAlB,CADuB;AAY/BE,cAAM,cAAInJ,MAAJ,GAAawB,IAAb,CAAkB;AACtBf,gBAAM,cAAI2I,KAAJ,GAAYC,KAAZ,CAAkB,cAAIX,MAAJ,EAAlB;AADgB,SAAlB,CAZyB;AAe/BY,qBAAa,cAAItJ,MAAJ,GAAauJ,OAAb,CACX,KADW,EAEX,cAAIvJ,MAAJ,GAAawB,IAAb,CAAkB;AAChB4F,oBAAU,cAAIsB,MAAJ,GAAac,KAAb,GAAqBnE,GAArB,CAAyB,EAAzB,EAA6BoE,KAA7B,CAAmC,EAAnC,EAAuCA,KAAvC,CAA6C,IAA7C,CADM;AAEhBnC,oBAAU,cAAIoB,MAAJ,GAAarD,GAAb,CAAiB,EAAjB,EAAqBoE,KAArB,CAA2B,EAA3B,EAA+BA,KAA/B,CAAqC,IAArC,CAFM;AAGhBhG,6BAAmB,cAAIiF,MAAJ,GAAae,KAAb,CAAmB,EAAnB,EAAuBA,KAAvB,CAA6B,IAA7B,CAHH;AAIhBzC,0BAAgB,cAAI4B,MAAJ,GAAac,OAAb,GAAuBpE,GAAvB,CAA2B,CAA3B,EAA8BD,GAA9B,CAAkC,EAAlC,CAJA;AAKhB9C,kBAAQ,cAAIqG,MAAJ,GAAac,OAAb,GAAuBpE,GAAvB,CAA2B,CAA3B,EAA8BD,GAA9B,CAAkC,GAAlC,CALQ;AAMhB6B,kBAAQ,cAAIwB,MAAJ,GAAae,KAAb,CAAmB,EAAnB,EAAuBA,KAAvB,CAA6B,IAA7B,CANQ;AAOhBE,2BAAiB,cAAI3J,MAAJ,GAAawB,IAAb,CAAkB;AACjCoI,uBAAW,cAAIR,KAAJ,GAAYC,KAAZ,CAAkB,cAAIX,MAAJ,EAAlB,CADsB;AAEjCmB,uBAAW,cAAIT,KAAJ,GAAYC,KAAZ,CAAkB,cAAIX,MAAJ,EAAlB;AAFsB,WAAlB;AAPD,SAAlB,CAFW;AAfkB,OAAlB,CAAf;AA+BA,UAAM7F,SAAiB,cAAIwF,QAAJ,CAAaJ,MAAb,EAAqBM,MAArB,CAAvB;;AAEA;AACA,UAAI1F,OAAOxD,KAAX,EAAkB;AAChB,cAAMwD,OAAOxD,KAAb;AACD;;AAED,aAAO,IAAP;AACD;AAlDU;;AAAA;AAAA,I;;;;;;;;;;;;;qjBCHf;;;;;;;;;;;;;;;;;;AAkBA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;IAEqByI,M;AAInB,kBAAYG,MAAZ,EAA6B;AAAA;;AAAA,SAH7BO,MAG6B,GAHX,IAGW;AAAA,SAF7BP,MAE6B,GAFX,IAEW;;AAC3B,SAAKA,MAAL,GAAcA,MAAd;AACA,SAAKO,MAAL,GAAc,KAAKsB,YAAL,EAAd;AACD;;;;mCAEc;AACb;AACA,UAAMtB,SAAiB,IAAI,eAAKV,MAAT,CAAgB;AACrCiC,eAAO;AACLC,mBAAS,CACP,OADO,EAEP,SAAyC,OAAzC,GAAmD,IAF5C,EAGPC,MAHO,CAGAC,OAHA;AADJ;AAD8B,OAAhB,CAAvB;AAQA1B,aAAO3D,UAAP,CAAkB,KAAKoD,MAAL,CAAYkC,GAAZ,CAAgB,QAAhB,CAAlB;;AAEA;AACA,uBAAO1I,OAAP,CAAe,UAAC2I,KAAD;AAAA,eAAmB5B,OAAO4B,KAAP,CAAaA,KAAb,CAAnB;AAAA,OAAf;;AAEA,aAAO5B,MAAP;AACD;;;4BAEgB;AAAA;;AACf;AACA,aAAO,sBAAU,KAAKA,MAAL,CAAY6B,QAAtB,EAAgC,KAAK7B,MAArC,EAA6C,CAClD;AACE6B,gCADF;AAEE/F,iBAAS;AACPgG,eAAK;AACHC,sBAAU;AADP,WADE;AAIPC,qBAAW;AACTC,qBAAS,CACP;AACE1C,sBAAQ,cADV;AAEExH,oBAAM,SAFR;AAGE5B,oBAAM,CACJ;AACEqL,yBAAS,KAAK/B,MAAL,CAAYkC,GAAZ,CAAgB,WAAhB,CADX;AAEElK,qBAAK,KAAKgI,MAAL,CAAYkC,GAAZ,CAAgB,WAAhB,CAFP;AAGEG,qBAAK;AAHP,eADI;AAHR,aADO,EAYP;AACEvC,sBAAQ;AADV,aAZO,EAeP,QAfO,CADA;AAkBT2C,kBAAM,CACJ;AACE3C,sBAAQ,cADV;AAEExH,oBAAM,SAFR;AAGE5B,oBAAM,CACJ;AACEsB,qBAAK,KAAKgI,MAAL,CAAYkC,GAAZ,CAAgB,WAAhB,CADP;AAEEG,qBAAK;AAFP,eADI;AAHR,aADI,EAWJ;AACEvC,sBAAQ,cADV;AAEExH,oBAAM;AAFR,aAXI,EAeJ;AACEwH,sBAAQ,WADV;AAEEpJ,oBAAM,CAAC,YAAD;AAFR,aAfI;AAlBG;AAJJ;AAFX,OADkD,EAgDlD;AACE0L;AADF,OAhDkD,CAA7C,EAoDJrG,IApDI,CAoDC,YAAM;AACV;AACA,cAAKwE,MAAL,CAAYmC,QAAZ,CAAqB,OAArB,EAA8B,OAA9B,EAAuC,SAASC,cAAT,CACrCvL,KADqC,EAErC;AACA,cAAIA,0CAAJ,EAAoC;AAClC,gBAAMc,OAAeS,OAAOC,MAAP,CACnB;AACEuB,oBAAM/C,MAAM+C;AADd,aADmB,EAInB/C,MAAMgD,OAJa,CAArB;AAMA,iBAAKwI,IAAL,CAAUxL,MAAM8C,UAAhB,EAA4B9C,MAAM6C,OAAlC,EAA2C/B,IAA3C;AACD,WARD,MAQO;AACL,iBAAKd,KAAL;AACD;AACF,SAdD;AAeA,cAAKmJ,MAAL,CAAYsC,GAAZ,CAAgB,eAAhB,EAAiC,UAACd,OAAD,EAAkBe,KAAlB,EAAsC;AACrE,cAAMC,WAAmBhB,QAAQgB,QAAjC;;AAEA,cAAI,CAACA,SAASC,MAAd,EAAsB;AACpBF,kBAAMG,QAAN;AACD,WAFD,MAEO;AACL;AACAF,qBAASG,MAAT,CAAgBC,OAAhB,CAAwBjL,IAAxB,GAA+B6K,SAAS7K,IAAT,GAC3B6K,SAAS7K,IADkB,GAE3BwB,SAFJ;AAGAqI,oBAAQ/J,GAAR,CAAY,CAAC,OAAD,CAAZ,EAAuB+K,QAAvB;AACAD,kBAAMC,QAAN;AACD;AACF,SAbD;;AAeA;AACA,cAAKxC,MAAL,CAAYmC,QAAZ,CAAqB,SAArB,EAAgC,QAAhC,EAA0C,MAAK1C,MAA/C;;AAEA;AACA,eAAO,sBAAU,MAAKO,MAAL,CAAY6C,KAAtB,EAA6B,MAAK7C,MAAlC,GAAP;AACD,OAzFI,EA0FJxE,IA1FI,CA0FC,YAAM;AACV;AACA,cAAKiE,MAAL,CAAY5H,MAAZ,GAAqB,MAAKmI,MAAL,CAAYvI,GAAZ,CAAgBT,IAAhB,CAAqB,MAAKgJ,MAA1B,CAArB;AACA,uBAAKnI,MAAL,GAAc,MAAKmI,MAAL,CAAYvI,GAAZ,CAAgBT,IAAhB,CAAqB,MAAKgJ,MAA1B,CAAd;;AAEA;AACA,cAAKA,MAAL,CAAYvI,GAAZ,CAAgB,CAAC,OAAD,CAAhB,0BAAiD,MAAKuI,MAAL,CAAY8C,IAAZ,CAAiBC,GAAlE;AACD,OAjGI,CAAP;AAkGD;;;;;;kBA/HkBzD,M;;;;;;;;;;;;;ACTrB;;;;;;iCAlBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ypBCAA;;;;;;;;;;;;;;;;;;AAkBA;;;;AACA;;;;AACA;;AACA;;;;kBAEe;AACb;AACA;AACE0D,UAAQ,MADV;AAEEvK,QAAM,uBAFR;AAGEgH,UAAQ;AACNwD,iBAAa,YADP;AAENC,WAAO,2CAFD;AAGNjL,UAAM,CAAC,KAAD,CAHA;AAIN4H,cAAU;AACRsD,cAAQ;AACN1F,wBAAgB,cAAIyC,MAAJ,GAAakD,KAAb,CAAmB,kBAAnB;AADV,OADA;;AAKRR,eAAS;AACPvG,oBAAY,cAAI6D,MAAJ,GAAac,KAAb,GAAqBqC,QAArB,GAAgCC,OAAhC,CAAwC,KAAxC,CADL;AAEP1E,kBAAU,cAAIsB,MAAJ,GAAac,KAAb,GAAqBnE,GAArB,CAAyB,EAAzB,EAA6BwG,QAA7B,GAAwCC,OAAxC,CAAgD,MAAhD,CAFH;AAGPxE,kBAAU,cAAIoB,MAAJ,GAAarD,GAAb,CAAiB,EAAjB,EAAqBwG,QAArB,GAAgCC,OAAhC,CAAwC,UAAxC,CAHH;AAIPrI,2BAAmB,cAAIiF,MAAJ,GAChBqD,QADgB,GAEhBD,OAFgB,CAER,sBAFQ,CAJZ;AAOP9E,wBAAgB,cAAI4B,MAAJ,GACbc,OADa,GAEbpE,GAFa,CAET,CAFS,EAGbD,GAHa,CAGT,EAHS,EAIb0G,QAJa,GAKbD,OALa,CAKL,CALK,CAPT;AAaPvJ,gBAAQ,cAAIqG,MAAJ,GACLc,OADK,GAELpE,GAFK,CAED,CAFC,EAGLD,GAHK,CAGD,GAHC,EAIL0G,QAJK,GAKLD,OALK,CAKG,GALH,CAbD;AAmBP5E,gBAAQ,cAAIwB,MAAJ,GAAasD,OAAb,CAAqB,EAArB,EAAyBvC,KAAzB,CAA+B,EAA/B,CAnBD;AAoBPjC,mBAAW,cAAIkB,MAAJ,GAAasD,OAAb,CAAqB,EAArB,EAAyBvC,KAAzB,CAA+B,EAA/B,CApBJ;AAqBPvD,oBAAY,cAAIlG,MAAJ,GAAagM,OAAb,CAAqB,EAArB,EAAyBF,OAAzB,CACVG,KAAKC,SAAL,CAAe;AACbC,oBAAU;AADG,SAAf,CADU;AArBL;AALD;AAJJ,GAHV;AAyCEC,WAAS,iBAACpC,OAAD,EAAkBe,KAAlB,EAAsC;AAC7C,QAAM9E,iBAAyB+D,QAAQ2B,MAAR,CAAe1F,cAA9C;;AAEA;AACA,QAAMqD,cAAsBU,QAAQ/B,MAAR,CAAekC,GAAf,CAAmB,aAAnB,CAA5B;AACA,QAAMtF,aAAsByE,YAAYU,QAAQoB,OAAR,CAAgBvG,UAA5B,CAA5B;;AAEA;AACA,QAAImF,QAAQoB,OAAR,CAAgBvG,UAAhB,IAA8B,CAACA,UAAnC,EAA+C;AAC7C,aAAOkG,MAAM1L,KAAN,CACL,8BAAkB,yCAAlB,CADK,CAAP;AAGD;;AAED;AACA,QAAMgN,cAAuB,qBAC3BxH,WAAW8E,eAAX,CAA2BC,SADA,EAE3B3D,cAF2B,CAA7B;AAIA,QAAI,CAACoG,WAAL,EAAkB;AAChB,UAAMC,cAAuB,qBAC3BzH,WAAW8E,eAAX,CAA2BE,SADA,EAE3B5D,cAF2B,CAA7B;AAIA,UAAIqG,WAAJ,EAAiB;AACf,eAAOvB,MAAM1L,KAAN,CACL,wDAC0B4G,cAD1B,uBADK,CAAP;AAKD;AACF;;AAED;AACA,QAAM9C,gBAAwB;AAC5BM,yBACEoB,WAAWpB,iBAAX,IAAgCuG,QAAQoB,OAAR,CAAgB3H,iBAFtB;AAG5BuD,sBACEnC,WAAWmC,cAAX,IAA6BgD,QAAQoB,OAAR,CAAgBpE,cAJnB;AAK5BzE,cAAQsC,WAAWtC,MAAX,IAAqByH,QAAQoB,OAAR,CAAgB7I,MALjB;AAM5B2E,cAAQrC,WAAWqC,MAAX,IAAqB8C,QAAQoB,OAAR,CAAgBlE;;AAG/C;AAT8B,KAA9B,CAUA,IAAI8C,QAAQoB,OAAR,CAAgB5D,SAAhB,IAA6BwC,QAAQuC,KAAR,CAAchF,SAA/C,EAA0D;AACxD;AACApE,oBAAcqE,SAAd,GACE3C,WAAW2C,SAAX,IACAwC,QAAQoB,OAAR,CAAgB5D,SADhB,IAEAwC,QAAQuC,KAAR,CAAchF,SAHhB;AAID,KAND,MAMO;AACLpE,oBAAciE,QAAd,GAAyBvC,WAAWuC,QAAX,IAAuB4C,QAAQoB,OAAR,CAAgBhE,QAAhE;AACAjE,oBAAcmE,QAAd,GAAyBzC,WAAWyC,QAAX,IAAuB0C,QAAQoB,OAAR,CAAgB9D,QAAhE;AACD;;AAED;AACA,QAAMpB,aAAqB8D,QAAQoB,OAAR,CAAgBlF,UAA3C;AACA,mBAAKiE,GAAL,CAAShH,aAAT,EAAwB6G,QAAQ/J,GAAR,CAAYT,IAAZ,CAAiBwK,OAAjB,CAAxB,EACGrG,OADH,GAEGK,IAFH,CAEQ,UAACzB,MAAD;AAAA,aACJA,OAAO4D,MAAP,CAAcF,cAAd,EAA8BC,UAA9B,CADI;AAAA,KAFR,EAKGlC,IALH,CAKQ,gBAAoC;AAAA;AAAA,UAAlCnB,MAAkC;AAAA,UAAlB2J,IAAkB;;AACxC;AACAzB,YAAM;AACJlI,sBADI;AAEJ2J;AAFI,OAAN;AAID,KAXH,EAYGvI,KAZH,CAYS,UAAC5E,KAAD,EAAkB;AACvB0L,YAAM1L,KAAN,CAAYA,KAAZ;AACD,KAdH;;AAgBA,WAAO,IAAP;AACD;AAnHH,CAFa,C;;;;;;ACvBf;;;;;;;ACAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,YAAY,kBAAkB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D,gCAAgC,EAAE;AAC5F,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,oCAAoC,wBAAwB;AAC5D,sCAAsC,sBAAsB;AAC5D,wCAAwC,4BAA4B;AACpE,iDAAiD,wBAAwB;AACzE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC,eAAe;AACrD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,2FAA2F,oBAAoB;AAC/G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrgBA,2C;;;;;;ACAA,+B;;;;;;ACAA,iC;;;;;;ACAA,iC;;;;;;ACAA,iD;;;;;;ACAA,mC;;;;;;ACAA,qC;;;;;;ACAA,wC;;;;;;ACAA,kC;;;;;;ACAA,uC;;;;;;ACAA,kBAAkB,0QAA0Q,iBAAiB,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","file":"cli.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c95571435e01a4488452","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nexport function promisify(func: Function, boundObject: ?Object): Function {\n  return (...args): Promise =>\n    new Promise((resolve: Function, reject: Function) => {\n      // Workaround because reject/resolve does not work in node-rfc environment\n      let rejectError: ?any = null\n      let resolveValues: ?Array = null\n      const checkReturn: Function = () => {\n        // Anything returned so far?\n        let handled: boolean = false\n        if (rejectError) {\n          reject(rejectError)\n          handled = true\n        } else if (resolveValues) {\n          resolve(resolveValues)\n          handled = true\n        }\n\n        // Recheck in the future?\n        if (!handled) {\n          setTimeout(checkReturn, 10)\n        }\n      }\n      setTimeout(checkReturn, 10)\n\n      // Create the last argument: the generic callback function\n      const callback: Function = (error: ?any, ...values) => {\n        if (error) {\n          rejectError = error\n          // reject(error)\n        } else {\n          resolveValues = values\n          // resolve(values)\n        }\n      }\n      args.push(callback)\n\n      // Call function\n      setTimeout(() => {\n        try {\n          if (boundObject) {\n            func.bind(boundObject)(...args)\n          } else {\n            func(...args)\n          }\n        } catch (error) {\n          rejectError = error\n        }\n      }, 0)\n    })\n}\n\nexport function pad(\n  input: string | number,\n  length: number,\n  character: string = ' ',\n): string {\n  return (Array(length).join(character) + input.toString()).slice(-1 * length)\n}\n\nexport function makeLoggable(object: Object): Object {\n  const log: Function = function log(\n    tag: string | Array<string>,\n    data: string,\n    details: ?any,\n  ) {\n    if (this.logger) {\n      const scope: string = this.name || this.constructor.name\n      const tags: Array = Array.isArray(tag)\n        ? [scope].concat(tag)\n        : [scope, tag]\n      this.logger(tags, data)\n\n      if (details) {\n        this.logger(tags, details)\n      }\n    }\n  }\n\n  // Add log function to class and prototype\n  Object.assign(object, {\n    log,\n  })\n  Object.assign(object.prototype, {\n    log,\n  })\n\n  return object\n}\n\nexport function isFunction(object: any): boolean {\n  return !!(object && object.constructor && object.call && object.apply)\n}\n\nexport function findByPath(object: Object, path: string): any {\n  const parts: Array<string> = path.trim() === '' ? [] : path.split('.')\n  let value: ?any = object\n  while (value && parts.length > 0) {\n    value = value[parts.shift()]\n  }\n  return value\n}\n\nexport function removeUndefinedValues(object: Object): Object {\n  const copy: Object = Object.assign({}, object)\n  Object.keys(copy).forEach((key: any) => {\n    if (copy[key] === undefined) {\n      delete copy[key]\n    }\n  })\n\n  return copy\n}\n\nexport function isListed(list: Array, searchValue: string): boolean {\n  return list.some(\n    (value: string): boolean =>\n      !!searchValue.match(new RegExp(`^${value.split('*').join('(.*)')}$`)),\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport ErrorSubclass from 'error-subclass'\n\nexport class HttpException extends ErrorSubclass {\n  context: ?Object = null\n\n  constructor(\n    message: ?string,\n    statusCode: ?number = 400,\n    code: ?string,\n    context: ?Object,\n  ) {\n    super(message)\n    this.statusCode = statusCode\n    this.code = code\n    this.context = context\n  }\n}\n\nexport class RFCException extends HttpException {\n  client: ?Object = null\n\n  constructor(\n    message: ?string,\n    statusCode: ?number,\n    code: ?string,\n    context: ?Object,\n    client: ?Object,\n  ) {\n    super(message, statusCode, code, context)\n    this.client = client\n  }\n\n  static parse(error: Error, context: ?Object, client: ?Object): Object {\n    const key: ?string = error.key\n    let message: ?string = null\n\n    // Translate code to message\n    const code: number = parseInt(error.code, 10)\n    switch (code) {\n      case 1: {\n        const parsedMessage: Object = this.parseMessage(error.message)\n        const prefix: string = parsedMessage['ERRNO TEXT']\n          ? `${parsedMessage['ERRNO TEXT']}: `\n          : ''\n        message = `${prefix}${parsedMessage.ERROR}`\n        break\n      }\n\n      default: {\n        message = error.message\n      }\n    }\n\n    // Return result\n    let result: ?Error = null\n    if (this === RFCException) {\n      result = new this(message, 502, key, context, client)\n    } else {\n      result = new this(message, context, client)\n    }\n    return result\n  }\n\n  static parseMessage(message: string = ''): Object {\n    const result: Object = {}\n    message\n      .split('\\n')\n      .map((line: string): string => line.trim())\n      .forEach((line: string) => {\n        const key: string = line.substring(0, 12).trim()\n        const value: string = line.substring(12).trim()\n        if (key) {\n          result[key] = value\n        }\n      })\n    return result\n  }\n}\n\nexport class LogonException extends RFCException {\n  constructor(message: string, context: ?Object) {\n    super(message, 403, 'RFC_LOGON_FAILURE', context)\n  }\n}\n\nexport class TimeoutException extends HttpException {\n  client: ?Object = null\n\n  constructor(message: string, context: ?Object, client: ?Object) {\n    super(message, 504, 'RFC_TIMEOUT', context)\n    this.client = client\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Exceptions.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport Pool2 from 'pool2'\nimport objectHash from 'object-hash'\nimport Client from './Client'\nimport { TimeoutException } from './Exceptions'\nimport { makeLoggable, promisify } from './../utils'\n\nexport default makeLoggable(\n  class Pool {\n    static logger: ?Function = null\n\n    // Each destination has its own pool\n    static pools: Object = {}\n\n    static options: Object = {\n      acquireTimeout: 24 * 60 * 60 * 1000,\n      disposeTimeout: 30 * 1000,\n      pingTimeout: 2 * 1000,\n      idleTimeout: 120 * 1000,\n      requestTimeout: Infinity,\n\n      max: 1,\n      min: 0,\n      testOnBorrow: true,\n      evictionRunIntervalMillis: 5 * 60 * 1000,\n      maxRequests: Infinity,\n      backoff: {\n        min: 1 * 1000,\n        max: 60 * 1000,\n        jitter: 0,\n      },\n      bailAfter: 1,\n      bailTimeout: 30 * 1000,\n    }\n\n    static Client: Object = Client\n\n    static generateHash(configuration: Object): string {\n      return objectHash(configuration)\n    }\n\n    static remove(configuration: Object) {\n      const hash: string = this.generateHash(configuration)\n      const pool: ?Object = this.pools[hash]\n\n      if (pool) {\n        pool.end()\n        this.pools[hash] = undefined\n        this.log(\n          'debug',\n          `Removed connection pool \"${hash}\" for host \"${configuration.applicationServer}\".`,\n        )\n      }\n    }\n\n    static create(configuration: Object, logger: ?Function): Object {\n      let lastError: ?Error = null\n      const pool: Object = new Pool2(\n        Object.assign(\n          {\n            acquire: (callback: Function) => {\n              this.log(\n                'debug',\n                `Start acquiring connection for \"${configuration.applicationServer}\".`,\n              )\n\n              try {\n                const boundRelease: Function = pool.release.bind(pool)\n                this.Client\n                  .connect(configuration, boundRelease, logger)\n                  .then((client: Object) => {\n                    callback(null, client)\n                  })\n                  .catch((error: Error) => {\n                    // Check if error occurred in a client\n                    if (error.client) {\n                      // Release client from pool so it doesn't block future requests\n                      if (error.code && error.code.startsWith('RFC_')) {\n                        pool.destroy(error.client)\n                      } else {\n                        pool.remove(error.client)\n                      }\n                    } else {\n                      // If no connection could be established, remove the pool after some time\n                      // Any requests before are served with a cached error\n                      lastError = error\n                      setTimeout(\n                        () => Pool.remove(configuration),\n                        this.options.bailTimeout,\n                      )\n                    }\n\n                    callback(error)\n                  })\n              } catch (error) {\n                callback(error)\n              }\n            },\n\n            dispose: (client: Object, callback: Function) => {\n              this.log(\n                'debug',\n                `Disposing connection for \"${configuration.applicationServer}\".`,\n              )\n              client.close()\n              callback()\n            },\n\n            destroy: (client: Object, callback: Function) => {\n              this.log(\n                'debug',\n                `Destroying connection for \"${configuration.applicationServer}\".`,\n              )\n              callback()\n            },\n\n            ping: (client: Object, callback: Function) => {\n              // Asynchronously ping\n              setTimeout(() => {\n                if (client.ping()) {\n                  callback()\n                } else {\n                  callback(\n                    new TimeoutException(\n                      `Ping to \"${configuration.applicationServer}\" failed.`,\n                    ),\n                  )\n                }\n              }, 0)\n            },\n          },\n          this.options,\n        ),\n      )\n\n      // Promisify acquire and return last error if present\n      // Otherwise a generic error from pool2 would be thrown\n      const originalAcquire: Function = pool.acquire.bind(pool)\n      pool.acquire = function acquire(): Promise {\n        return promisify(originalAcquire, pool)()\n          .then(([client: Object]): Object => client)\n          .catch((error: Error) => {\n            throw lastError || error\n          })\n      }\n\n      // Catch all generic errors\n      pool.on('error', (error: Error) => {\n        if (!error.code) {\n          this.log(\n            'error',\n            `An error occured in pool \"${configuration.applicationServer}\".`,\n            error,\n          )\n        }\n      })\n\n      return pool\n    }\n\n    static get(configuration: Object, logger: ?Function): Object {\n      const hash: string = this.generateHash(configuration)\n      let connection: ?Object = null\n\n      // Reuse pool once it was created for a specific configuration\n      if (this.pools[hash]) {\n        connection = this.pools[hash]\n        this.log(\n          'debug',\n          `Reuse connection pool \"${hash}\" of host \"${configuration.applicationServer}\".`,\n        )\n      } else {\n        connection = this.create(configuration, logger)\n        this.pools[hash] = connection\n        this.log(\n          'debug',\n          `Added connection pool \"${hash}\" for host \"${configuration.applicationServer}\".`,\n        )\n      }\n\n      return connection\n    }\n  },\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Pool.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport { LogonException, RFCException, TimeoutException } from './Exceptions'\nimport { makeLoggable, pad, promisify, removeUndefinedValues } from './../utils'\n\nexport default makeLoggable(\n  class Client {\n    nodeRFC: ?Object = null\n    release: ?Function = null\n    logger: ?Function = null\n    connectTime: ?number = null\n    numberOfInvokes: number = 0\n\n    static options: Object = {\n      connectTimeout: 5 * 1000,\n      invokeTimeout: 30 * 1000,\n    }\n\n    // Needs to be required as it could throw an exception if it was not built correctly\n    static get NodeRFC(): Object {\n      // eslint-disable-next-line global-require, import/no-unresolved\n      return require('node-rfc').Client\n    }\n\n    constructor(nodeRFC: Object, release: Function) {\n      this.nodeRFC = nodeRFC\n      this.release = release\n    }\n\n    static connect(\n      configuration: Object,\n      release: Function,\n      logger: ?Function,\n    ): Promise {\n      const nodeRFC: Object = new this.NodeRFC(\n        removeUndefinedValues({\n          ashost: configuration.applicationServer,\n          sysnr: pad(configuration.instanceNumber, 2, '0'),\n          client: pad(configuration.client, 3, '0'),\n          saprouter: configuration.router,\n          user: configuration.username,\n          passwd: configuration.password,\n          MYSAPSSO2: configuration.mysapsso2,\n          trace: '0',\n        }),\n      )\n      const connect: Function = nodeRFC.connect\n      const startTime: Date = new Date()\n\n      // Connect to system\n      const connectPromise: Promise = promisify(connect, nodeRFC)\n        .apply(nodeRFC)\n        .then((): Object => {\n          // Create client\n          const client: Object = new Client(nodeRFC, release)\n          client.logger = logger\n          client.connectTime = new Date() - startTime\n          return client\n        })\n        .catch((error: Error) => {\n          throw LogonException.parse(\n            error,\n            Object.assign({}, configuration, { password: '********' }),\n          )\n        })\n\n      // Prevent that a RFC runs forever\n      const timeoutPromise: Promise = new Promise(\n        (resolve: Function, reject: Function) => {\n          setTimeout(() => {\n            reject(\n              new TimeoutException(\n                `The system took too long to respond (more than ${this.options\n                  .connectTimeout / 1000} seconds).`,\n                Object.assign({}, configuration, { password: '********' }),\n              ),\n            )\n          }, this.options.connectTimeout)\n        },\n      )\n\n      // Whoever finishes first wins the race\n      return Promise.race([connectPromise, timeoutPromise])\n    }\n\n    close(): boolean {\n      return this.nodeRFC.close.apply(this.nodeRFC)\n    }\n\n    ping(): boolean {\n      return this.nodeRFC.ping.apply(this.nodeRFC)\n    }\n\n    invoke(functionModule: string, parameters: ?Object): Promise {\n      const invoke: Function = this.nodeRFC.invoke\n      const startTime: Date = new Date()\n\n      // Keep track of invokes\n      this.numberOfInvokes = this.numberOfInvokes + 1\n\n      // Call system\n      const args: Array = [functionModule, parameters]\n      const invokePromise: Promise = promisify(invoke, this.nodeRFC)\n        .apply(this.nodeRFC, args)\n        .catch((error: Error) => {\n          throw RFCException.parse(error, this)\n        })\n\n      // Prevent that a RFC runs forever\n      const timeoutPromise: Promise = new Promise(\n        (resolve: Function, reject: Function) => {\n          setTimeout(() => {\n            reject(\n              new TimeoutException(\n                `The function call took too long to respond (more than ${this\n                  .constructor.options.invokeTimeout / 1000} seconds).`,\n                {\n                  functionModule,\n                },\n                this,\n              ),\n            )\n          }, this.constructor.options.invokeTimeout)\n        },\n      )\n\n      // Whoever finishes first wins the race\n      return Promise.race([invokePromise, timeoutPromise])\n        .then(([result: Object]): Promise => {\n          // Release resource\n          this.release(this)\n\n          // Add performance information\n          return Promise.all([\n            result,\n            {\n              invokeTime: new Date() - startTime,\n              connectTime: this.numberOfInvokes === 1 ? this.connectTime : 0,\n            },\n          ])\n        })\n        .catch((error: Error) => {\n          // Release resource\n          this.release(this)\n\n          // Pass on error\n          throw error\n        })\n    }\n  },\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Client.js","module.exports = require(\"joi\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"joi\"\n// module id = 4\n// module chunks = 0 1","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 5\n// module chunks = 0 1","import _Client from './lib/Client'\nimport _Configuration from './lib/Configuration'\nimport _Pool from './lib/Pool'\nimport _Server from './lib/Server'\n\nconst r3connect: Object = {\n  Client: _Client,\n  Configuration: _Configuration,\n  Pool: _Pool,\n  Server: _Server,\n}\n\nexport default r3connect\nexport const Client = _Client\nexport const Configuration = _Configuration\nexport const Server = _Server\nexport const Pool = _Pool\nmodule.exports = r3connect\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Joi from 'joi'\nimport { findByPath, isFunction, makeLoggable } from './../utils'\n\nexport default makeLoggable(\n  class Configuration {\n    config: ?Object = null\n    fallbackConfig: ?Object = null\n\n    constructor(config: ?Object | Function, fallbackConfig: Object) {\n      this.fallbackConfig = fallbackConfig\n      this.set(config)\n    }\n\n    static validate(config: Object): boolean {\n      const schema = Joi.object().keys({\n        server: Joi.object().keys({\n          host: Joi.string(),\n          port: Joi.number().min(1),\n          routes: Joi.object().keys({\n            cors: Joi.boolean(),\n          }),\n          tls: Joi.object().keys({\n            key: Joi.binary(),\n            cert: Joi.binary(),\n          }),\n        }),\n        logs: Joi.object().keys({\n          tags: Joi.array().items(Joi.string()),\n        }),\n        connections: Joi.object().pattern(\n          /\\w+/,\n          Joi.object().keys({\n            username: Joi.string().token().max(12).allow('').allow(null),\n            password: Joi.string().max(40).allow('').allow(null),\n            applicationServer: Joi.string().allow('').allow(null),\n            instanceNumber: Joi.number().integer().min(0).max(99),\n            client: Joi.number().integer().min(0).max(999),\n            router: Joi.string().allow('').allow(null),\n            functionModules: Joi.object().keys({\n              whitelist: Joi.array().items(Joi.string()),\n              blacklist: Joi.array().items(Joi.string()),\n            }),\n          }),\n        ),\n      })\n      const result: Object = Joi.validate(config, schema)\n\n      // Provide details about the failed validation\n      if (result.error) {\n        throw result.error\n      }\n\n      return true\n    }\n\n    set(content: ?Object | Function) {\n      if (!content) {\n        this.log(\n          'error',\n          'The configuration provided is empty and hence the standard configuration file will be used.',\n        )\n        this.config = this.fallbackConfig\n      } else {\n        let config: ?Object = null\n\n        // Content could be an extension or a config\n        if (typeof content === 'function') {\n          config = content(this.fallbackConfig)\n        } else {\n          config = content\n        }\n\n        // Validate configuration against the defined schema\n        try {\n          Configuration.validate(config)\n          this.log('debug', 'Successfully reloaded configuration.')\n          this.config = config\n        } catch (error) {\n          this.log(\n            'error',\n            `Unfortunately the new configuration does not follow the allowed schema and thus the old configuration wil be kept. The error was: ${error.message}`,\n          )\n          this.config = this.config || this.fallbackConfig\n        }\n      }\n    }\n\n    get(path: string): any {\n      let value: any = findByPath(this.config, path)\n\n      // Take value from fallback configuration if it was not found\n      if (value === undefined) {\n        value = findByPath(this.fallbackConfig, path)\n      } else if (isFunction(value)) {\n        // Allow extensibility by calling the function with the fallback value\n        const fallbackValue: any = findByPath(this.fallbackConfig, path)\n        value = value(fallbackValue)\n      }\n\n      if (value === undefined) {\n        this.log(\n          'error',\n          `The requested configuration for path \"${path}\" does not exist.`,\n        )\n      }\n\n      return value\n    }\n  },\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Configuration.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport 'source-map-support/register'\nimport Hapi from 'hapi'\nimport Good from 'good'\nimport HapiBoomDecorators from 'hapi-boom-decorators'\nimport { HttpException } from './Exceptions'\nimport Pool from './Pool'\nimport routes from './../routes/'\nimport { promisify } from './../utils'\n\nexport default class Server {\n  server: ?Object = null\n  config: ?Object = null\n\n  constructor(config: ?Object) {\n    this.config = config\n    this.server = this.createServer()\n  }\n\n  createServer() {\n    // Create server\n    const server: Object = new Hapi.Server({\n      debug: {\n        request: [\n          'error',\n          process.env.NODE_ENV === 'development' ? 'debug' : null,\n        ].filter(Boolean),\n      },\n    })\n    server.connection(this.config.get('server'))\n\n    // Add routes\n    routes.forEach((route: Object) => server.route(route))\n\n    return server\n  }\n\n  start(): Promise {\n    // Register plugins and start the server\n    return promisify(this.server.register, this.server)([\n      {\n        register: Good,\n        options: {\n          ops: {\n            interval: 30000,\n          },\n          reporters: {\n            console: [\n              {\n                module: 'good-squeeze',\n                name: 'Squeeze',\n                args: [\n                  {\n                    request: this.config.get('logs.tags'),\n                    log: this.config.get('logs.tags'),\n                    ops: '*',\n                  },\n                ],\n              },\n              {\n                module: 'good-console',\n              },\n              'stdout',\n            ],\n            file: [\n              {\n                module: 'good-squeeze',\n                name: 'Squeeze',\n                args: [\n                  {\n                    log: this.config.get('logs.tags'),\n                    ops: '*',\n                  },\n                ],\n              },\n              {\n                module: 'good-squeeze',\n                name: 'SafeJson',\n              },\n              {\n                module: 'good-file',\n                args: ['./logs/log'],\n              },\n            ],\n          },\n        },\n      },\n      {\n        register: HapiBoomDecorators,\n      },\n    ])\n      .then(() => {\n        // Error handling\n        this.server.decorate('reply', 'error', function replyWithError(\n          error: Error,\n        ) {\n          if (error instanceof HttpException) {\n            const data: Object = Object.assign(\n              {\n                code: error.code,\n              },\n              error.context,\n            )\n            this.boom(error.statusCode, error.message, data)\n          } else {\n            this(error)\n          }\n        })\n        this.server.ext('onPreResponse', (request: Object, reply: Function) => {\n          const response: Object = request.response\n\n          if (!response.isBoom) {\n            reply.continue()\n          } else {\n            // Output details of errors\n            response.output.payload.data = response.data\n              ? response.data\n              : undefined\n            request.log(['error'], response)\n            reply(response)\n          }\n        })\n\n        // Provide configuration in requests\n        this.server.decorate('request', 'config', this.config)\n\n        // Start server\n        return promisify(this.server.start, this.server)()\n      })\n      .then(() => {\n        // Set loggers\n        this.config.logger = this.server.log.bind(this.server)\n        Pool.logger = this.server.log.bind(this.server)\n\n        // Let's go\n        this.server.log(['debug'], `Server running at: ${this.server.info.uri}`)\n      })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Server.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport rfc from './rfc'\n\nexport default rfc\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/index.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport Joi from 'joi'\nimport Pool from './../lib/Pool'\nimport { HttpException } from './../lib/Exceptions'\nimport { isListed } from './../utils'\n\nexport default [\n  // Invoke RFC\n  {\n    method: 'POST',\n    path: '/rfc/{functionModule}',\n    config: {\n      description: 'Invoke RFC',\n      notes: 'Invokes a function module in the back-end',\n      tags: ['api'],\n      validate: {\n        params: {\n          functionModule: Joi.string().regex(/^[0-9a-zA-Z/_]+$/),\n        },\n\n        payload: {\n          connection: Joi.string().token().optional().example('XYZ'),\n          username: Joi.string().token().max(12).optional().example('DDIC'),\n          password: Joi.string().max(40).optional().example('11920706'),\n          applicationServer: Joi.string()\n            .required()\n            .example('gateway.example.corp'),\n          instanceNumber: Joi.number()\n            .integer()\n            .min(0)\n            .max(99)\n            .required()\n            .example(1),\n          client: Joi.number()\n            .integer()\n            .min(0)\n            .max(999)\n            .required()\n            .example(100),\n          router: Joi.string().default('').allow(''),\n          mysapsso2: Joi.string().default('').allow(''),\n          parameters: Joi.object().default({}).example(\n            JSON.stringify({\n              iv_input: 'example',\n            }),\n          ),\n        },\n      },\n    },\n    handler: (request: Object, reply: Function) => {\n      const functionModule: string = request.params.functionModule\n\n      // Get configuration for connection (also if the passed connection is undefined)\n      const connections: Object = request.config.get('connections')\n      const connection: ?Object = connections[request.payload.connection]\n\n      // Proceed only if the provided connection exists\n      if (request.payload.connection && !connection) {\n        return reply.error(\n          new HttpException('The connection you provided is invalid.'),\n        )\n      }\n\n      // Check if the function module is black/white listed\n      const whitelisted: boolean = isListed(\n        connection.functionModules.whitelist,\n        functionModule,\n      )\n      if (!whitelisted) {\n        const blacklisted: boolean = isListed(\n          connection.functionModules.blacklist,\n          functionModule,\n        )\n        if (blacklisted) {\n          return reply.error(\n            new HttpException(\n              `The function module \"${functionModule}\" is blacklisted.`,\n            ),\n          )\n        }\n      }\n\n      // Create configuration\n      const configuration: Object = {\n        applicationServer:\n          connection.applicationServer || request.payload.applicationServer,\n        instanceNumber:\n          connection.instanceNumber || request.payload.instanceNumber,\n        client: connection.client || request.payload.client,\n        router: connection.router || request.payload.router,\n      }\n\n      // Add credentials (either SSO2 cookie or user/password)\n      if (request.payload.mysapsso2 || request.state.MYSAPSSO2) {\n        // Use connection.MYSAPSSO2 because it will allow to disable cookies via configuration (via mysapsso2 = null)\n        configuration.mysapsso2 =\n          connection.mysapsso2 ||\n          request.payload.mysapsso2 ||\n          request.state.MYSAPSSO2\n      } else {\n        configuration.username = connection.username || request.payload.username\n        configuration.password = connection.password || request.payload.password\n      }\n\n      // Acquire connection from pool and invoke RFC\n      const parameters: Object = request.payload.parameters\n      Pool.get(configuration, request.log.bind(request))\n        .acquire()\n        .then((client: Object): Promise =>\n          client.invoke(functionModule, parameters),\n        )\n        .then(([result: Object, meta: Object]) => {\n          // Reply with result but as well metadata that was gathered\n          reply({\n            result,\n            meta,\n          })\n        })\n        .catch((error: Error) => {\n          reply.error(error)\n        })\n\n      return null\n    },\n  },\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/rfc.js","require('./').install();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/source-map-support/register.js\n// module id = 11\n// module chunks = 0 1","var SourceMapConsumer = require('source-map').SourceMapConsumer;\nvar path = require('path');\n\nvar fs;\ntry {\n  fs = require('fs');\n  if (!fs.existsSync || !fs.readFileSync) {\n    // fs doesn't have all methods we need\n    fs = null;\n  }\n} catch (err) {\n  /* nop */\n}\n\n// Only install once if called multiple times\nvar errorFormatterInstalled = false;\nvar uncaughtShimInstalled = false;\n\n// If true, the caches are reset before a stack trace formatting operation\nvar emptyCacheBetweenOperations = false;\n\n// Supports {browser, node, auto}\nvar environment = \"auto\";\n\n// Maps a file path to a string containing the file contents\nvar fileContentsCache = {};\n\n// Maps a file path to a source map for that file\nvar sourceMapCache = {};\n\n// Regex for detecting source maps\nvar reSourceMap = /^data:application\\/json[^,]+base64,/;\n\n// Priority list of retrieve handlers\nvar retrieveFileHandlers = [];\nvar retrieveMapHandlers = [];\n\nfunction isInBrowser() {\n  if (environment === \"browser\")\n    return true;\n  if (environment === \"node\")\n    return false;\n  return ((typeof window !== 'undefined') && (typeof XMLHttpRequest === 'function') && !(window.require && window.module && window.process && window.process.type === \"renderer\"));\n}\n\nfunction hasGlobalProcessEventEmitter() {\n  return ((typeof process === 'object') && (process !== null) && (typeof process.on === 'function'));\n}\n\nfunction handlerExec(list) {\n  return function(arg) {\n    for (var i = 0; i < list.length; i++) {\n      var ret = list[i](arg);\n      if (ret) {\n        return ret;\n      }\n    }\n    return null;\n  };\n}\n\nvar retrieveFile = handlerExec(retrieveFileHandlers);\n\nretrieveFileHandlers.push(function(path) {\n  // Trim the path to make sure there is no extra whitespace.\n  path = path.trim();\n  if (path in fileContentsCache) {\n    return fileContentsCache[path];\n  }\n\n  var contents = null;\n  if (!fs) {\n    // Use SJAX if we are in the browser\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', path, false);\n    xhr.send(null);\n    var contents = null\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      contents = xhr.responseText\n    }\n  } else if (fs.existsSync(path)) {\n    // Otherwise, use the filesystem\n    contents = fs.readFileSync(path, 'utf8');\n  }\n\n  return fileContentsCache[path] = contents;\n});\n\n// Support URLs relative to a directory, but be careful about a protocol prefix\n// in case we are in the browser (i.e. directories may start with \"http://\")\nfunction supportRelativeURL(file, url) {\n  if (!file) return url;\n  var dir = path.dirname(file);\n  var match = /^\\w+:\\/\\/[^\\/]*/.exec(dir);\n  var protocol = match ? match[0] : '';\n  return protocol + path.resolve(dir.slice(protocol.length), url);\n}\n\nfunction retrieveSourceMapURL(source) {\n  var fileData;\n\n  if (isInBrowser()) {\n     try {\n       var xhr = new XMLHttpRequest();\n       xhr.open('GET', source, false);\n       xhr.send(null);\n       fileData = xhr.readyState === 4 ? xhr.responseText : null;\n\n       // Support providing a sourceMappingURL via the SourceMap header\n       var sourceMapHeader = xhr.getResponseHeader(\"SourceMap\") ||\n                             xhr.getResponseHeader(\"X-SourceMap\");\n       if (sourceMapHeader) {\n         return sourceMapHeader;\n       }\n     } catch (e) {\n     }\n  }\n\n  // Get the URL of the source map\n  fileData = retrieveFile(source);\n  var re = /(?:\\/\\/[@#][ \\t]+sourceMappingURL=([^\\s'\"]+?)[ \\t]*$)|(?:\\/\\*[@#][ \\t]+sourceMappingURL=([^\\*]+?)[ \\t]*(?:\\*\\/)[ \\t]*$)/mg;\n  // Keep executing the search to find the *last* sourceMappingURL to avoid\n  // picking up sourceMappingURLs from comments, strings, etc.\n  var lastMatch, match;\n  while (match = re.exec(fileData)) lastMatch = match;\n  if (!lastMatch) return null;\n  return lastMatch[1];\n};\n\n// Can be overridden by the retrieveSourceMap option to install. Takes a\n// generated source filename; returns a {map, optional url} object, or null if\n// there is no source map.  The map field may be either a string or the parsed\n// JSON object (ie, it must be a valid argument to the SourceMapConsumer\n// constructor).\nvar retrieveSourceMap = handlerExec(retrieveMapHandlers);\nretrieveMapHandlers.push(function(source) {\n  var sourceMappingURL = retrieveSourceMapURL(source);\n  if (!sourceMappingURL) return null;\n\n  // Read the contents of the source map\n  var sourceMapData;\n  if (reSourceMap.test(sourceMappingURL)) {\n    // Support source map URL as a data url\n    var rawData = sourceMappingURL.slice(sourceMappingURL.indexOf(',') + 1);\n    sourceMapData = new Buffer(rawData, \"base64\").toString();\n    sourceMappingURL = source;\n  } else {\n    // Support source map URLs relative to the source URL\n    sourceMappingURL = supportRelativeURL(source, sourceMappingURL);\n    sourceMapData = retrieveFile(sourceMappingURL);\n  }\n\n  if (!sourceMapData) {\n    return null;\n  }\n\n  return {\n    url: sourceMappingURL,\n    map: sourceMapData\n  };\n});\n\nfunction mapSourcePosition(position) {\n  var sourceMap = sourceMapCache[position.source];\n  if (!sourceMap) {\n    // Call the (overrideable) retrieveSourceMap function to get the source map.\n    var urlAndMap = retrieveSourceMap(position.source);\n    if (urlAndMap) {\n      sourceMap = sourceMapCache[position.source] = {\n        url: urlAndMap.url,\n        map: new SourceMapConsumer(urlAndMap.map)\n      };\n\n      // Load all sources stored inline with the source map into the file cache\n      // to pretend like they are already loaded. They may not exist on disk.\n      if (sourceMap.map.sourcesContent) {\n        sourceMap.map.sources.forEach(function(source, i) {\n          var contents = sourceMap.map.sourcesContent[i];\n          if (contents) {\n            var url = supportRelativeURL(sourceMap.url, source);\n            fileContentsCache[url] = contents;\n          }\n        });\n      }\n    } else {\n      sourceMap = sourceMapCache[position.source] = {\n        url: null,\n        map: null\n      };\n    }\n  }\n\n  // Resolve the source URL relative to the URL of the source map\n  if (sourceMap && sourceMap.map) {\n    var originalPosition = sourceMap.map.originalPositionFor(position);\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    if (originalPosition.source !== null) {\n      originalPosition.source = supportRelativeURL(\n        sourceMap.url, originalPosition.source);\n      return originalPosition;\n    }\n  }\n\n  return position;\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nfunction mapEvalOrigin(origin) {\n  // Most eval() calls are in this format\n  var match = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin);\n  if (match) {\n    var position = mapSourcePosition({\n      source: match[2],\n      line: +match[3],\n      column: match[4] - 1\n    });\n    return 'eval at ' + match[1] + ' (' + position.source + ':' +\n      position.line + ':' + (position.column + 1) + ')';\n  }\n\n  // Parse nested eval() calls using recursion\n  match = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin);\n  if (match) {\n    return 'eval at ' + match[1] + ' (' + mapEvalOrigin(match[2]) + ')';\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin;\n}\n\n// This is copied almost verbatim from the V8 source code at\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js. The\n// implementation of wrapCallSite() used to just forward to the actual source\n// code of CallSite.prototype.toString but unfortunately a new release of V8\n// did something to the prototype chain and broke the shim. The only fix I\n// could find was copy/paste.\nfunction CallSiteToString() {\n  var fileName;\n  var fileLocation = \"\";\n  if (this.isNative()) {\n    fileLocation = \"native\";\n  } else {\n    fileName = this.getScriptNameOrSourceURL();\n    if (!fileName && this.isEval()) {\n      fileLocation = this.getEvalOrigin();\n      fileLocation += \", \";  // Expecting source position to follow.\n    }\n\n    if (fileName) {\n      fileLocation += fileName;\n    } else {\n      // Source code does not originate from a file and is not native, but we\n      // can still get the source position inside the source string, e.g. in\n      // an eval string.\n      fileLocation += \"<anonymous>\";\n    }\n    var lineNumber = this.getLineNumber();\n    if (lineNumber != null) {\n      fileLocation += \":\" + lineNumber;\n      var columnNumber = this.getColumnNumber();\n      if (columnNumber) {\n        fileLocation += \":\" + columnNumber;\n      }\n    }\n  }\n\n  var line = \"\";\n  var functionName = this.getFunctionName();\n  var addSuffix = true;\n  var isConstructor = this.isConstructor();\n  var isMethodCall = !(this.isToplevel() || isConstructor);\n  if (isMethodCall) {\n    var typeName = this.getTypeName();\n    // Fixes shim to be backward compatable with Node v0 to v4\n    if (typeName === \"[object Object]\") {\n      typeName = \"null\";\n    }\n    var methodName = this.getMethodName();\n    if (functionName) {\n      if (typeName && functionName.indexOf(typeName) != 0) {\n        line += typeName + \".\";\n      }\n      line += functionName;\n      if (methodName && functionName.indexOf(\".\" + methodName) != functionName.length - methodName.length - 1) {\n        line += \" [as \" + methodName + \"]\";\n      }\n    } else {\n      line += typeName + \".\" + (methodName || \"<anonymous>\");\n    }\n  } else if (isConstructor) {\n    line += \"new \" + (functionName || \"<anonymous>\");\n  } else if (functionName) {\n    line += functionName;\n  } else {\n    line += fileLocation;\n    addSuffix = false;\n  }\n  if (addSuffix) {\n    line += \" (\" + fileLocation + \")\";\n  }\n  return line;\n}\n\nfunction cloneCallSite(frame) {\n  var object = {};\n  Object.getOwnPropertyNames(Object.getPrototypeOf(frame)).forEach(function(name) {\n    object[name] = /^(?:is|get)/.test(name) ? function() { return frame[name].call(frame); } : frame[name];\n  });\n  object.toString = CallSiteToString;\n  return object;\n}\n\nfunction wrapCallSite(frame) {\n  if(frame.isNative()) {\n    return frame;\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  var source = frame.getFileName() || frame.getScriptNameOrSourceURL();\n  if (source) {\n    var line = frame.getLineNumber();\n    var column = frame.getColumnNumber() - 1;\n\n    // Fix position in Node where some (internal) code is prepended.\n    // See https://github.com/evanw/node-source-map-support/issues/36\n    if (line === 1 && !isInBrowser() && !frame.isEval()) {\n      column -= 62;\n    }\n\n    var position = mapSourcePosition({\n      source: source,\n      line: line,\n      column: column\n    });\n    frame = cloneCallSite(frame);\n    frame.getFileName = function() { return position.source; };\n    frame.getLineNumber = function() { return position.line; };\n    frame.getColumnNumber = function() { return position.column + 1; };\n    frame.getScriptNameOrSourceURL = function() { return position.source; };\n    return frame;\n  }\n\n  // Code called using eval() needs special handling\n  var origin = frame.isEval() && frame.getEvalOrigin();\n  if (origin) {\n    origin = mapEvalOrigin(origin);\n    frame = cloneCallSite(frame);\n    frame.getEvalOrigin = function() { return origin; };\n    return frame;\n  }\n\n  // If we get here then we were unable to change the source position\n  return frame;\n}\n\n// This function is part of the V8 stack trace API, for more info see:\n// http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi\nfunction prepareStackTrace(error, stack) {\n  if (emptyCacheBetweenOperations) {\n    fileContentsCache = {};\n    sourceMapCache = {};\n  }\n\n  return error + stack.map(function(frame) {\n    return '\\n    at ' + wrapCallSite(frame);\n  }).join('');\n}\n\n// Generate position and snippet of original source with pointer\nfunction getErrorSource(error) {\n  var match = /\\n    at [^(]+ \\((.*):(\\d+):(\\d+)\\)/.exec(error.stack);\n  if (match) {\n    var source = match[1];\n    var line = +match[2];\n    var column = +match[3];\n\n    // Support the inline sourceContents inside the source map\n    var contents = fileContentsCache[source];\n\n    // Support files on disk\n    if (!contents && fs && fs.existsSync(source)) {\n      contents = fs.readFileSync(source, 'utf8');\n    }\n\n    // Format the line from the original source code like node does\n    if (contents) {\n      var code = contents.split(/(?:\\r\\n|\\r|\\n)/)[line - 1];\n      if (code) {\n        return source + ':' + line + '\\n' + code + '\\n' +\n          new Array(column).join(' ') + '^';\n      }\n    }\n  }\n  return null;\n}\n\nfunction printErrorAndExit (error) {\n  var source = getErrorSource(error);\n\n  if (source) {\n    console.error();\n    console.error(source);\n  }\n\n  console.error(error.stack);\n  process.exit(1);\n}\n\nfunction shimEmitUncaughtException () {\n  var origEmit = process.emit;\n\n  process.emit = function (type) {\n    if (type === 'uncaughtException') {\n      var hasStack = (arguments[1] && arguments[1].stack);\n      var hasListeners = (this.listeners(type).length > 0);\n\n      if (hasStack && !hasListeners) {\n        return printErrorAndExit(arguments[1]);\n      }\n    }\n\n    return origEmit.apply(this, arguments);\n  };\n}\n\nexports.wrapCallSite = wrapCallSite;\nexports.getErrorSource = getErrorSource;\nexports.mapSourcePosition = mapSourcePosition;\nexports.retrieveSourceMap = retrieveSourceMap;\n\nexports.install = function(options) {\n  options = options || {};\n\n  if (options.environment) {\n    environment = options.environment;\n    if ([\"node\", \"browser\", \"auto\"].indexOf(environment) === -1) {\n      throw new Error(\"environment \" + environment + \" was unknown. Available options are {auto, browser, node}\")\n    }\n  }\n\n  // Allow sources to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveFile) {\n    if (options.overrideRetrieveFile) {\n      retrieveFileHandlers.length = 0;\n    }\n\n    retrieveFileHandlers.unshift(options.retrieveFile);\n  }\n\n  // Allow source maps to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveSourceMap) {\n    if (options.overrideRetrieveSourceMap) {\n      retrieveMapHandlers.length = 0;\n    }\n\n    retrieveMapHandlers.unshift(options.retrieveSourceMap);\n  }\n\n  // Support runtime transpilers that include inline source maps\n  if (options.hookRequire && !isInBrowser()) {\n    var Module;\n    try {\n      Module = require('module');\n    } catch (err) {\n      // NOP: Loading in catch block to convert webpack error to warning.\n    }\n    var $compile = Module.prototype._compile;\n\n    if (!$compile.__sourceMapSupport) {\n      Module.prototype._compile = function(content, filename) {\n        fileContentsCache[filename] = content;\n        sourceMapCache[filename] = undefined;\n        return $compile.call(this, content, filename);\n      };\n\n      Module.prototype._compile.__sourceMapSupport = true;\n    }\n  }\n\n  // Configure options\n  if (!emptyCacheBetweenOperations) {\n    emptyCacheBetweenOperations = 'emptyCacheBetweenOperations' in options ?\n      options.emptyCacheBetweenOperations : false;\n  }\n\n  // Install the error reformatter\n  if (!errorFormatterInstalled) {\n    errorFormatterInstalled = true;\n    Error.prepareStackTrace = prepareStackTrace;\n  }\n\n  if (!uncaughtShimInstalled) {\n    var installHandler = 'handleUncaughtExceptions' in options ?\n      options.handleUncaughtExceptions : true;\n\n    // Provide the option to not install the uncaught exception handler. This is\n    // to support other uncaught exception handlers (in test frameworks, for\n    // example). If this handler is not installed and there are no other uncaught\n    // exception handlers, uncaught exceptions will be caught by node's built-in\n    // exception handler and the process will still be terminated. However, the\n    // generated JavaScript code will be shown above the stack trace instead of\n    // the original source code.\n    if (installHandler && hasGlobalProcessEventEmitter()) {\n      uncaughtShimInstalled = true;\n      shimEmitUncaughtException();\n    }\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/source-map-support/source-map-support.js\n// module id = 12\n// module chunks = 0 1","module.exports = require(\"error-subclass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"error-subclass\"\n// module id = 13\n// module chunks = 0 1","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 14\n// module chunks = 0 1","module.exports = require(\"good\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"good\"\n// module id = 15\n// module chunks = 0 1","module.exports = require(\"hapi\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"hapi\"\n// module id = 16\n// module chunks = 0 1","module.exports = require(\"hapi-boom-decorators\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"hapi-boom-decorators\"\n// module id = 17\n// module chunks = 0 1","module.exports = require(\"module\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module\"\n// module id = 18\n// module chunks = 0 1","module.exports = require(\"node-rfc\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-rfc\"\n// module id = 19\n// module chunks = 0 1","module.exports = require(\"object-hash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"object-hash\"\n// module id = 20\n// module chunks = 0 1","module.exports = require(\"pool2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pool2\"\n// module id = 21\n// module chunks = 0 1","module.exports = require(\"source-map\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map\"\n// module id = 22\n// module chunks = 0 1","module.exports = {\"name\":\"r3connect\",\"version\":\"1.1.0\",\"author\":\"Julian Hundeloh\",\"email\":\"julian@hundeloh-consulting.ch\",\"license\":\"AGPL-3.0+\",\"description\":\"r3connect is a lean wrapper of node-rfc that provides comfortable access to SAP back-ends via a simple REST API.\",\"engines\":{\"node\":\">=6.0.0\"},\"main\":\"./build/index.js\",\"bin\":{\"r3connect\":\"./cli.js\"},\"scripts\":{\"cli\":\"better-npm-run cli\",\"build\":\"better-npm-run build\",\"dev\":\"better-npm-run dev\",\"test\":\"better-npm-run test\",\"format\":\"better-npm-run format\",\"lint\":\"better-npm-run lint\",\"precommit\":\"npm run test && npm run format && npm run lint && npm run build && git add build\",\"commitmsg\":\"validate-commit-msg\",\"postmerge\":\"npm install\",\"postrewrite\":\"npm install\"},\"betterScripts\":{\"cli\":{\"command\":\"node ./build/cli.js\"},\"build\":{\"command\":\"rimraf ./build && webpack --progress --colors\",\"env\":{\"NODE_ENV\":\"production\"}},\"dev\":{\"command\":\"babel-watch ./src/cli.js --inspect --source-maps\",\"env\":{\"NODE_ENV\":\"development\"}},\"test\":{\"command\":\"mocha --compilers js:babel-register --require babel-polyfill ./src/**/*.spec.js\",\"env\":{\"NODE_ENV\":\"development\"}},\"format\":{\"command\":\"prettier src/**/*.js --single-quote --trailing-comma all --no-semi --write\",\"env\":{\"NODE_ENV\":\"production\"}},\"lint\":{\"command\":\"eslint src/**/*.js --fix\",\"env\":{\"NODE_ENV\":\"production\"}}},\"lint-staged\":{\"*.js\":[\"prettier\",\"git add\"]},\"config\":{\"validate-commit-msg\":{\"types\":[\"feat\",\"fix\",\"docs\",\"style\",\"refactor\",\"perf\",\"test\",\"chore\",\"revert\"],\"helpMessage\":\"Types: feat, fix, docs, style, refactor, perf, test, chore, revert\"}},\"dependencies\":{\"better-npm-run\":\"0.0.15\",\"chalk\":\"^2.0.1\",\"colors.js\":\"^1.2.4\",\"error-subclass\":\"^2.2.0\",\"fs-extra\":\"^4.0.0\",\"good\":\"^7.2.0\",\"good-console\":\"^6.2.0\",\"good-file\":\"^6.0.1\",\"good-squeeze\":\"^5.0.1\",\"hapi\":\"^16.4.3\",\"hapi-boom-decorators\":\"^3.0.0\",\"joi\":\"^10.5.2\",\"object-hash\":\"^1.1.8\",\"pool2\":\"^1.4.1\",\"source-map-support\":\"^0.4.15\",\"update-notifier\":\"^2.2.0\"},\"peerDependencies\":{\"node-rfc\":\"^0.1.11\"},\"devDependencies\":{\"babel-core\":\"^6.25.0\",\"babel-eslint\":\"^7.2.3\",\"babel-loader\":\"^7.0.0\",\"babel-plugin-syntax-flow\":\"^6.18.0\",\"babel-plugin-transform-class-properties\":\"^6.24.1\",\"babel-plugin-transform-flow-strip-types\":\"^6.18.0\",\"babel-plugin-typecheck\":\"^3.9.0\",\"babel-polyfill\":\"^6.23.0\",\"babel-preset-env\":\"^1.6.0\",\"babel-watch\":\"^2.0.7\",\"chai\":\"^4.0.2\",\"eslint\":\"^4.3.0\",\"eslint-config-airbnb-base\":\"^11.3.1\",\"eslint-config-prettier\":\"^2.3.0\",\"eslint-plugin-flowtype\":\"^2.35.0\",\"eslint-plugin-import\":\"^2.7.0\",\"eslint-plugin-prettier\":\"^2.1.2\",\"husky\":\"^0.13.4\",\"json-loader\":\"^0.5.4\",\"lint-staged\":\"^3.6.1\",\"mocha\":\"^3.4.2\",\"prettier\":\"^1.5.3\",\"rimraf\":\"^2.5.4\",\"validate-commit-msg\":\"^2.12.2\",\"webpack\":\"^2.6.1\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 23\n// module chunks = 0","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"update-notifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"update-notifier\"\n// module id = 28\n// module chunks = 0","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport os from 'os'\nimport path from 'path'\nimport childProcess from 'child_process'\nimport chalk from 'chalk'\nimport fs from 'fs-extra'\nimport updateNotifier from 'update-notifier'\nimport pkg from './../package'\nimport { Client, Configuration, Server } from './index'\n\nexport default (requirex: Function) => {\n  // Set color theme\n  const logger: Object = {\n    // eslint-disable-next-line no-console\n    log: console.log,\n    success: text => logger.log(chalk.bold.green(text)),\n    info: text => logger.log(chalk.blue(text)),\n    error: text => logger.log(chalk.bold.red(text)),\n    warn: text => logger.log(chalk.yellow(text)),\n  }\n\n  // Helper function to load configuration from project folder\n  const pathToFallbackConfig: string = path.join(__dirname, '..', 'config.js')\n  const pathToConfig: string = path.join(process.cwd(), 'config.js')\n  let config: ?Object = null\n  function loadConfig(file) {\n    let loadedConfig = null\n    try {\n      loadedConfig = requirex(file)\n    } catch (error) {\n      loadedConfig = null\n    }\n    return loadedConfig\n  }\n\n  // Welcome\n  /* eslint-disable */\n  logger.log(`\n      ____                                  _   \n      |___ \\                                | |  \n  _ __ __) | ___ ___  _ __  _ __   ___  ___| |_ \n  | '__|__ < / __/ _ \\| '_ \\| '_ \\ / _ \\/ __| __|\n  | |  ___) | (_| (_) | | | | | | |  __/ (__| |_ \n  |_| |____/ \\___\\___/|_| |_|_| |_|\\___|\\___|\\__|\n  `)\n  /* eslint-enable */\n\n  // Check for updates\n  updateNotifier({ pkg }).notify()\n\n  // Get package\n  let project: ?Object = null\n  try {\n    project = JSON.parse(\n      fs.readFileSync(path.join(process.cwd(), 'package.json')),\n    )\n  } catch (error) {\n    logger.error(\n      'Please initiate this project as an npm package first by running \"npm init\".',\n    )\n    process.exit(0)\n  }\n\n  // Handle different commands\n  const command: ?string = process.argv[2]\n  switch (command) {\n    case 'welcome': {\n      logger.success('r3connect was successfully installed. Congratulations!')\n\n      break\n    }\n\n    case 'init': {\n      // Ensure that we do not override an existing configuration\n      let configAlreadyExists: ?boolean = null\n      try {\n        fs.statSync(pathToConfig)\n        configAlreadyExists = true\n      } catch (error) {\n        configAlreadyExists = false\n      }\n\n      if (configAlreadyExists) {\n        logger.error(\n          `It seems that there is already a configuration present (\"${pathToConfig}\"). Delete it before you try to initialize the project.`,\n        )\n        process.exit(0)\n      } else {\n        // Copy skeleton to project folder\n        Promise.all([\n          fs.copy(\n            path.join(__dirname, '..', 'vendor'),\n            path.join(process.cwd(), 'vendor'),\n          ),\n          fs.copy(\n            path.join(__dirname, '..', 'tls'),\n            path.join(process.cwd(), 'tls'),\n          ),\n          fs.copy(\n            path.join(__dirname, '..', 'Dockerfile'),\n            path.join(process.cwd(), 'Dockerfile'),\n          ),\n          fs.copy(\n            path.join(__dirname, '..', 'config.js'),\n            path.join(process.cwd(), 'config.js'),\n          ),\n        ])\n          .then(() => {\n            logger.success(\n              'We initialized your project folder and you can start changing the configuration. Once you think you are ready, run \"r3connect server\" or \"r3connect docker\".',\n            )\n          })\n          .catch(() => {\n            logger.error(\n              'We tried to initialize your project folder but for some reason it failed. Please check the permissions of the folder.',\n            )\n          })\n      }\n\n      break\n    }\n\n    case 'server':\n    case 'docker': {\n      // Configuration must be loaded both for Server and for Docker\n      try {\n        fs.statSync(pathToConfig)\n      } catch (error) {\n        logger.error(\n          'We could not find a \"config.js\" file. Please ensure that you run \"r3connect init\" before you go on.',\n        )\n        process.exit(0)\n      }\n      config = new Configuration(\n        loadConfig(pathToConfig),\n        loadConfig(pathToFallbackConfig),\n      )\n\n      // Now differentiate between Server and Docker\n      switch (command) {\n        case 'server': {\n          // Check if node-rfc is installed and assign to client for later usage\n          try {\n            const NodeRFC: Object = requirex(\n              path.join(process.cwd(), 'node_modules', 'node-rfc'),\n            )\n            Object.defineProperty(Client, 'NodeRFC', {\n              get: (): Object => NodeRFC.Client,\n            })\n          } catch (error) {\n            const target: string = path.join(\n              process.cwd(),\n              'vendor',\n              'nwrfcsdk',\n            )\n            const targetLib: string = path.join(target, 'lib')\n\n            logger.error('For some reason \"node-rfc\" could not be loaded.')\n            logger.info(\n              'Please make sure that you download the SAP NW RFC Library from the SAP Service Marketplace and follow these steps:',\n            )\n            logger.log(`1. Unpack the downloaded archive to \"${target}\".`)\n            logger.log(`2. Make sure that the directory \"${targetLib}\" exists.`)\n            switch (os.platform()) {\n              case 'win32': {\n                logger.log(\n                  `3. Add \"${targetLib}\" to the PATH environment variable via the following command:`,\n                )\n                logger.log(`   SET PATH=%PATH%;${targetLib};`)\n                logger.log(\n                  '4. Run \"npm install node-rfc --save\" in the current project folder.',\n                )\n\n                break\n              }\n\n              case 'darwin':\n              case 'linux': {\n                logger.log(\n                  '3. As root, create a file \"/etc/ld.so.conf.d/nwrfcsdk.conf\" and add the following content:',\n                )\n                logger.log('   # include nwrfcsdk')\n                logger.log(`   ${targetLib}`)\n                logger.log('4. As root, run the command \"ldconfig\".')\n                logger.log(\n                  '5. Run \"npm install node-rfc --save\" in the current project folder.',\n                )\n\n                break\n              }\n\n              default: {\n                // Should not be reached\n              }\n            }\n\n            process.exit(0)\n          }\n\n          // Start server with configuration\n          const server: Object = new Server(config)\n          server.start()\n\n          // Update configuration in server if the file changes\n          fs.watch(pathToConfig, () => config.set(loadConfig(pathToConfig)))\n\n          break\n        }\n\n        case 'docker': {\n          const port = config.get('server.port')\n\n          // Build docker container\n          const spawn = childProcess.spawn\n          const docker = spawn('docker', [\n            'build',\n            `--build-arg R3CONNECT_PORT=${port}`,\n            '-t',\n            project.name,\n            '.',\n          ])\n\n          // Once it is ready\n          docker.on('close', (code: number) => {\n            if (code === 0) {\n              logger.success(\n                `The Docker container was successfully built. Start the container by running \"docker run -it -p ${port}:${port} ${project.name}\".`,\n              )\n            }\n          })\n\n          // Or it failed?\n          docker.on('error', () => {\n            logger.error(\n              'There was an issue while building the Docker container. Please install Docker first and check the Docker logs in order to solve the issue.',\n            )\n          })\n\n          break\n        }\n\n        default: {\n          // Should not be reached\n        }\n      }\n\n      break\n    }\n\n    default: {\n      logger.info('Please use any of the following commands:')\n      logger.log('r3connect init')\n      logger.log('r3connect server')\n      logger.log('r3connect docker')\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cli.js"],"sourceRoot":""}