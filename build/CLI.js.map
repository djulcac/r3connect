{"version":3,"sources":["webpack:///webpack/bootstrap a20f386f681464f5cdcf","webpack:///./src/utils.js","webpack:///./src/lib/Exceptions.js","webpack:///./src/lib/Pool.js","webpack:///./src/lib/Client.js","webpack:///external \"joi\"","webpack:///external \"path\"","webpack:///./src/index.js","webpack:///./src/lib/Configuration.js","webpack:///./src/lib/Server.js","webpack:///./src/routes/index.js","webpack:///./src/routes/rfc.js","webpack:///./~/source-map-support/register.js","webpack:///./~/source-map-support/source-map-support.js","webpack:///external \"error-subclass\"","webpack:///external \"fs\"","webpack:///external \"good\"","webpack:///external \"hapi\"","webpack:///external \"hapi-boom-decorators\"","webpack:///external \"module\"","webpack:///external \"node-rfc\"","webpack:///external \"object-hash\"","webpack:///external \"pool2\"","webpack:///external \"source-map\"","webpack:///./package.json","webpack:///external \"chalk\"","webpack:///external \"child_process\"","webpack:///external \"fs-extra\"","webpack:///external \"os\"","webpack:///external \"update-notifier\"","webpack:///./src/cli.js"],"names":["promisify","pad","makeLoggable","isFunction","findByPath","removeUndefinedValues","isListed","func","boundObject","args","Promise","resolve","reject","rejectError","resolveValues","checkReturn","handled","setTimeout","callback","error","values","push","bind","input","length","character","Array","join","toString","slice","object","log","tag","data","details","logger","scope","name","constructor","tags","isArray","concat","Object","assign","prototype","call","apply","path","parts","trim","split","value","shift","copy","keys","forEach","key","undefined","list","searchValue","some","match","RegExp","HttpException","message","statusCode","code","context","RFCException","client","parseInt","parsedMessage","parseMessage","prefix","ERROR","result","map","line","substring","LogonException","TimeoutException","configuration","hash","generateHash","pool","pools","end","applicationServer","lastError","acquire","boundRelease","release","Client","connect","then","startsWith","destroy","remove","Pool","options","bailTimeout","dispose","close","ping","originalAcquire","on","connection","create","acquireTimeout","disposeTimeout","pingTimeout","idleTimeout","requestTimeout","Infinity","max","min","testOnBorrow","evictionRunIntervalMillis","maxRequests","backoff","jitter","bailAfter","require","nodeRFC","connectTime","numberOfInvokes","functionModule","parameters","invoke","startTime","Date","invokePromise","parse","timeoutPromise","invokeTimeout","race","all","invokeTime","NodeRFC","ashost","sysnr","instanceNumber","saprouter","router","user","username","passwd","password","MYSAPSSO2","mysapsso2","trace","connectPromise","connectTimeout","r3connect","Configuration","Server","module","exports","config","fallbackConfig","set","content","validate","fallbackValue","schema","server","host","string","port","number","routes","cors","boolean","tls","binary","cert","logs","array","items","connections","pattern","token","allow","integer","functionModules","whitelist","blacklist","createServer","debug","request","filter","Boolean","get","route","register","ops","interval","reporters","console","file","decorate","replyWithError","boom","ext","reply","response","isBoom","output","payload","start","info","uri","method","description","notes","params","regex","optional","example","required","JSON","stringify","iv_input","handler","whitelisted","blacklisted","state","meta","requirex","success","bold","green","text","blue","red","warn","yellow","pathToFallbackConfig","__dirname","pathToConfig","process","cwd","loadConfig","loadedConfig","readFileSync","eval","pkg","notify","project","exit","command","argv","configAlreadyExists","statSync","defineProperty","target","targetLib","platform","watch","spawn","docker"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;QC9CgBA,S,GAAAA,S;QAmDAC,G,GAAAA,G;QAQAC,Y,GAAAA,Y;QA8BAC,U,GAAAA,U;QAIAC,U,GAAAA,U;QASAC,qB,GAAAA,qB;QAWAC,Q,GAAAA,Q;AAnIhB;;;;;;;;;;;;;;;;;;AAkBO,SAASN,SAAT,CAAmBO,IAAnB,EAAmCC,WAAnC,EAAmE;AACxE,SAAO;AAAA,sCAAIC,IAAJ;AAAIA,UAAJ;AAAA;;AAAA,WACL,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAoBC,MAApB,EAAyC;AACnD;AACA,UAAIC,cAAoB,IAAxB;AACA,UAAIC,gBAAwB,IAA5B;AACA,UAAMC,cAAwB,SAAxBA,WAAwB,GAAM;AAClC;AACA,YAAIC,UAAmB,KAAvB;AACA,YAAIH,WAAJ,EAAiB;AACfD,iBAAOC,WAAP;AACAG,oBAAU,IAAV;AACD,SAHD,MAGO,IAAIF,aAAJ,EAAmB;AACxBH,kBAAQG,aAAR;AACAE,oBAAU,IAAV;AACD;;AAED;AACA,YAAI,CAACA,OAAL,EAAc;AACZC,qBAAWF,WAAX,EAAwB,EAAxB;AACD;AACF,OAfD;AAgBAE,iBAAWF,WAAX,EAAwB,EAAxB;;AAEA;AACA,UAAMG,WAAqB,SAArBA,QAAqB,CAACC,KAAD,EAA4B;AAAA,2CAAXC,MAAW;AAAXA,gBAAW;AAAA;;AACrD,YAAID,KAAJ,EAAW;AACTN,wBAAcM,KAAd;AACA;AACD,SAHD,MAGO;AACLL,0BAAgBM,MAAhB;AACA;AACD;AACF,OARD;AASAX,WAAKY,IAAL,CAAUH,QAAV;;AAEA;AACAD,iBAAW,YAAM;AACf,YAAI;AACF,cAAIT,WAAJ,EAAiB;AACfD,iBAAKe,IAAL,CAAUd,WAAV,mBAA0BC,IAA1B;AACD,WAFD,MAEO;AACLF,kCAAQE,IAAR;AACD;AACF,SAND,CAME,OAAOU,KAAP,EAAc;AACdN,wBAAcM,KAAd;AACD;AACF,OAVD,EAUG,CAVH;AAWD,KA9CD,CADK;AAAA,GAAP;AAgDD;;AAEM,SAASlB,GAAT,CACLsB,KADK,EAELC,MAFK,EAIG;AAAA,MADRC,SACQ,uEADY,GACZ;;AACR,SAAO,CAACC,MAAMF,MAAN,EAAcG,IAAd,CAAmBF,SAAnB,IAAgCF,MAAMK,QAAN,EAAjC,EAAmDC,KAAnD,CAAyD,CAAC,CAAD,GAAKL,MAA9D,CAAP;AACD;;AAEM,SAAStB,YAAT,CAAsB4B,MAAtB,EAA8C;AACnD,MAAMC;AAAgB,aAASA,GAAT,CACpBC,GADoB,EAEpBC,IAFoB,EAGpBC,OAHoB,EAIpB;AACA,UAAI,KAAKC,MAAT,EAAiB;AACf,YAAMC,QAAgB,KAAKC,IAAL,IAAa,KAAKC,WAAL,CAAiBD,IAApD;AACA,YAAME,OAAcb,MAAMc,OAAN,CAAcR,GAAd,IAChB,CAACI,KAAD,EAAQK,MAAR,CAAeT,GAAf,CADgB,GAEhB,CAACI,KAAD,EAAQJ,GAAR,CAFJ;AAGA,aAAKG,MAAL,CAAYI,IAAZ,EAAkBN,IAAlB;;AAEA,YAAIC,OAAJ,EAAa;AACX,eAAKC,MAAL,CAAYI,IAAZ,EAAkBL,OAAlB;AACD;AACF;AACF;;AAhBK,WAAyBH,GAAzB;AAAA,KAAN;;AAkBA;AACAW,SAAOC,MAAP,CAAcb,MAAd,EAAsB;AACpBC;AADoB,GAAtB;AAGAW,SAAOC,MAAP,CAAcb,OAAOc,SAArB,EAAgC;AAC9Bb;AAD8B,GAAhC;;AAIA,SAAOD,MAAP;AACD;;AAEM,SAAS3B,UAAT,CAAoB2B,MAApB,EAA0C;AAC/C,SAAO,CAAC,EAAEA,UAAUA,OAAOQ,WAAjB,IAAgCR,OAAOe,IAAvC,IAA+Cf,OAAOgB,KAAxD,CAAR;AACD;;AAEM,SAAS1C,UAAT,CAAoB0B,MAApB,EAAoCiB,IAApC,EAAuD;AAC5D,MAAMC,QAAuBD,KAAKE,IAAL,OAAgB,EAAhB,GAAqB,EAArB,GAA0BF,KAAKG,KAAL,CAAW,GAAX,CAAvD;AACA,MAAIC,QAAcrB,MAAlB;AACA,SAAOqB,SAASH,MAAMxB,MAAN,GAAe,CAA/B,EAAkC;AAChC2B,YAAQA,MAAMH,MAAMI,KAAN,EAAN,CAAR;AACD;AACD,SAAOD,KAAP;AACD;;AAEM,SAAS9C,qBAAT,CAA+ByB,MAA/B,EAAuD;AAC5D,MAAMuB,OAAeX,OAAOC,MAAP,CAAc,EAAd,EAAkBb,MAAlB,CAArB;AACAY,SAAOY,IAAP,CAAYD,IAAZ,EAAkBE,OAAlB,CAA0B,UAACC,GAAD,EAAc;AACtC,QAAIH,KAAKG,GAAL,MAAcC,SAAlB,EAA6B;AAC3B,aAAOJ,KAAKG,GAAL,CAAP;AACD;AACF,GAJD;;AAMA,SAAOH,IAAP;AACD;;AAEM,SAAS/C,QAAT,CAAkBoD,IAAlB,EAA+BC,WAA/B,EAA6D;AAClE,SAAOD,KAAKE,IAAL,CACL,UAACT,KAAD;AAAA,WACE,CAAC,CAACQ,YAAYE,KAAZ,CAAkB,IAAIC,MAAJ,cAAeX,MAAMD,KAAN,CAAY,GAAZ,EAAiBvB,IAAjB,CAAsB,MAAtB,CAAf,QAAlB,CADJ;AAAA,GADK,CAAP;AAID,C;;;;;;;;;;;;;ACtHD;;;;;;;;;;+eAlBA;;;;;;;;;;;;;;;;;;IAoBaoC,a,WAAAA,a;;;AAGX,yBACEC,OADF,EAKE;AAAA,QAHAC,UAGA,uEAHsB,GAGtB;AAAA,QAFAC,IAEA;AAAA,QADAC,OACA;;AAAA;;AAAA,8HACMH,OADN;;AAAA,UAPFG,OAOE,GAPiB,IAOjB;;AAEA,UAAKF,UAAL,GAAkBA,UAAlB;AACA,UAAKC,IAAL,GAAYA,IAAZ;AACA,UAAKC,OAAL,GAAeA,OAAf;AAJA;AAKD;;;;;IAGUC,Y,WAAAA,Y;;;AAGX,wBACEJ,OADF,EAEEC,UAFF,EAGEC,IAHF,EAIEC,OAJF,EAKEE,MALF,EAME;AAAA;;AAAA,6HACML,OADN,EACeC,UADf,EAC2BC,IAD3B,EACiCC,OADjC;;AAAA,WARFE,MAQE,GARgB,IAQhB;;AAEA,WAAKA,MAAL,GAAcA,MAAd;AAFA;AAGD;;;;;qBAEYlD,K,EAAcgD,O,EAAkBE,M,EAAyB;AACpE,YAAMb,MAAerC,MAAMqC,GAA3B;AACA,YAAIQ,UAAmB,IAAvB;;AAEA;AACA,YAAME,OAAeI,SAASnD,MAAM+C,IAAf,EAAqB,EAArB,CAArB;AACA,gBAAQA,IAAR;AACE,eAAK,CAAL;AAAQ;AACN,kBAAMK,gBAAwB,KAAKC,YAAL,CAAkBrD,MAAM6C,OAAxB,CAA9B;AACA,kBAAMS,SAAiBF,cAAc,YAAd,WAChBA,cAAc,YAAd,CADgB,WAEnB,EAFJ;AAGAP,6BAAaS,MAAb,UAAsBF,cAAcG,KAApC;AACA;AACD;;AAED;AAAS;AACPV,wBAAU7C,MAAM6C,OAAhB;AACD;AAZH;;AAeA;AACA,YAAIW,SAAiB,IAArB;AACA,YAAI,SAASP,YAAb,EAA2B;AACzBO,mBAAS,IAAI,IAAJ,CAASX,OAAT,EAAkB,GAAlB,EAAuBR,GAAvB,EAA4BW,OAA5B,EAAqCE,MAArC,CAAT;AACD,SAFD,MAEO;AACLM,mBAAS,IAAI,IAAJ,CAASX,OAAT,EAAkBG,OAAlB,EAA2BE,MAA3B,CAAT;AACD;AACD,eAAOM,MAAP;AACD;;;;;;;8BAEiD;AAAA,YAA9BX,OAA8B,uEAAZ,EAAY;;AAChD,YAAMW,SAAiB,EAAvB;AACAX,gBACGd,KADH,CACS,IADT,EAEG0B,GAFH,CAEO,UAACC,IAAD;AAAA,iBAA0BA,KAAK5B,IAAL,EAA1B;AAAA,SAFP,EAGGM,OAHH,CAGW,UAACsB,IAAD,EAAkB;AACzB,cAAMrB,MAAcqB,KAAKC,SAAL,CAAe,CAAf,EAAkB,EAAlB,EAAsB7B,IAAtB,EAApB;AACA,cAAME,QAAgB0B,KAAKC,SAAL,CAAe,EAAf,EAAmB7B,IAAnB,EAAtB;AACA,cAAIO,GAAJ,EAAS;AACPmB,mBAAOnB,GAAP,IAAcL,KAAd;AACD;AACF,SATH;AAUA,eAAOwB,MAAP;AACD;;;;;;;EA1D+BZ,a;;IA6DrBgB,c,WAAAA,c;;;AACX,0BAAYf,OAAZ,EAA6BG,OAA7B,EAA+C;AAAA;;AAAA,2HACvCH,OADuC,EAC9B,GAD8B,EACzB,mBADyB,EACJG,OADI;AAE9C;;;EAHiCC,Y;;IAMvBY,gB,WAAAA,gB;;;AAGX,4BAAYhB,OAAZ,EAA6BG,OAA7B,EAA+CE,MAA/C,EAAgE;AAAA;;AAAA,qIACxDL,OADwD,EAC/C,GAD+C,EAC1C,aAD0C,EAC3BG,OAD2B;;AAAA,WAFhEE,MAEgE,GAF9C,IAE8C;;AAE9D,WAAKA,MAAL,GAAcA,MAAd;AAF8D;AAG/D;;;EANmCN,a;;;;;;;;;;;;;;mBCvGtC;;;;;;;;;;;;;;;;;;AAkBA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;qBAEe;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,4BA8BSkB,aA9BT,EA8BwC;AACjD,eAAO,6BAAWA,aAAX,CAAP;AACD;;AAhCU;AAAA;;AAIX;;AAJW;AAAA;AAAA;AAAA,sBAkCGA,aAlCH,EAkC0B;AACnC,YAAMC,OAAe,KAAKC,YAAL,CAAkBF,aAAlB,CAArB;AACA,YAAMG,OAAgB,KAAKC,KAAL,CAAWH,IAAX,CAAtB;;AAEA,YAAIE,IAAJ,EAAU;AACRA,eAAKE,GAAL;AACA,eAAKD,KAAL,CAAWH,IAAX,IAAmBzB,SAAnB;AACA,eAAK1B,GAAL,CACE,OADF,uCAE8BmD,IAF9B,4BAEiDD,cAAcM,iBAF/D;AAID;AACF;;AA9CU;AAAA;AAAA;AAAA;AAAA;AAAA,sBAgDGN,aAhDH,EAgD0B9C,MAhD1B,EAgDqD;AAAA;;AAC9D,YAAIqD,YAAoB,IAAxB;AACA,YAAMJ,OAAe,sBACnB1C,OAAOC,MAAP,CACE;AACE8C;AAAS,6BAACvE,QAAD,EAAwB;AAC/B,oBAAKa,GAAL,CACE,OADF,8CAEqCkD,cAAcM,iBAFnD;;AAKA,kBAAI;AACF,oBAAMG,eAAyBN,KAAKO,OAAL,CAAarE,IAAb,CAAkB8D,IAAlB,CAA/B;AACA,sBAAKQ,MAAL,CACGC,OADH,CACWZ,aADX,EAC0BS,YAD1B,EACwCvD,MADxC,EAEG2D,IAFH,CAEQ,UAACzB,MAAD,EAAoB;AACxBnD,2BAAS,IAAT,EAAemD,MAAf;AACD,iBAJH,WAKS,UAAClD,KAAD,EAAkB;AACvB;AACA,sBAAIA,MAAMkD,MAAV,EAAkB;AAChB;AACA,wBAAIlD,MAAM+C,IAAN,IAAc/C,MAAM+C,IAAN,CAAW6B,UAAX,CAAsB,MAAtB,CAAlB,EAAiD;AAC/CX,2BAAKY,OAAL,CAAa7E,MAAMkD,MAAnB;AACD,qBAFD,MAEO;AACLe,2BAAKa,MAAL,CAAY9E,MAAMkD,MAAlB;AACD;AACF,mBAPD,MAOO;AACL;AACA;AACAmB,gCAAYrE,KAAZ;AACAF,+BACE;AAAA,6BAAMiF,KAAKD,MAAL,CAAYhB,aAAZ,CAAN;AAAA,qBADF,EAEE,MAAKkB,OAAL,CAAaC,WAFf;AAID;;AAEDlF,2BAASC,KAAT;AACD,iBAzBH;AA0BD,eA5BD,CA4BE,OAAOA,KAAP,EAAc;AACdD,yBAASC,KAAT;AACD;AACF;;AArCD;AAAA,aADF;;AAwCEkF;AAAS,6BAAChC,MAAD,EAAiBnD,QAAjB,EAAwC;AAC/C,oBAAKa,GAAL,CACE,OADF,wCAE+BkD,cAAcM,iBAF7C;AAIAlB,qBAAOiC,KAAP;AACApF;AACD;;AAPD;AAAA,aAxCF;;AAiDE8E;AAAS,6BAAC3B,MAAD,EAAiBnD,QAAjB,EAAwC;AAC/C,oBAAKa,GAAL,CACE,OADF,yCAEgCkD,cAAcM,iBAF9C;AAIArE;AACD;;AAND;AAAA,aAjDF;;AAyDEqF;AAAM,0BAAClC,MAAD,EAAiBnD,QAAjB,EAAwC;AAC5C;AACAD,yBAAW,YAAM;AACf,oBAAIoD,OAAOkC,IAAP,EAAJ,EAAmB;AACjBrF;AACD,iBAFD,MAEO;AACLA,2BACE,sDACc+D,cAAcM,iBAD5B,gBADF;AAKD;AACF,eAVD,EAUG,CAVH;AAWD;;AAbD;AAAA;AAzDF,SADF,EAyEE,KAAKY,OAzEP,CADmB,CAArB;;AA8EA;AACA;AACA,YAAMK,kBAA4BpB,KAAKK,OAAL,CAAanE,IAAb,CAAkB8D,IAAlB,CAAlC;AACAA,aAAKK,OAAL;AAAe,mBAASA,OAAT,GAA4B;AACzC,mBAAO,sBAAUe,eAAV,EAA2BpB,IAA3B,IACJU,IADI,CACC;AAAA;AAAA,kBAAEzB,MAAF;;AAAA,qBAA8BA,MAA9B;AAAA,aADD,WAEE,UAAClD,KAAD,EAAkB;AACvB,oBAAMqE,aAAarE,KAAnB;AACD,aAJI,CAAP;AAKD;;AAND,iBAAwBsE,OAAxB;AAAA;;AAQA;AACAL,aAAKqB,EAAL,CAAQ,OAAR,EAAiB,UAACtF,KAAD,EAAkB;AACjC,cAAI,CAACA,MAAM+C,IAAX,EAAiB;AACf,kBAAKnC,GAAL,CACE,OADF,wCAE+BkD,cAAcM,iBAF7C,UAGEpE,KAHF;AAKD;AACF,SARD;;AAUA,eAAOiE,IAAP;AACD;;AAvJU;AAAA;AAAA;AAAA;AAAA;AAAA,mBAyJAH,aAzJA,EAyJuB9C,MAzJvB,EAyJkD;AAC3D,YAAM+C,OAAe,KAAKC,YAAL,CAAkBF,aAAlB,CAArB;AACA,YAAIyB,aAAsB,IAA1B;;AAEA;AACA,YAAI,KAAKrB,KAAL,CAAWH,IAAX,CAAJ,EAAsB;AACpBwB,uBAAa,KAAKrB,KAAL,CAAWH,IAAX,CAAb;AACA,eAAKnD,GAAL,CACE,OADF,qCAE4BmD,IAF5B,2BAE8CD,cAAcM,iBAF5D;AAID,SAND,MAMO;AACLmB,uBAAa,KAAKC,MAAL,CAAY1B,aAAZ,EAA2B9C,MAA3B,CAAb;AACA,eAAKkD,KAAL,CAAWH,IAAX,IAAmBwB,UAAnB;AACA,eAAK3E,GAAL,CACE,OADF,qCAE4BmD,IAF5B,4BAE+CD,cAAcM,iBAF7D;AAID;;AAED,eAAOmB,UAAP;AACD;;AA9KU;AAAA;AAAA;;AAAA;AAAA,YAEJvE,MAFI,GAEgB,IAFhB,SAKJkD,KALI,GAKY,EALZ,SAOJc,OAPI,GAOc;AACvBS,kBAAgB,KAAK,EAAL,GAAU,EAAV,GAAe,IADR;AAEvBC,kBAAgB,KAAK,IAFE;AAGvBC,eAAa,IAAI,IAHM;AAIvBC,eAAa,MAAM,IAJI;AAKvBC,kBAAgBC,QALO;;AAOvBC,OAAK,CAPkB;AAQvBC,OAAK,CARkB;AASvBC,gBAAc,IATS;AAUvBC,6BAA2B,IAAI,EAAJ,GAAS,IAVb;AAWvBC,eAAaL,QAXU;AAYvBM,WAAS;AACPJ,SAAK,IAAI,IADF;AAEPD,SAAK,KAAK,IAFH;AAGPM,YAAQ;AAHD,GAZc;AAiBvBC,aAAW,CAjBY;AAkBvBrB,eAAa,KAAK;AAlBK,CAPd,SA4BJR,MA5BI,+B;;;;;;;;;;;;;;mBCxBf;;;;;;;;;;;;;;;;;;AAkBA;;AACA;;;;qBAEe;AAAA;AAAA;;;AAcX;AAdW;AAAA,qBAekB;AAC3B;AACA,eAAO,mBAAA8B,CAAQ,EAAR,EAAoB9B,MAA3B;AACD;;AAlBU;AAAA;AAAA;;AAoBX,kBAAY+B,OAAZ,EAA6BhC,OAA7B,EAAgD;AAAA;;AAAA,SAlBhDgC,OAkBgD,GAlB7B,IAkB6B;AAAA,SAjBhDhC,OAiBgD,GAjB3B,IAiB2B;AAAA,SAhBhDxD,MAgBgD,GAhB5B,IAgB4B;AAAA,SAfhDyF,WAegD,GAfzB,IAeyB;AAAA,SAdhDC,eAcgD,GAdtB,CAcsB;;AAC9C,SAAKF,OAAL,GAAeA,OAAf;AACA,SAAKhC,OAAL,GAAeA,OAAf;AACD;;AAvBU;AAAA;AAAA;AAAA,uBAiFM;AACf,eAAO,KAAKgC,OAAL,CAAarB,KAAb,CAAmBxD,KAAnB,CAAyB,KAAK6E,OAA9B,CAAP;AACD;;AAnFU;AAAA;AAAA;AAAA;AAAA;AAAA,sBAqFK;AACd,eAAO,KAAKA,OAAL,CAAapB,IAAb,CAAkBzD,KAAlB,CAAwB,KAAK6E,OAA7B,CAAP;AACD;;AAvFU;AAAA;AAAA;AAAA;AAAA;AAAA,sBAyFJG,cAzFI,EAyFoBC,UAzFpB,EAyFkD;AAAA;;AAC3D,YAAMC,SAAmB,KAAKL,OAAL,CAAaK,MAAtC;AACA,YAAMC,YAAkB,IAAIC,IAAJ,EAAxB;;AAEA;AACA,aAAKL,eAAL,GAAuB,KAAKA,eAAL,GAAuB,CAA9C;;AAEA;AACA,YAAMpH,OAAc,CAACqH,cAAD,EAAiBC,UAAjB,CAApB;AACA,YAAMI,gBAAyB,sBAAUH,MAAV,EAAkB,KAAKL,OAAvB,EAC5B7E,KAD4B,CACtB,KAAK6E,OADiB,EACRlH,IADQ,WAEtB,UAACU,KAAD,EAAkB;AACvB,gBAAM,yBAAaiH,KAAb,CAAmBjH,KAAnB,QAAN;AACD,SAJ4B,CAA/B;;AAMA;AACA,YAAMkH,iBAA0B,IAAI3H,OAAJ,CAC9B,UAACC,OAAD,EAAoBC,MAApB,EAAyC;AACvCK,qBAAW,YAAM;AACfL,mBACE,4FAC2D,MACtD0B,WADsD,CAC1C6D,OAD0C,CAClCmC,aADkC,GAClB,IAFzC,iBAGE;AACER;AADF,aAHF,QADF;AAUD,WAXD,EAWG,MAAKxF,WAAL,CAAiB6D,OAAjB,CAAyBmC,aAX5B;AAYD,SAd6B,CAAhC;;AAiBA;AACA,eAAO5H,QAAQ6H,IAAR,CAAa,CAACJ,aAAD,EAAgBE,cAAhB,CAAb,EACJvC,IADI,CACC,gBAA+B;AAAA;AAAA,cAA7BnB,MAA6B;;AACnC;AACA,gBAAKgB,OAAL;;AAEA;AACA,iBAAOjF,QAAQ8H,GAAR,CAAY,CACjB7D,MADiB,EAEjB;AACE8D,wBAAY,IAAIP,IAAJ,KAAaD,SAD3B;AAEEL,yBAAa,MAAKC,eAAL,KAAyB,CAAzB,GAA6B,MAAKD,WAAlC,GAAgD;AAF/D,WAFiB,CAAZ,CAAP;AAOD,SAbI,WAcE,UAACzG,KAAD,EAAkB;AACvB;AACA,gBAAKwE,OAAL;;AAEA;AACA,gBAAMxE,KAAN;AACD,SApBI,CAAP;AAqBD;;AAhJU;AAAA;AAAA;AAAA;AAAA;AAAA,uBA0BT8D,aA1BS,EA2BTU,OA3BS,EA4BTxD,MA5BS,EA6BA;AAAA;;AACT,YAAMwF,UAAkB,IAAI,KAAKe,OAAT,CACtB,kCAAsB;AACpBC,kBAAQ1D,cAAcM,iBADF;AAEpBqD,iBAAO,gBAAI3D,cAAc4D,cAAlB,EAAkC,CAAlC,EAAqC,GAArC,CAFa;AAGpBxE,kBAAQ,gBAAIY,cAAcZ,MAAlB,EAA0B,CAA1B,EAA6B,GAA7B,CAHY;AAIpByE,qBAAW7D,cAAc8D,MAJL;AAKpBC,gBAAM/D,cAAcgE,QALA;AAMpBC,kBAAQjE,cAAckE,QANF;AAOpBC,qBAAWnE,cAAcoE,SAPL;AAQpBC,iBAAO;AARa,SAAtB,CADsB,CAAxB;AAYA,YAAMzD,UAAoB8B,QAAQ9B,OAAlC;AACA,YAAMoC,YAAkB,IAAIC,IAAJ,EAAxB;;AAEA;AACA,YAAMqB,iBAA0B,sBAAU1D,OAAV,EAAmB8B,OAAnB,EAC7B7E,KAD6B,CACvB6E,OADuB,EAE7B7B,IAF6B,CAExB,YAAc;AAClB;AACA,cAAMzB,SAAiB,IAAIuB,MAAJ,CAAW+B,OAAX,EAAoBhC,OAApB,CAAvB;AACAtB,iBAAOlC,MAAP,GAAgBA,MAAhB;AACAkC,iBAAOuD,WAAP,GAAqB,IAAIM,IAAJ,KAAaD,SAAlC;AACA,iBAAO5D,MAAP;AACD,SAR6B,WASvB,UAAClD,KAAD,EAAkB;AACvB,gBAAM,2BAAeiH,KAAf,CACJjH,KADI,EAEJuB,OAAOC,MAAP,CAAc,EAAd,EAAkBsC,aAAlB,EAAiC,EAAEkE,UAAU,UAAZ,EAAjC,CAFI,CAAN;AAID,SAd6B,CAAhC;;AAgBA;AACA,YAAMd,iBAA0B,IAAI3H,OAAJ,CAC9B,UAACC,OAAD,EAAoBC,MAApB,EAAyC;AACvCK,qBAAW,YAAM;AACfL,mBACE,qFACoD,OAAKuF,OAAL,CAC/CqD,cAD+C,GAC9B,IAFtB,iBAGE9G,OAAOC,MAAP,CAAc,EAAd,EAAkBsC,aAAlB,EAAiC,EAAEkE,UAAU,UAAZ,EAAjC,CAHF,CADF;AAOD,WARD,EAQG,OAAKhD,OAAL,CAAaqD,cARhB;AASD,SAX6B,CAAhC;;AAcA;AACA,eAAO9I,QAAQ6H,IAAR,CAAa,CAACgB,cAAD,EAAiBlB,cAAjB,CAAb,CAAP;AACD;;AA/EU;AAAA;AAAA;;AAAA;AAAA,YASJlC,OATI,GASc;AACvBqD,kBAAgB,IAAI,IADG;AAEvBlB,iBAAe,KAAK,IAFG,EATd,S;;;;;;ACrBf,gC;;;;;;ACAA,iC;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMmB,YAAoB;AACxB7D,6BADwB;AAExB8D,2CAFwB;AAGxBxD,yBAHwB;AAIxByD;AAJwB,CAA1B;;qBAOeF,S;AACR,IAAM7D,6CAAN;AACA,IAAM8D,kEAAN;AACA,IAAMC,6CAAN;AACA,IAAMzD,uCAAN;AACP0D,OAAOC,OAAP,GAAiBJ,SAAjB,C;;;;;;;;;;;;ACjBA;;;;AACA;;;;;;qBAEe;AAKX,yBAAYK,MAAZ,EAAwCC,cAAxC,EAAgE;AAAA;;AAAA,SAHhED,MAGgE,GAH9C,IAG8C;AAAA,SAFhEC,cAEgE,GAFtC,IAEsC;;AAC9D,SAAKA,cAAL,GAAsBA,cAAtB;AACA,SAAKC,GAAL,CAASF,MAAT;AACD;;AARU;AAAA;AAAA;AAAA,mBAoDPG,OApDO,EAoDsB;AAC/B,YAAI,CAACA,OAAL,EAAc;AACZ,eAAKlI,GAAL,CACE,OADF,EAEE,6FAFF;AAIA,eAAK+H,MAAL,GAAc,KAAKC,cAAnB;AACD,SAND,MAMO;AACL,cAAID,SAAkB,IAAtB;;AAEA;AACA,cAAI,OAAOG,OAAP,KAAmB,UAAvB,EAAmC;AACjCH,qBAASG,QAAQ,KAAKF,cAAb,CAAT;AACD,WAFD,MAEO;AACLD,qBAASG,OAAT;AACD;;AAED;AACA,cAAI;AACFP,0BAAcQ,QAAd,CAAuBJ,MAAvB;AACA,iBAAK/H,GAAL,CAAS,OAAT,EAAkB,sCAAlB;AACA,iBAAK+H,MAAL,GAAcA,MAAd;AACD,WAJD,CAIE,OAAO3I,KAAP,EAAc;AACd,iBAAKY,GAAL,CACE,OADF,gJAEuIZ,MAAM6C,OAF7I;AAIA,iBAAK8F,MAAL,GAAc,KAAKA,MAAL,IAAe,KAAKC,cAAlC;AACD;AACF;AACF;;AAlFU;AAAA;AAAA;AAAA;AAAA;AAAA,mBAoFPhH,IApFO,EAoFY;AACrB,YAAII,QAAa,uBAAW,KAAK2G,MAAhB,EAAwB/G,IAAxB,CAAjB;;AAEA;AACA,YAAII,UAAUM,SAAd,EAAyB;AACvBN,kBAAQ,uBAAW,KAAK4G,cAAhB,EAAgChH,IAAhC,CAAR;AACD,SAFD,MAEO,IAAI,uBAAWI,KAAX,CAAJ,EAAuB;AAC5B;AACA,cAAMgH,gBAAqB,uBAAW,KAAKJ,cAAhB,EAAgChH,IAAhC,CAA3B;AACAI,kBAAQA,MAAMgH,aAAN,CAAR;AACD;;AAED,YAAIhH,UAAUM,SAAd,EAAyB;AACvB,eAAK1B,GAAL,CACE,OADF,oDAE2CgB,IAF3C;AAID;;AAED,eAAOI,KAAP;AACD;;AAxGU;AAAA;AAAA;AAAA;AAAA;AAAA,wBAUK2G,MAVL,EAU8B;AACvC,YAAMM,SAAS,iBAAItI,MAAJ,GAAawB,IAAb,CAAkB;AAC/B+G,kBAAQ,iBAAIvI,MAAJ,GAAawB,IAAb,CAAkB;AACxBgH,kBAAM,iBAAIC,MAAJ,EADkB;AAExBC,kBAAM,iBAAIC,MAAJ,GAAatD,GAAb,CAAiB,CAAjB,CAFkB;AAGxBuD,oBAAQ,iBAAI5I,MAAJ,GAAawB,IAAb,CAAkB;AACxBqH,oBAAM,iBAAIC,OAAJ;AADkB,aAAlB,CAHgB;AAMxBC,iBAAK,iBAAI/I,MAAJ,GAAawB,IAAb,CAAkB;AACrBE,mBAAK,iBAAIsH,MAAJ,EADgB;AAErBC,oBAAM,iBAAID,MAAJ;AAFe,aAAlB;AANmB,WAAlB,CADuB;AAY/BE,gBAAM,iBAAIlJ,MAAJ,GAAawB,IAAb,CAAkB;AACtBf,kBAAM,iBAAI0I,KAAJ,GAAYC,KAAZ,CAAkB,iBAAIX,MAAJ,EAAlB;AADgB,WAAlB,CAZyB;AAe/BY,uBAAa,iBAAIrJ,MAAJ,GAAasJ,OAAb,CACX,KADW,EAEX,iBAAItJ,MAAJ,GAAawB,IAAb,CAAkB;AAChB2F,sBAAU,iBAAIsB,MAAJ,GAAac,KAAb,GAAqBnE,GAArB,CAAyB,EAAzB,EAA6BoE,KAA7B,CAAmC,EAAnC,EAAuCA,KAAvC,CAA6C,IAA7C,CADM;AAEhBnC,sBAAU,iBAAIoB,MAAJ,GAAarD,GAAb,CAAiB,EAAjB,EAAqBoE,KAArB,CAA2B,EAA3B,EAA+BA,KAA/B,CAAqC,IAArC,CAFM;AAGhB/F,+BAAmB,iBAAIgF,MAAJ,GAAae,KAAb,CAAmB,EAAnB,EAAuBA,KAAvB,CAA6B,IAA7B,CAHH;AAIhBzC,4BAAgB,iBAAI4B,MAAJ,GAAac,OAAb,GAAuBpE,GAAvB,CAA2B,CAA3B,EAA8BD,GAA9B,CAAkC,EAAlC,CAJA;AAKhB7C,oBAAQ,iBAAIoG,MAAJ,GAAac,OAAb,GAAuBpE,GAAvB,CAA2B,CAA3B,EAA8BD,GAA9B,CAAkC,GAAlC,CALQ;AAMhB6B,oBAAQ,iBAAIwB,MAAJ,GAAae,KAAb,CAAmB,EAAnB,EAAuBA,KAAvB,CAA6B,IAA7B,CANQ;AAOhBE,6BAAiB,iBAAI1J,MAAJ,GAAawB,IAAb,CAAkB;AACjCmI,yBAAW,iBAAIR,KAAJ,GAAYC,KAAZ,CAAkB,iBAAIX,MAAJ,EAAlB,CADsB;AAEjCmB,yBAAW,iBAAIT,KAAJ,GAAYC,KAAZ,CAAkB,iBAAIX,MAAJ,EAAlB;AAFsB,aAAlB;AAPD,WAAlB,CAFW;AAfkB,SAAlB,CAAf;AA+BA,YAAM5F,SAAiB,iBAAIuF,QAAJ,CAAaJ,MAAb,EAAqBM,MAArB,CAAvB;;AAEA;AACA,YAAIzF,OAAOxD,KAAX,EAAkB;AAChB,gBAAMwD,OAAOxD,KAAb;AACD;;AAED,eAAO,IAAP;AACD;;AAlDU;AAAA;AAAA;;AAAA;AAAA,I;;;;;;;;;;qjBCHf;;;;;;;;;;;;;;;;;;AAkBA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;IAEqBwI,M;AAInB,kBAAYG,MAAZ,EAA6B;AAAA;;AAAA,SAH7BO,MAG6B,GAHX,IAGW;AAAA,SAF7BP,MAE6B,GAFX,IAEW;;AAC3B,SAAKA,MAAL,GAAcA,MAAd;AACA,SAAKO,MAAL,GAAc,KAAKsB,YAAL,EAAd;AACD;;;;;8BAEc;AACb;AACA,YAAMtB,SAAiB,IAAI,kBAAKV,MAAT,CAAgB;AACrCiC,iBAAO;AACLC,qBAAS,CACP,OADO,EAEP,SAAyC,OAAzC,GAAmD,IAF5C,EAGPC,MAHO,CAGAC,OAHA;AADJ;AAD8B,SAAhB,CAAvB;AAQA1B,eAAO3D,UAAP,CAAkB,KAAKoD,MAAL,CAAYkC,GAAZ,CAAgB,QAAhB,CAAlB;;AAEA;AACA,4BAAOzI,OAAP,CAAe,UAAC0I,KAAD;AAAA,iBAAmB5B,OAAO4B,KAAP,CAAaA,KAAb,CAAnB;AAAA,SAAf;;AAEA,eAAO5B,MAAP;AACD;;;;;;;uBAEgB;AAAA;;AACf;AACA,eAAO,sBAAU,KAAKA,MAAL,CAAY6B,QAAtB,EAAgC,KAAK7B,MAArC,EAA6C,CAClD;AACE6B,qCADF;AAEE/F,mBAAS;AACPgG,iBAAK;AACHC,wBAAU;AADP,aADE;AAIPC,uBAAW;AACTC,uBAAS,CACP;AACE1C,wBAAQ,cADV;AAEEvH,sBAAM,SAFR;AAGE5B,sBAAM,CACJ;AACEoL,2BAAS,KAAK/B,MAAL,CAAYkC,GAAZ,CAAgB,WAAhB,CADX;AAEEjK,uBAAK,KAAK+H,MAAL,CAAYkC,GAAZ,CAAgB,WAAhB,CAFP;AAGEG,uBAAK;AAHP,iBADI;AAHR,eADO,EAYP;AACEvC,wBAAQ;AADV,eAZO,EAeP,QAfO,CADA;AAkBT2C,oBAAM,CACJ;AACE3C,wBAAQ,cADV;AAEEvH,sBAAM,SAFR;AAGE5B,sBAAM,CACJ;AACEsB,uBAAK,KAAK+H,MAAL,CAAYkC,GAAZ,CAAgB,WAAhB,CADP;AAEEG,uBAAK;AAFP,iBADI;AAHR,eADI,EAWJ;AACEvC,wBAAQ,cADV;AAEEvH,sBAAM;AAFR,eAXI,EAeJ;AACEuH,wBAAQ,WADV;AAEEnJ,sBAAM,CAAC,YAAD;AAFR,eAfI;AAlBG;AAJJ;AAFX,SADkD,EAgDlD;AACEyL;AADF,SAhDkD,CAA7C,EAoDJpG,IApDI,CAoDC,YAAM;AACV;AACA,gBAAKuE,MAAL,CAAYmC,QAAZ,CAAqB,OAArB,EAA8B,OAA9B;AAAuC,qBAASC,cAAT,CACrCtL,KADqC,EAErC;AACA,kBAAIA,0CAAJ,EAAoC;AAClC,oBAAMc,OAAeS,OAAOC,MAAP,CACnB;AACEuB,wBAAM/C,MAAM+C;AADd,iBADmB,EAInB/C,MAAMgD,OAJa,CAArB;AAMA,qBAAKuI,IAAL,CAAUvL,MAAM8C,UAAhB,EAA4B9C,MAAM6C,OAAlC,EAA2C/B,IAA3C;AACD,eARD,MAQO;AACL,qBAAKd,KAAL;AACD;AACF;;AAdD,mBAAgDsL,cAAhD;AAAA;AAeA,gBAAKpC,MAAL,CAAYsC,GAAZ,CAAgB,eAAhB,EAAiC,UAACd,OAAD,EAAkBe,KAAlB,EAAsC;AACrE,gBAAMC,WAAmBhB,QAAQgB,QAAjC;;AAEA,gBAAI,CAACA,SAASC,MAAd,EAAsB;AACpBF;AACD,aAFD,MAEO;AACL;AACAC,uBAASE,MAAT,CAAgBC,OAAhB,CAAwB/K,IAAxB,GAA+B4K,SAAS5K,IAAT,GAC3B4K,SAAS5K,IADkB,GAE3BwB,SAFJ;AAGAoI,sBAAQ9J,GAAR,CAAY,CAAC,OAAD,CAAZ,EAAuB8K,QAAvB;AACAD,oBAAMC,QAAN;AACD;AACF,WAbD;;AAeA;AACA,gBAAKxC,MAAL,CAAYmC,QAAZ,CAAqB,SAArB,EAAgC,QAAhC,EAA0C,MAAK1C,MAA/C;;AAEA;AACA,iBAAO,sBAAU,MAAKO,MAAL,CAAY4C,KAAtB,EAA6B,MAAK5C,MAAlC,GAAP;AACD,SAzFI,EA0FJvE,IA1FI,CA0FC,YAAM;AACV;AACA,gBAAKgE,MAAL,CAAY3H,MAAZ,GAAqB,MAAKkI,MAAL,CAAYtI,GAAZ,CAAgBT,IAAhB,CAAqB,MAAK+I,MAA1B,CAArB;AACA,4BAAKlI,MAAL,GAAc,MAAKkI,MAAL,CAAYtI,GAAZ,CAAgBT,IAAhB,CAAqB,MAAK+I,MAA1B,CAAd;;AAEA;AACA,gBAAKA,MAAL,CAAYtI,GAAZ,CAAgB,CAAC,OAAD,CAAhB,iCAAiD,MAAKsI,MAAL,CAAY6C,IAAZ,CAAiBC,GAAlE;AACD,SAjGI,CAAP;AAkGD;;;;;;;;;qBA/HkBxD,M;;;;;;;;;;ACTrB;;;;;;uCAlBA;;;;;;;;;;;;;;;;;;;;;;;;;;ypBCAA;;;;;;;;;;;;;;;;;;AAkBA;;;;AACA;;;;AACA;;AACA;;;;qBAEe;AACb;AACA;AACEyD,UAAQ,MADV;AAEErK,QAAM,uBAFR;AAGE+G,UAAQ;AACNuD,iBAAa,YADP;AAENC,WAAO,2CAFD;AAGN/K,UAAM,CAAC,KAAD,CAHA;AAIN2H,cAAU;AACRqD,cAAQ;AACNzF,wBAAgB,iBAAIyC,MAAJ,GAAaiD,KAAb,CAAmB,kBAAnB;AADV,OADA;;AAKRR,eAAS;AACPtG,oBAAY,iBAAI6D,MAAJ,GAAac,KAAb,GAAqBoC,QAArB,GAAgCC,OAAhC,CAAwC,KAAxC,CADL;AAEPzE,kBAAU,iBAAIsB,MAAJ,GAAac,KAAb,GAAqBnE,GAArB,CAAyB,EAAzB,EAA6BuG,QAA7B,GAAwCC,OAAxC,CAAgD,MAAhD,CAFH;AAGPvE,kBAAU,iBAAIoB,MAAJ,GAAarD,GAAb,CAAiB,EAAjB,EAAqBuG,QAArB,GAAgCC,OAAhC,CAAwC,UAAxC,CAHH;AAIPnI,2BAAmB,iBAAIgF,MAAJ,GAChBoD,QADgB,GAEhBD,OAFgB,CAER,sBAFQ,CAJZ;AAOP7E,wBAAgB,iBAAI4B,MAAJ,GACbc,OADa,GAEbpE,GAFa,CAET,CAFS,EAGbD,GAHa,CAGT,EAHS,EAIbyG,QAJa,GAKbD,OALa,CAKL,CALK,CAPT;AAaPrJ,gBAAQ,iBAAIoG,MAAJ,GACLc,OADK,GAELpE,GAFK,CAED,CAFC,EAGLD,GAHK,CAGD,GAHC,EAILyG,QAJK,GAKLD,OALK,CAKG,GALH,CAbD;AAmBP3E,gBAAQ,iBAAIwB,MAAJ,cAAqB,EAArB,EAAyBe,KAAzB,CAA+B,EAA/B,CAnBD;AAoBPjC,mBAAW,iBAAIkB,MAAJ,cAAqB,EAArB,EAAyBe,KAAzB,CAA+B,EAA/B,CApBJ;AAqBPvD,oBAAY,iBAAIjG,MAAJ,cAAqB,EAArB,EAAyB4L,OAAzB,CACVE,KAAKC,SAAL,CAAe;AACbC,oBAAU;AADG,SAAf,CADU;AArBL;AALD;AAJJ,GAHV;AAyCEC;AAAS,qBAAClC,OAAD,EAAkBe,KAAlB,EAAsC;AAC7C,UAAM9E,iBAAyB+D,QAAQ0B,MAAR,CAAezF,cAA9C;;AAEA;AACA,UAAMqD,cAAsBU,QAAQ/B,MAAR,CAAekC,GAAf,CAAmB,aAAnB,CAA5B;AACA,UAAMtF,aAAsByE,YAAYU,QAAQmB,OAAR,CAAgBtG,UAA5B,CAA5B;;AAEA;AACA,UAAImF,QAAQmB,OAAR,CAAgBtG,UAAhB,IAA8B,CAACA,UAAnC,EAA+C;AAC7C,eAAOkG,MAAMzL,KAAN,CACL,8BAAkB,yCAAlB,CADK,CAAP;AAGD;;AAED;AACA,UAAM6M,cAAuB,qBAC3BtH,WAAW8E,eAAX,CAA2BC,SADA,EAE3B3D,cAF2B,CAA7B;AAIA,UAAI,CAACkG,WAAL,EAAkB;AAChB,YAAMC,cAAuB,qBAC3BvH,WAAW8E,eAAX,CAA2BE,SADA,EAE3B5D,cAF2B,CAA7B;AAIA,YAAImG,WAAJ,EAAiB;AACf,iBAAOrB,MAAMzL,KAAN,CACL,+DAC0B2G,cAD1B,wBADK,CAAP;AAKD;AACF;;AAED;AACA,UAAM7C,gBAAwB;AAC5BM,2BACEmB,WAAWnB,iBAAX,IAAgCsG,QAAQmB,OAAR,CAAgBzH,iBAFtB;AAG5BsD,wBACEnC,WAAWmC,cAAX,IAA6BgD,QAAQmB,OAAR,CAAgBnE,cAJnB;AAK5BxE,gBAAQqC,WAAWrC,MAAX,IAAqBwH,QAAQmB,OAAR,CAAgB3I,MALjB;AAM5B0E,gBAAQrC,WAAWqC,MAAX,IAAqB8C,QAAQmB,OAAR,CAAgBjE;;AAG/C;AAT8B,OAA9B,CAUA,IAAI8C,QAAQmB,OAAR,CAAgB3D,SAAhB,IAA6BwC,QAAQqC,KAAR,CAAc9E,SAA/C,EAA0D;AACxD;AACAnE,sBAAcoE,SAAd,GACE3C,WAAW2C,SAAX,IACAwC,QAAQmB,OAAR,CAAgB3D,SADhB,IAEAwC,QAAQqC,KAAR,CAAc9E,SAHhB;AAID,OAND,MAMO;AACLnE,sBAAcgE,QAAd,GAAyBvC,WAAWuC,QAAX,IAAuB4C,QAAQmB,OAAR,CAAgB/D,QAAhE;AACAhE,sBAAckE,QAAd,GAAyBzC,WAAWyC,QAAX,IAAuB0C,QAAQmB,OAAR,CAAgB7D,QAAhE;AACD;;AAED;AACA,UAAMpB,aAAqB8D,QAAQmB,OAAR,CAAgBjF,UAA3C;AACA,wBAAKiE,GAAL,CAAS/G,aAAT,EAAwB4G,QAAQ9J,GAAR,CAAYT,IAAZ,CAAiBuK,OAAjB,CAAxB,EACGpG,OADH,GAEGK,IAFH,CAEQ,UAACzB,MAAD;AAAA,eACJA,OAAO2D,MAAP,CAAcF,cAAd,EAA8BC,UAA9B,CADI;AAAA,OAFR,EAKGjC,IALH,CAKQ,gBAAoC;AAAA;AAAA,YAAlCnB,MAAkC;AAAA,YAAlBwJ,IAAkB;;AACxC;AACAvB,cAAM;AACJjI,wBADI;AAEJwJ;AAFI,SAAN;AAID,OAXH,WAYS,UAAChN,KAAD,EAAkB;AACvByL,cAAMzL,KAAN,CAAYA,KAAZ;AACD,OAdH;;AAgBA,aAAO,IAAP;AACD;;AA1ED;AAAA;AAzCF,CAFa,C;;;;;;ACvBf;;;;;;;ACAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,YAAY,kBAAkB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D,gCAAgC,EAAE;AAC5F,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,oCAAoC,wBAAwB;AAC5D,sCAAsC,sBAAsB;AAC5D,wCAAwC,4BAA4B;AACpE,iDAAiD,wBAAwB;AACzE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC,eAAe;AACrD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,2FAA2F,oBAAoB;AAC/G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AA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","file":"cli.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a20f386f681464f5cdcf","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nexport function promisify(func: Function, boundObject: ?Object): Function {\n  return (...args): Promise =>\n    new Promise((resolve: Function, reject: Function) => {\n      // Workaround because reject/resolve does not work in node-rfc environment\n      let rejectError: ?any = null\n      let resolveValues: ?Array = null\n      const checkReturn: Function = () => {\n        // Anything returned so far?\n        let handled: boolean = false\n        if (rejectError) {\n          reject(rejectError)\n          handled = true\n        } else if (resolveValues) {\n          resolve(resolveValues)\n          handled = true\n        }\n\n        // Recheck in the future?\n        if (!handled) {\n          setTimeout(checkReturn, 10)\n        }\n      }\n      setTimeout(checkReturn, 10)\n\n      // Create the last argument: the generic callback function\n      const callback: Function = (error: ?any, ...values) => {\n        if (error) {\n          rejectError = error\n          // reject(error)\n        } else {\n          resolveValues = values\n          // resolve(values)\n        }\n      }\n      args.push(callback)\n\n      // Call function\n      setTimeout(() => {\n        try {\n          if (boundObject) {\n            func.bind(boundObject)(...args)\n          } else {\n            func(...args)\n          }\n        } catch (error) {\n          rejectError = error\n        }\n      }, 0)\n    })\n}\n\nexport function pad(\n  input: string | number,\n  length: number,\n  character: string = ' ',\n): string {\n  return (Array(length).join(character) + input.toString()).slice(-1 * length)\n}\n\nexport function makeLoggable(object: Object): Object {\n  const log: Function = function log(\n    tag: string | Array<string>,\n    data: string,\n    details: ?any,\n  ) {\n    if (this.logger) {\n      const scope: string = this.name || this.constructor.name\n      const tags: Array = Array.isArray(tag)\n        ? [scope].concat(tag)\n        : [scope, tag]\n      this.logger(tags, data)\n\n      if (details) {\n        this.logger(tags, details)\n      }\n    }\n  }\n\n  // Add log function to class and prototype\n  Object.assign(object, {\n    log,\n  })\n  Object.assign(object.prototype, {\n    log,\n  })\n\n  return object\n}\n\nexport function isFunction(object: any): boolean {\n  return !!(object && object.constructor && object.call && object.apply)\n}\n\nexport function findByPath(object: Object, path: string): any {\n  const parts: Array<string> = path.trim() === '' ? [] : path.split('.')\n  let value: ?any = object\n  while (value && parts.length > 0) {\n    value = value[parts.shift()]\n  }\n  return value\n}\n\nexport function removeUndefinedValues(object: Object): Object {\n  const copy: Object = Object.assign({}, object)\n  Object.keys(copy).forEach((key: any) => {\n    if (copy[key] === undefined) {\n      delete copy[key]\n    }\n  })\n\n  return copy\n}\n\nexport function isListed(list: Array, searchValue: string): boolean {\n  return list.some(\n    (value: string): boolean =>\n      !!searchValue.match(new RegExp(`^${value.split('*').join('(.*)')}$`)),\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport ErrorSubclass from 'error-subclass'\n\nexport class HttpException extends ErrorSubclass {\n  context: ?Object = null\n\n  constructor(\n    message: ?string,\n    statusCode: ?number = 400,\n    code: ?string,\n    context: ?Object,\n  ) {\n    super(message)\n    this.statusCode = statusCode\n    this.code = code\n    this.context = context\n  }\n}\n\nexport class RFCException extends HttpException {\n  client: ?Object = null\n\n  constructor(\n    message: ?string,\n    statusCode: ?number,\n    code: ?string,\n    context: ?Object,\n    client: ?Object,\n  ) {\n    super(message, statusCode, code, context)\n    this.client = client\n  }\n\n  static parse(error: Error, context: ?Object, client: ?Object): Object {\n    const key: ?string = error.key\n    let message: ?string = null\n\n    // Translate code to message\n    const code: number = parseInt(error.code, 10)\n    switch (code) {\n      case 1: {\n        const parsedMessage: Object = this.parseMessage(error.message)\n        const prefix: string = parsedMessage['ERRNO TEXT']\n          ? `${parsedMessage['ERRNO TEXT']}: `\n          : ''\n        message = `${prefix}${parsedMessage.ERROR}`\n        break\n      }\n\n      default: {\n        message = error.message\n      }\n    }\n\n    // Return result\n    let result: ?Error = null\n    if (this === RFCException) {\n      result = new this(message, 502, key, context, client)\n    } else {\n      result = new this(message, context, client)\n    }\n    return result\n  }\n\n  static parseMessage(message: string = ''): Object {\n    const result: Object = {}\n    message\n      .split('\\n')\n      .map((line: string): string => line.trim())\n      .forEach((line: string) => {\n        const key: string = line.substring(0, 12).trim()\n        const value: string = line.substring(12).trim()\n        if (key) {\n          result[key] = value\n        }\n      })\n    return result\n  }\n}\n\nexport class LogonException extends RFCException {\n  constructor(message: string, context: ?Object) {\n    super(message, 403, 'RFC_LOGON_FAILURE', context)\n  }\n}\n\nexport class TimeoutException extends HttpException {\n  client: ?Object = null\n\n  constructor(message: string, context: ?Object, client: ?Object) {\n    super(message, 504, 'RFC_TIMEOUT', context)\n    this.client = client\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Exceptions.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport Pool2 from 'pool2'\nimport objectHash from 'object-hash'\nimport Client from './Client'\nimport { TimeoutException } from './Exceptions'\nimport { makeLoggable, promisify } from './../utils'\n\nexport default makeLoggable(\n  class Pool {\n    static logger: ?Function = null\n\n    // Each destination has its own pool\n    static pools: Object = {}\n\n    static options: Object = {\n      acquireTimeout: 24 * 60 * 60 * 1000,\n      disposeTimeout: 30 * 1000,\n      pingTimeout: 2 * 1000,\n      idleTimeout: 120 * 1000,\n      requestTimeout: Infinity,\n\n      max: 1,\n      min: 0,\n      testOnBorrow: true,\n      evictionRunIntervalMillis: 5 * 60 * 1000,\n      maxRequests: Infinity,\n      backoff: {\n        min: 1 * 1000,\n        max: 60 * 1000,\n        jitter: 0,\n      },\n      bailAfter: 1,\n      bailTimeout: 30 * 1000,\n    }\n\n    static Client: Object = Client\n\n    static generateHash(configuration: Object): string {\n      return objectHash(configuration)\n    }\n\n    static remove(configuration: Object) {\n      const hash: string = this.generateHash(configuration)\n      const pool: ?Object = this.pools[hash]\n\n      if (pool) {\n        pool.end()\n        this.pools[hash] = undefined\n        this.log(\n          'debug',\n          `Removed connection pool \"${hash}\" for host \"${configuration.applicationServer}\".`,\n        )\n      }\n    }\n\n    static create(configuration: Object, logger: ?Function): Object {\n      let lastError: ?Error = null\n      const pool: Object = new Pool2(\n        Object.assign(\n          {\n            acquire: (callback: Function) => {\n              this.log(\n                'debug',\n                `Start acquiring connection for \"${configuration.applicationServer}\".`,\n              )\n\n              try {\n                const boundRelease: Function = pool.release.bind(pool)\n                this.Client\n                  .connect(configuration, boundRelease, logger)\n                  .then((client: Object) => {\n                    callback(null, client)\n                  })\n                  .catch((error: Error) => {\n                    // Check if error occurred in a client\n                    if (error.client) {\n                      // Release client from pool so it doesn't block future requests\n                      if (error.code && error.code.startsWith('RFC_')) {\n                        pool.destroy(error.client)\n                      } else {\n                        pool.remove(error.client)\n                      }\n                    } else {\n                      // If no connection could be established, remove the pool after some time\n                      // Any requests before are served with a cached error\n                      lastError = error\n                      setTimeout(\n                        () => Pool.remove(configuration),\n                        this.options.bailTimeout,\n                      )\n                    }\n\n                    callback(error)\n                  })\n              } catch (error) {\n                callback(error)\n              }\n            },\n\n            dispose: (client: Object, callback: Function) => {\n              this.log(\n                'debug',\n                `Disposing connection for \"${configuration.applicationServer}\".`,\n              )\n              client.close()\n              callback()\n            },\n\n            destroy: (client: Object, callback: Function) => {\n              this.log(\n                'debug',\n                `Destroying connection for \"${configuration.applicationServer}\".`,\n              )\n              callback()\n            },\n\n            ping: (client: Object, callback: Function) => {\n              // Asynchronously ping\n              setTimeout(() => {\n                if (client.ping()) {\n                  callback()\n                } else {\n                  callback(\n                    new TimeoutException(\n                      `Ping to \"${configuration.applicationServer}\" failed.`,\n                    ),\n                  )\n                }\n              }, 0)\n            },\n          },\n          this.options,\n        ),\n      )\n\n      // Promisify acquire and return last error if present\n      // Otherwise a generic error from pool2 would be thrown\n      const originalAcquire: Function = pool.acquire.bind(pool)\n      pool.acquire = function acquire(): Promise {\n        return promisify(originalAcquire, pool)()\n          .then(([client: Object]): Object => client)\n          .catch((error: Error) => {\n            throw lastError || error\n          })\n      }\n\n      // Catch all generic errors\n      pool.on('error', (error: Error) => {\n        if (!error.code) {\n          this.log(\n            'error',\n            `An error occured in pool \"${configuration.applicationServer}\".`,\n            error,\n          )\n        }\n      })\n\n      return pool\n    }\n\n    static get(configuration: Object, logger: ?Function): Object {\n      const hash: string = this.generateHash(configuration)\n      let connection: ?Object = null\n\n      // Reuse pool once it was created for a specific configuration\n      if (this.pools[hash]) {\n        connection = this.pools[hash]\n        this.log(\n          'debug',\n          `Reuse connection pool \"${hash}\" of host \"${configuration.applicationServer}\".`,\n        )\n      } else {\n        connection = this.create(configuration, logger)\n        this.pools[hash] = connection\n        this.log(\n          'debug',\n          `Added connection pool \"${hash}\" for host \"${configuration.applicationServer}\".`,\n        )\n      }\n\n      return connection\n    }\n  },\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Pool.js","/*\r\n    r3connect\r\n    Copyright (C) 2017 Julian Hundeloh\r\n\r\n    This program is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Affero General Public License as published\r\n    by the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    This program is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU Affero General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Affero General Public License\r\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n\r\nimport { LogonException, RFCException, TimeoutException } from './Exceptions'\r\nimport { makeLoggable, pad, promisify, removeUndefinedValues } from './../utils'\r\n\r\nexport default makeLoggable(\r\n  class Client {\r\n    nodeRFC: ?Object = null\r\n    release: ?Function = null\r\n    logger: ?Function = null\r\n    connectTime: ?number = null\r\n    numberOfInvokes: number = 0\r\n\r\n\r\n    static options: Object = {\r\n      connectTimeout: 5 * 1000,\r\n      invokeTimeout: 30 * 1000,\r\n    }\r\n\r\n    // Needs to be required as it could throw an exception if it was not built correctly\r\n    static get NodeRFC(): Object {\r\n      // eslint-disable-next-line global-require, import/no-unresolved\r\n      return require('node-rfc').Client\r\n    }\r\n\r\n    constructor(nodeRFC: Object, release: Function) {\r\n      this.nodeRFC = nodeRFC\r\n      this.release = release\r\n    }\r\n\r\n    static connect(\r\n      configuration: Object,\r\n      release: Function,\r\n      logger: ?Function,\r\n    ): Promise {\r\n      const nodeRFC: Object = new this.NodeRFC(\r\n        removeUndefinedValues({\r\n          ashost: configuration.applicationServer,\r\n          sysnr: pad(configuration.instanceNumber, 2, '0'),\r\n          client: pad(configuration.client, 3, '0'),\r\n          saprouter: configuration.router,\r\n          user: configuration.username,\r\n          passwd: configuration.password,\r\n          MYSAPSSO2: configuration.mysapsso2,\r\n          trace: '0',\r\n        }),\r\n      )\r\n      const connect: Function = nodeRFC.connect\r\n      const startTime: Date = new Date()\r\n\r\n      // Connect to system\r\n      const connectPromise: Promise = promisify(connect, nodeRFC)\r\n        .apply(nodeRFC)\r\n        .then((): Object => {\r\n          // Create client\r\n          const client: Object = new Client(nodeRFC, release)\r\n          client.logger = logger\r\n          client.connectTime = new Date() - startTime\r\n          return client\r\n        })\r\n        .catch((error: Error) => {\r\n          throw LogonException.parse(\r\n            error,\r\n            Object.assign({}, configuration, { password: '********' }),\r\n          )\r\n        })\r\n\r\n      // Prevent that a RFC runs forever\r\n      const timeoutPromise: Promise = new Promise(\r\n        (resolve: Function, reject: Function) => {\r\n          setTimeout(() => {\r\n            reject(\r\n              new TimeoutException(\r\n                `The system took too long to respond (more than ${this.options\r\n                  .connectTimeout / 1000} seconds).`,\r\n                Object.assign({}, configuration, { password: '********' }),\r\n              ),\r\n            )\r\n          }, this.options.connectTimeout)\r\n        },\r\n      )\r\n\r\n      // Whoever finishes first wins the race\r\n      return Promise.race([connectPromise, timeoutPromise])\r\n    }\r\n\r\n    close(): boolean {\r\n      return this.nodeRFC.close.apply(this.nodeRFC)\r\n    }\r\n\r\n    ping(): boolean {\r\n      return this.nodeRFC.ping.apply(this.nodeRFC)\r\n    }\r\n\r\n    invoke(functionModule: string, parameters: ?Object): Promise {\r\n      const invoke: Function = this.nodeRFC.invoke\r\n      const startTime: Date = new Date()\r\n\r\n      // Keep track of invokes\r\n      this.numberOfInvokes = this.numberOfInvokes + 1\r\n\r\n      // Call system\r\n      const args: Array = [functionModule, parameters]\r\n      const invokePromise: Promise = promisify(invoke, this.nodeRFC)\r\n        .apply(this.nodeRFC, args)\r\n        .catch((error: Error) => {\r\n          throw RFCException.parse(error, this)\r\n        })\r\n\r\n      // Prevent that a RFC runs forever\r\n      const timeoutPromise: Promise = new Promise(\r\n        (resolve: Function, reject: Function) => {\r\n          setTimeout(() => {\r\n            reject(\r\n              new TimeoutException(\r\n                `The function call took too long to respond (more than ${this\r\n                  .constructor.options.invokeTimeout / 1000} seconds).`,\r\n                {\r\n                  functionModule,\r\n                },\r\n                this,\r\n              ),\r\n            )\r\n          }, this.constructor.options.invokeTimeout)\r\n        },\r\n      )\r\n\r\n      // Whoever finishes first wins the race\r\n      return Promise.race([invokePromise, timeoutPromise])\r\n        .then(([result: Object]): Promise => {\r\n          // Release resource\r\n          this.release(this)\r\n\r\n          // Add performance information\r\n          return Promise.all([\r\n            result,\r\n            {\r\n              invokeTime: new Date() - startTime,\r\n              connectTime: this.numberOfInvokes === 1 ? this.connectTime : 0,\r\n            },\r\n          ])\r\n        })\r\n        .catch((error: Error) => {\r\n          // Release resource\r\n          this.release(this)\r\n\r\n          // Pass on error\r\n          throw error\r\n        })\r\n    }\r\n  },\r\n)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Client.js","module.exports = require(\"joi\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"joi\"\n// module id = 4\n// module chunks = 0 1","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 5\n// module chunks = 0 1","import _Client from './lib/Client'\r\nimport _Configuration from './lib/Configuration'\r\nimport _Pool from './lib/Pool'\r\nimport _Server from './lib/Server'\r\n\r\nconst r3connect: Object = {\r\n  Client: _Client,\r\n  Configuration: _Configuration,\r\n  Pool: _Pool,\r\n  Server: _Server\r\n}\r\n\r\nexport default r3connect\r\nexport const Client = _Client\r\nexport const Configuration = _Configuration\r\nexport const Server = _Server\r\nexport const Pool = _Pool\r\nmodule.exports = r3connect\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Joi from 'joi'\nimport { findByPath, isFunction, makeLoggable } from './../utils'\n\nexport default makeLoggable(\n  class Configuration {\n    config: ?Object = null\n    fallbackConfig: ?Object = null\n\n    constructor(config: ?Object | Function, fallbackConfig: Object) {\n      this.fallbackConfig = fallbackConfig\n      this.set(config)\n    }\n\n    static validate(config: Object): boolean {\n      const schema = Joi.object().keys({\n        server: Joi.object().keys({\n          host: Joi.string(),\n          port: Joi.number().min(1),\n          routes: Joi.object().keys({\n            cors: Joi.boolean(),\n          }),\n          tls: Joi.object().keys({\n            key: Joi.binary(),\n            cert: Joi.binary(),\n          }),\n        }),\n        logs: Joi.object().keys({\n          tags: Joi.array().items(Joi.string()),\n        }),\n        connections: Joi.object().pattern(\n          /\\w+/,\n          Joi.object().keys({\n            username: Joi.string().token().max(12).allow('').allow(null),\n            password: Joi.string().max(40).allow('').allow(null),\n            applicationServer: Joi.string().allow('').allow(null),\n            instanceNumber: Joi.number().integer().min(0).max(99),\n            client: Joi.number().integer().min(0).max(999),\n            router: Joi.string().allow('').allow(null),\n            functionModules: Joi.object().keys({\n              whitelist: Joi.array().items(Joi.string()),\n              blacklist: Joi.array().items(Joi.string()),\n            }),\n          }),\n        ),\n      })\n      const result: Object = Joi.validate(config, schema)\n\n      // Provide details about the failed validation\n      if (result.error) {\n        throw result.error\n      }\n\n      return true\n    }\n\n    set(content: ?Object | Function) {\n      if (!content) {\n        this.log(\n          'error',\n          'The configuration provided is empty and hence the standard configuration file will be used.',\n        )\n        this.config = this.fallbackConfig\n      } else {\n        let config: ?Object = null\n\n        // Content could be an extension or a config\n        if (typeof content === 'function') {\n          config = content(this.fallbackConfig)\n        } else {\n          config = content\n        }\n\n        // Validate configuration against the defined schema\n        try {\n          Configuration.validate(config)\n          this.log('debug', 'Successfully reloaded configuration.')\n          this.config = config\n        } catch (error) {\n          this.log(\n            'error',\n            `Unfortunately the new configuration does not follow the allowed schema and thus the old configuration wil be kept. The error was: ${error.message}`,\n          )\n          this.config = this.config || this.fallbackConfig\n        }\n      }\n    }\n\n    get(path: string): any {\n      let value: any = findByPath(this.config, path)\n\n      // Take value from fallback configuration if it was not found\n      if (value === undefined) {\n        value = findByPath(this.fallbackConfig, path)\n      } else if (isFunction(value)) {\n        // Allow extensibility by calling the function with the fallback value\n        const fallbackValue: any = findByPath(this.fallbackConfig, path)\n        value = value(fallbackValue)\n      }\n\n      if (value === undefined) {\n        this.log(\n          'error',\n          `The requested configuration for path \"${path}\" does not exist.`,\n        )\n      }\n\n      return value\n    }\n  },\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Configuration.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport 'source-map-support/register'\nimport Hapi from 'hapi'\nimport Good from 'good'\nimport HapiBoomDecorators from 'hapi-boom-decorators'\nimport { HttpException } from './Exceptions'\nimport Pool from './Pool'\nimport routes from './../routes/'\nimport { promisify } from './../utils'\n\nexport default class Server {\n  server: ?Object = null\n  config: ?Object = null\n\n  constructor(config: ?Object) {\n    this.config = config\n    this.server = this.createServer()\n  }\n\n  createServer() {\n    // Create server\n    const server: Object = new Hapi.Server({\n      debug: {\n        request: [\n          'error',\n          process.env.NODE_ENV === 'development' ? 'debug' : null,\n        ].filter(Boolean),\n      },\n    })\n    server.connection(this.config.get('server'))\n\n    // Add routes\n    routes.forEach((route: Object) => server.route(route))\n\n    return server\n  }\n\n  start(): Promise {\n    // Register plugins and start the server\n    return promisify(this.server.register, this.server)([\n      {\n        register: Good,\n        options: {\n          ops: {\n            interval: 30000,\n          },\n          reporters: {\n            console: [\n              {\n                module: 'good-squeeze',\n                name: 'Squeeze',\n                args: [\n                  {\n                    request: this.config.get('logs.tags'),\n                    log: this.config.get('logs.tags'),\n                    ops: '*',\n                  },\n                ],\n              },\n              {\n                module: 'good-console',\n              },\n              'stdout',\n            ],\n            file: [\n              {\n                module: 'good-squeeze',\n                name: 'Squeeze',\n                args: [\n                  {\n                    log: this.config.get('logs.tags'),\n                    ops: '*',\n                  },\n                ],\n              },\n              {\n                module: 'good-squeeze',\n                name: 'SafeJson',\n              },\n              {\n                module: 'good-file',\n                args: ['./logs/log'],\n              },\n            ],\n          },\n        },\n      },\n      {\n        register: HapiBoomDecorators,\n      },\n    ])\n      .then(() => {\n        // Error handling\n        this.server.decorate('reply', 'error', function replyWithError(\n          error: Error,\n        ) {\n          if (error instanceof HttpException) {\n            const data: Object = Object.assign(\n              {\n                code: error.code,\n              },\n              error.context,\n            )\n            this.boom(error.statusCode, error.message, data)\n          } else {\n            this(error)\n          }\n        })\n        this.server.ext('onPreResponse', (request: Object, reply: Function) => {\n          const response: Object = request.response\n\n          if (!response.isBoom) {\n            reply.continue()\n          } else {\n            // Output details of errors\n            response.output.payload.data = response.data\n              ? response.data\n              : undefined\n            request.log(['error'], response)\n            reply(response)\n          }\n        })\n\n        // Provide configuration in requests\n        this.server.decorate('request', 'config', this.config)\n\n        // Start server\n        return promisify(this.server.start, this.server)()\n      })\n      .then(() => {\n        // Set loggers\n        this.config.logger = this.server.log.bind(this.server)\n        Pool.logger = this.server.log.bind(this.server)\n\n        // Let's go\n        this.server.log(['debug'], `Server running at: ${this.server.info.uri}`)\n      })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Server.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport rfc from './rfc'\n\nexport default rfc\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/index.js","/*\n    r3connect\n    Copyright (C) 2017 Julian Hundeloh\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as published\n    by the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport Joi from 'joi'\nimport Pool from './../lib/Pool'\nimport { HttpException } from './../lib/Exceptions'\nimport { isListed } from './../utils'\n\nexport default [\n  // Invoke RFC\n  {\n    method: 'POST',\n    path: '/rfc/{functionModule}',\n    config: {\n      description: 'Invoke RFC',\n      notes: 'Invokes a function module in the back-end',\n      tags: ['api'],\n      validate: {\n        params: {\n          functionModule: Joi.string().regex(/^[0-9a-zA-Z/_]+$/),\n        },\n\n        payload: {\n          connection: Joi.string().token().optional().example('XYZ'),\n          username: Joi.string().token().max(12).optional().example('DDIC'),\n          password: Joi.string().max(40).optional().example('11920706'),\n          applicationServer: Joi.string()\n            .required()\n            .example('gateway.example.corp'),\n          instanceNumber: Joi.number()\n            .integer()\n            .min(0)\n            .max(99)\n            .required()\n            .example(1),\n          client: Joi.number()\n            .integer()\n            .min(0)\n            .max(999)\n            .required()\n            .example(100),\n          router: Joi.string().default('').allow(''),\n          mysapsso2: Joi.string().default('').allow(''),\n          parameters: Joi.object().default({}).example(\n            JSON.stringify({\n              iv_input: 'example',\n            }),\n          ),\n        },\n      },\n    },\n    handler: (request: Object, reply: Function) => {\n      const functionModule: string = request.params.functionModule\n\n      // Get configuration for connection (also if the passed connection is undefined)\n      const connections: Object = request.config.get('connections')\n      const connection: ?Object = connections[request.payload.connection]\n\n      // Proceed only if the provided connection exists\n      if (request.payload.connection && !connection) {\n        return reply.error(\n          new HttpException('The connection you provided is invalid.'),\n        )\n      }\n\n      // Check if the function module is black/white listed\n      const whitelisted: boolean = isListed(\n        connection.functionModules.whitelist,\n        functionModule,\n      )\n      if (!whitelisted) {\n        const blacklisted: boolean = isListed(\n          connection.functionModules.blacklist,\n          functionModule,\n        )\n        if (blacklisted) {\n          return reply.error(\n            new HttpException(\n              `The function module \"${functionModule}\" is blacklisted.`,\n            ),\n          )\n        }\n      }\n\n      // Create configuration\n      const configuration: Object = {\n        applicationServer:\n          connection.applicationServer || request.payload.applicationServer,\n        instanceNumber:\n          connection.instanceNumber || request.payload.instanceNumber,\n        client: connection.client || request.payload.client,\n        router: connection.router || request.payload.router,\n      }\n\n      // Add credentials (either SSO2 cookie or user/password)\n      if (request.payload.mysapsso2 || request.state.MYSAPSSO2) {\n        // Use connection.MYSAPSSO2 because it will allow to disable cookies via configuration (via mysapsso2 = null)\n        configuration.mysapsso2 =\n          connection.mysapsso2 ||\n          request.payload.mysapsso2 ||\n          request.state.MYSAPSSO2\n      } else {\n        configuration.username = connection.username || request.payload.username\n        configuration.password = connection.password || request.payload.password\n      }\n\n      // Acquire connection from pool and invoke RFC\n      const parameters: Object = request.payload.parameters\n      Pool.get(configuration, request.log.bind(request))\n        .acquire()\n        .then((client: Object): Promise =>\n          client.invoke(functionModule, parameters),\n        )\n        .then(([result: Object, meta: Object]) => {\n          // Reply with result but as well metadata that was gathered\n          reply({\n            result,\n            meta,\n          })\n        })\n        .catch((error: Error) => {\n          reply.error(error)\n        })\n\n      return null\n    },\n  },\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/rfc.js","require('./').install();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/source-map-support/register.js\n// module id = 11\n// module chunks = 0 1","var SourceMapConsumer = require('source-map').SourceMapConsumer;\nvar path = require('path');\n\nvar fs;\ntry {\n  fs = require('fs');\n  if (!fs.existsSync || !fs.readFileSync) {\n    // fs doesn't have all methods we need\n    fs = null;\n  }\n} catch (err) {\n  /* nop */\n}\n\n// Only install once if called multiple times\nvar errorFormatterInstalled = false;\nvar uncaughtShimInstalled = false;\n\n// If true, the caches are reset before a stack trace formatting operation\nvar emptyCacheBetweenOperations = false;\n\n// Supports {browser, node, auto}\nvar environment = \"auto\";\n\n// Maps a file path to a string containing the file contents\nvar fileContentsCache = {};\n\n// Maps a file path to a source map for that file\nvar sourceMapCache = {};\n\n// Regex for detecting source maps\nvar reSourceMap = /^data:application\\/json[^,]+base64,/;\n\n// Priority list of retrieve handlers\nvar retrieveFileHandlers = [];\nvar retrieveMapHandlers = [];\n\nfunction isInBrowser() {\n  if (environment === \"browser\")\n    return true;\n  if (environment === \"node\")\n    return false;\n  return ((typeof window !== 'undefined') && (typeof XMLHttpRequest === 'function') && !(window.require && window.module && window.process && window.process.type === \"renderer\"));\n}\n\nfunction hasGlobalProcessEventEmitter() {\n  return ((typeof process === 'object') && (process !== null) && (typeof process.on === 'function'));\n}\n\nfunction handlerExec(list) {\n  return function(arg) {\n    for (var i = 0; i < list.length; i++) {\n      var ret = list[i](arg);\n      if (ret) {\n        return ret;\n      }\n    }\n    return null;\n  };\n}\n\nvar retrieveFile = handlerExec(retrieveFileHandlers);\n\nretrieveFileHandlers.push(function(path) {\n  // Trim the path to make sure there is no extra whitespace.\n  path = path.trim();\n  if (path in fileContentsCache) {\n    return fileContentsCache[path];\n  }\n\n  var contents = null;\n  if (!fs) {\n    // Use SJAX if we are in the browser\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', path, false);\n    xhr.send(null);\n    var contents = null\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      contents = xhr.responseText\n    }\n  } else if (fs.existsSync(path)) {\n    // Otherwise, use the filesystem\n    contents = fs.readFileSync(path, 'utf8');\n  }\n\n  return fileContentsCache[path] = contents;\n});\n\n// Support URLs relative to a directory, but be careful about a protocol prefix\n// in case we are in the browser (i.e. directories may start with \"http://\")\nfunction supportRelativeURL(file, url) {\n  if (!file) return url;\n  var dir = path.dirname(file);\n  var match = /^\\w+:\\/\\/[^\\/]*/.exec(dir);\n  var protocol = match ? match[0] : '';\n  return protocol + path.resolve(dir.slice(protocol.length), url);\n}\n\nfunction retrieveSourceMapURL(source) {\n  var fileData;\n\n  if (isInBrowser()) {\n     try {\n       var xhr = new XMLHttpRequest();\n       xhr.open('GET', source, false);\n       xhr.send(null);\n       fileData = xhr.readyState === 4 ? xhr.responseText : null;\n\n       // Support providing a sourceMappingURL via the SourceMap header\n       var sourceMapHeader = xhr.getResponseHeader(\"SourceMap\") ||\n                             xhr.getResponseHeader(\"X-SourceMap\");\n       if (sourceMapHeader) {\n         return sourceMapHeader;\n       }\n     } catch (e) {\n     }\n  }\n\n  // Get the URL of the source map\n  fileData = retrieveFile(source);\n  var re = /(?:\\/\\/[@#][ \\t]+sourceMappingURL=([^\\s'\"]+?)[ \\t]*$)|(?:\\/\\*[@#][ \\t]+sourceMappingURL=([^\\*]+?)[ \\t]*(?:\\*\\/)[ \\t]*$)/mg;\n  // Keep executing the search to find the *last* sourceMappingURL to avoid\n  // picking up sourceMappingURLs from comments, strings, etc.\n  var lastMatch, match;\n  while (match = re.exec(fileData)) lastMatch = match;\n  if (!lastMatch) return null;\n  return lastMatch[1];\n};\n\n// Can be overridden by the retrieveSourceMap option to install. Takes a\n// generated source filename; returns a {map, optional url} object, or null if\n// there is no source map.  The map field may be either a string or the parsed\n// JSON object (ie, it must be a valid argument to the SourceMapConsumer\n// constructor).\nvar retrieveSourceMap = handlerExec(retrieveMapHandlers);\nretrieveMapHandlers.push(function(source) {\n  var sourceMappingURL = retrieveSourceMapURL(source);\n  if (!sourceMappingURL) return null;\n\n  // Read the contents of the source map\n  var sourceMapData;\n  if (reSourceMap.test(sourceMappingURL)) {\n    // Support source map URL as a data url\n    var rawData = sourceMappingURL.slice(sourceMappingURL.indexOf(',') + 1);\n    sourceMapData = new Buffer(rawData, \"base64\").toString();\n    sourceMappingURL = source;\n  } else {\n    // Support source map URLs relative to the source URL\n    sourceMappingURL = supportRelativeURL(source, sourceMappingURL);\n    sourceMapData = retrieveFile(sourceMappingURL);\n  }\n\n  if (!sourceMapData) {\n    return null;\n  }\n\n  return {\n    url: sourceMappingURL,\n    map: sourceMapData\n  };\n});\n\nfunction mapSourcePosition(position) {\n  var sourceMap = sourceMapCache[position.source];\n  if (!sourceMap) {\n    // Call the (overrideable) retrieveSourceMap function to get the source map.\n    var urlAndMap = retrieveSourceMap(position.source);\n    if (urlAndMap) {\n      sourceMap = sourceMapCache[position.source] = {\n        url: urlAndMap.url,\n        map: new SourceMapConsumer(urlAndMap.map)\n      };\n\n      // Load all sources stored inline with the source map into the file cache\n      // to pretend like they are already loaded. They may not exist on disk.\n      if (sourceMap.map.sourcesContent) {\n        sourceMap.map.sources.forEach(function(source, i) {\n          var contents = sourceMap.map.sourcesContent[i];\n          if (contents) {\n            var url = supportRelativeURL(sourceMap.url, source);\n            fileContentsCache[url] = contents;\n          }\n        });\n      }\n    } else {\n      sourceMap = sourceMapCache[position.source] = {\n        url: null,\n        map: null\n      };\n    }\n  }\n\n  // Resolve the source URL relative to the URL of the source map\n  if (sourceMap && sourceMap.map) {\n    var originalPosition = sourceMap.map.originalPositionFor(position);\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    if (originalPosition.source !== null) {\n      originalPosition.source = supportRelativeURL(\n        sourceMap.url, originalPosition.source);\n      return originalPosition;\n    }\n  }\n\n  return position;\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nfunction mapEvalOrigin(origin) {\n  // Most eval() calls are in this format\n  var match = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin);\n  if (match) {\n    var position = mapSourcePosition({\n      source: match[2],\n      line: +match[3],\n      column: match[4] - 1\n    });\n    return 'eval at ' + match[1] + ' (' + position.source + ':' +\n      position.line + ':' + (position.column + 1) + ')';\n  }\n\n  // Parse nested eval() calls using recursion\n  match = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin);\n  if (match) {\n    return 'eval at ' + match[1] + ' (' + mapEvalOrigin(match[2]) + ')';\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin;\n}\n\n// This is copied almost verbatim from the V8 source code at\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js. The\n// implementation of wrapCallSite() used to just forward to the actual source\n// code of CallSite.prototype.toString but unfortunately a new release of V8\n// did something to the prototype chain and broke the shim. The only fix I\n// could find was copy/paste.\nfunction CallSiteToString() {\n  var fileName;\n  var fileLocation = \"\";\n  if (this.isNative()) {\n    fileLocation = \"native\";\n  } else {\n    fileName = this.getScriptNameOrSourceURL();\n    if (!fileName && this.isEval()) {\n      fileLocation = this.getEvalOrigin();\n      fileLocation += \", \";  // Expecting source position to follow.\n    }\n\n    if (fileName) {\n      fileLocation += fileName;\n    } else {\n      // Source code does not originate from a file and is not native, but we\n      // can still get the source position inside the source string, e.g. in\n      // an eval string.\n      fileLocation += \"<anonymous>\";\n    }\n    var lineNumber = this.getLineNumber();\n    if (lineNumber != null) {\n      fileLocation += \":\" + lineNumber;\n      var columnNumber = this.getColumnNumber();\n      if (columnNumber) {\n        fileLocation += \":\" + columnNumber;\n      }\n    }\n  }\n\n  var line = \"\";\n  var functionName = this.getFunctionName();\n  var addSuffix = true;\n  var isConstructor = this.isConstructor();\n  var isMethodCall = !(this.isToplevel() || isConstructor);\n  if (isMethodCall) {\n    var typeName = this.getTypeName();\n    // Fixes shim to be backward compatable with Node v0 to v4\n    if (typeName === \"[object Object]\") {\n      typeName = \"null\";\n    }\n    var methodName = this.getMethodName();\n    if (functionName) {\n      if (typeName && functionName.indexOf(typeName) != 0) {\n        line += typeName + \".\";\n      }\n      line += functionName;\n      if (methodName && functionName.indexOf(\".\" + methodName) != functionName.length - methodName.length - 1) {\n        line += \" [as \" + methodName + \"]\";\n      }\n    } else {\n      line += typeName + \".\" + (methodName || \"<anonymous>\");\n    }\n  } else if (isConstructor) {\n    line += \"new \" + (functionName || \"<anonymous>\");\n  } else if (functionName) {\n    line += functionName;\n  } else {\n    line += fileLocation;\n    addSuffix = false;\n  }\n  if (addSuffix) {\n    line += \" (\" + fileLocation + \")\";\n  }\n  return line;\n}\n\nfunction cloneCallSite(frame) {\n  var object = {};\n  Object.getOwnPropertyNames(Object.getPrototypeOf(frame)).forEach(function(name) {\n    object[name] = /^(?:is|get)/.test(name) ? function() { return frame[name].call(frame); } : frame[name];\n  });\n  object.toString = CallSiteToString;\n  return object;\n}\n\nfunction wrapCallSite(frame) {\n  if(frame.isNative()) {\n    return frame;\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  var source = frame.getFileName() || frame.getScriptNameOrSourceURL();\n  if (source) {\n    var line = frame.getLineNumber();\n    var column = frame.getColumnNumber() - 1;\n\n    // Fix position in Node where some (internal) code is prepended.\n    // See https://github.com/evanw/node-source-map-support/issues/36\n    if (line === 1 && !isInBrowser() && !frame.isEval()) {\n      column -= 62;\n    }\n\n    var position = mapSourcePosition({\n      source: source,\n      line: line,\n      column: column\n    });\n    frame = cloneCallSite(frame);\n    frame.getFileName = function() { return position.source; };\n    frame.getLineNumber = function() { return position.line; };\n    frame.getColumnNumber = function() { return position.column + 1; };\n    frame.getScriptNameOrSourceURL = function() { return position.source; };\n    return frame;\n  }\n\n  // Code called using eval() needs special handling\n  var origin = frame.isEval() && frame.getEvalOrigin();\n  if (origin) {\n    origin = mapEvalOrigin(origin);\n    frame = cloneCallSite(frame);\n    frame.getEvalOrigin = function() { return origin; };\n    return frame;\n  }\n\n  // If we get here then we were unable to change the source position\n  return frame;\n}\n\n// This function is part of the V8 stack trace API, for more info see:\n// http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi\nfunction prepareStackTrace(error, stack) {\n  if (emptyCacheBetweenOperations) {\n    fileContentsCache = {};\n    sourceMapCache = {};\n  }\n\n  return error + stack.map(function(frame) {\n    return '\\n    at ' + wrapCallSite(frame);\n  }).join('');\n}\n\n// Generate position and snippet of original source with pointer\nfunction getErrorSource(error) {\n  var match = /\\n    at [^(]+ \\((.*):(\\d+):(\\d+)\\)/.exec(error.stack);\n  if (match) {\n    var source = match[1];\n    var line = +match[2];\n    var column = +match[3];\n\n    // Support the inline sourceContents inside the source map\n    var contents = fileContentsCache[source];\n\n    // Support files on disk\n    if (!contents && fs && fs.existsSync(source)) {\n      contents = fs.readFileSync(source, 'utf8');\n    }\n\n    // Format the line from the original source code like node does\n    if (contents) {\n      var code = contents.split(/(?:\\r\\n|\\r|\\n)/)[line - 1];\n      if (code) {\n        return source + ':' + line + '\\n' + code + '\\n' +\n          new Array(column).join(' ') + '^';\n      }\n    }\n  }\n  return null;\n}\n\nfunction printErrorAndExit (error) {\n  var source = getErrorSource(error);\n\n  if (source) {\n    console.error();\n    console.error(source);\n  }\n\n  console.error(error.stack);\n  process.exit(1);\n}\n\nfunction shimEmitUncaughtException () {\n  var origEmit = process.emit;\n\n  process.emit = function (type) {\n    if (type === 'uncaughtException') {\n      var hasStack = (arguments[1] && arguments[1].stack);\n      var hasListeners = (this.listeners(type).length > 0);\n\n      if (hasStack && !hasListeners) {\n        return printErrorAndExit(arguments[1]);\n      }\n    }\n\n    return origEmit.apply(this, arguments);\n  };\n}\n\nexports.wrapCallSite = wrapCallSite;\nexports.getErrorSource = getErrorSource;\nexports.mapSourcePosition = mapSourcePosition;\nexports.retrieveSourceMap = retrieveSourceMap;\n\nexports.install = function(options) {\n  options = options || {};\n\n  if (options.environment) {\n    environment = options.environment;\n    if ([\"node\", \"browser\", \"auto\"].indexOf(environment) === -1) {\n      throw new Error(\"environment \" + environment + \" was unknown. Available options are {auto, browser, node}\")\n    }\n  }\n\n  // Allow sources to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveFile) {\n    if (options.overrideRetrieveFile) {\n      retrieveFileHandlers.length = 0;\n    }\n\n    retrieveFileHandlers.unshift(options.retrieveFile);\n  }\n\n  // Allow source maps to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveSourceMap) {\n    if (options.overrideRetrieveSourceMap) {\n      retrieveMapHandlers.length = 0;\n    }\n\n    retrieveMapHandlers.unshift(options.retrieveSourceMap);\n  }\n\n  // Support runtime transpilers that include inline source maps\n  if (options.hookRequire && !isInBrowser()) {\n    var Module;\n    try {\n      Module = require('module');\n    } catch (err) {\n      // NOP: Loading in catch block to convert webpack error to warning.\n    }\n    var $compile = Module.prototype._compile;\n\n    if (!$compile.__sourceMapSupport) {\n      Module.prototype._compile = function(content, filename) {\n        fileContentsCache[filename] = content;\n        sourceMapCache[filename] = undefined;\n        return $compile.call(this, content, filename);\n      };\n\n      Module.prototype._compile.__sourceMapSupport = true;\n    }\n  }\n\n  // Configure options\n  if (!emptyCacheBetweenOperations) {\n    emptyCacheBetweenOperations = 'emptyCacheBetweenOperations' in options ?\n      options.emptyCacheBetweenOperations : false;\n  }\n\n  // Install the error reformatter\n  if (!errorFormatterInstalled) {\n    errorFormatterInstalled = true;\n    Error.prepareStackTrace = prepareStackTrace;\n  }\n\n  if (!uncaughtShimInstalled) {\n    var installHandler = 'handleUncaughtExceptions' in options ?\n      options.handleUncaughtExceptions : true;\n\n    // Provide the option to not install the uncaught exception handler. This is\n    // to support other uncaught exception handlers (in test frameworks, for\n    // example). If this handler is not installed and there are no other uncaught\n    // exception handlers, uncaught exceptions will be caught by node's built-in\n    // exception handler and the process will still be terminated. However, the\n    // generated JavaScript code will be shown above the stack trace instead of\n    // the original source code.\n    if (installHandler && hasGlobalProcessEventEmitter()) {\n      uncaughtShimInstalled = true;\n      shimEmitUncaughtException();\n    }\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/source-map-support/source-map-support.js\n// module id = 12\n// module chunks = 0 1","module.exports = require(\"error-subclass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"error-subclass\"\n// module id = 13\n// module chunks = 0 1","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 14\n// module chunks = 0 1","module.exports = require(\"good\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"good\"\n// module id = 15\n// module chunks = 0 1","module.exports = require(\"hapi\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"hapi\"\n// module id = 16\n// module chunks = 0 1","module.exports = require(\"hapi-boom-decorators\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"hapi-boom-decorators\"\n// module id = 17\n// module chunks = 0 1","module.exports = require(\"module\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module\"\n// module id = 18\n// module chunks = 0 1","module.exports = require(\"node-rfc\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-rfc\"\n// module id = 19\n// module chunks = 0 1","module.exports = require(\"object-hash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"object-hash\"\n// module id = 20\n// module chunks = 0 1","module.exports = require(\"pool2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pool2\"\n// module id = 21\n// module chunks = 0 1","module.exports = require(\"source-map\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map\"\n// module id = 22\n// module chunks = 0 1","module.exports = {\"name\":\"r3connect\",\"version\":\"1.1.0\",\"author\":\"Julian Hundeloh\",\"email\":\"julian@hundeloh-consulting.ch\",\"license\":\"AGPL-3.0+\",\"description\":\"r3connect is a lean wrapper of node-rfc that provides comfortable access to SAP back-ends via a simple REST API.\",\"engines\":{\"node\":\">=6.0.0\"},\"main\":\"./build/index.js\",\"bin\":{\"r3connect\":\"./cli.js\"},\"scripts\":{\"cli\":\"better-npm-run cli\",\"build\":\"better-npm-run build\",\"dev\":\"better-npm-run dev\",\"test\":\"better-npm-run test\",\"format\":\"better-npm-run format\",\"precommit\":\"npm run test && npm run format && npm run build && git add build\",\"commitmsg\":\"validate-commit-msg\",\"postmerge\":\"npm install\",\"postrewrite\":\"npm install\"},\"betterScripts\":{\"cli\":{\"command\":\"node ./build/cli.js\"},\"build\":{\"command\":\"rimraf ./build && webpack --progress --colors\",\"env\":{\"NODE_ENV\":\"production\"}},\"dev\":{\"command\":\"babel-watch ./src/cli.js --inspect --source-maps\",\"env\":{\"NODE_ENV\":\"development\"}},\"test\":{\"command\":\"mocha --compilers js:babel-register --require babel-polyfill ./src/**/*.spec.js\",\"env\":{\"NODE_ENV\":\"development\"}},\"format\":{\"command\":\"prettier-standard 'src/**/*.js'\",\"env\":{\"NODE_ENV\":\"production\"}}},\"lint-staged\":{\"*.js\":[\"prettier-standard\",\"git add\"]},\"config\":{\"validate-commit-msg\":{\"types\":[\"feat\",\"fix\",\"docs\",\"style\",\"refactor\",\"perf\",\"test\",\"chore\",\"revert\"],\"helpMessage\":\"Types: feat, fix, docs, style, refactor, perf, test, chore, revert\"}},\"dependencies\":{\"better-npm-run\":\"0.0.15\",\"chalk\":\"^2.0.1\",\"colors.js\":\"^1.2.4\",\"error-subclass\":\"^2.2.0\",\"fs-extra\":\"^4.0.0\",\"good\":\"^7.2.0\",\"good-console\":\"^6.2.0\",\"good-file\":\"^6.0.1\",\"good-squeeze\":\"^5.0.1\",\"hapi\":\"^16.4.3\",\"hapi-boom-decorators\":\"^3.0.0\",\"joi\":\"^10.5.2\",\"object-hash\":\"^1.1.8\",\"pool2\":\"^1.4.1\",\"source-map-support\":\"^0.4.15\",\"update-notifier\":\"^2.2.0\"},\"peerDependencies\":{\"node-rfc\":\"^0.1.11\"},\"devDependencies\":{\"babel-core\":\"^6.25.0\",\"babel-loader\":\"^7.0.0\",\"babel-plugin-syntax-flow\":\"^6.18.0\",\"babel-plugin-transform-class-properties\":\"^6.24.1\",\"babel-plugin-transform-flow-strip-types\":\"^6.18.0\",\"babel-plugin-typecheck\":\"^3.9.0\",\"babel-polyfill\":\"^6.23.0\",\"babel-preset-airbnb\":\"^2.2.3\",\"babel-register\":\"^6.24.1\",\"babel-watch\":\"^2.0.7\",\"chai\":\"^4.0.2\",\"husky\":\"^0.13.4\",\"json-loader\":\"^0.5.4\",\"lint-staged\":\"^3.6.1\",\"mocha\":\"^3.4.2\",\"prettier-standard\":\"^6.0.0\",\"rimraf\":\"^2.5.4\",\"validate-commit-msg\":\"^2.12.2\",\"webpack\":\"^2.6.1\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 23\n// module chunks = 0","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"update-notifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"update-notifier\"\n// module id = 28\n// module chunks = 0","/*\r\n    r3connect\r\n    Copyright (C) 2017 Julian Hundeloh\r\n\r\n    This program is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Affero General Public License as published\r\n    by the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    This program is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU Affero General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Affero General Public License\r\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n\r\nimport os from 'os'\r\nimport path from 'path'\r\nimport childProcess from 'child_process'\r\nimport chalk from 'chalk'\r\nimport fs from 'fs-extra'\r\nimport updateNotifier from 'update-notifier'\r\nimport pkg from './../package'\r\nimport { Client, Configuration, Server } from './index'\r\n\r\nexport default (requirex: Function) => {\r\n  // Set color theme\r\n  const logger: Object = {\r\n    log: console.log,\r\n    success: text => logger.log(chalk.bold.green(text)),\r\n    info: text => logger.log(chalk.blue(text)),\r\n    error: text => logger.log(chalk.bold.red(text)),\r\n    warn: text => logger.log(chalk.yellow(text))\r\n  }\r\n\r\n  // Helper function to load configuration from project folder\r\n  const pathToFallbackConfig: string = path.join(__dirname, '..', 'config.js')\r\n  const pathToConfig: string = path.join(process.cwd(), 'config.js')\r\n  let config: ?Object = null\r\n  function loadConfig (file) {\r\n    let loadedConfig = null\r\n    try {\r\n      const content: string = fs.readFileSync(file, 'utf8')\r\n      loadedConfig = eval(content)\r\n    } catch (error) {\r\n      loadedConfig = null\r\n    }\r\n    return loadedConfig\r\n  }\r\n\r\n  // Welcome\r\n  logger.log(\r\n    `\r\n      ____                                  _   \r\n      |___ \\                                | |  \r\n  _ __ __) | ___ ___  _ __  _ __   ___  ___| |_ \r\n  | '__|__ < / __/ _ \\| '_ \\| '_ \\ / _ \\/ __| __|\r\n  | |  ___) | (_| (_) | | | | | | |  __/ (__| |_ \r\n  |_| |____/ \\___\\___/|_| |_|_| |_|\\___|\\___|\\__|\r\n  `\r\n  )\r\n\r\n  // Check for updates\r\n  updateNotifier({ pkg }).notify()\r\n\r\n  // Get package\r\n  let project: ?Object = null\r\n  try {\r\n    project = JSON.parse(\r\n      fs.readFileSync(path.join(process.cwd(), 'package.json'))\r\n    )\r\n  } catch (error) {\r\n    logger.error(\r\n      'Please initiate this project as an npm package first by running \"npm init\".'\r\n    )\r\n    process.exit(0)\r\n  }\r\n\r\n  // Handle different commands\r\n  const command: ?string = process.argv[2]\r\n  switch (command) {\r\n    case 'welcome': {\r\n      logger.success('r3connect was successfully installed. Congratulations!')\r\n\r\n      break\r\n    }\r\n\r\n    case 'init': {\r\n      // Ensure that we do not override an existing configuration\r\n      let configAlreadyExists: ?boolean = null\r\n      try {\r\n        fs.statSync(pathToConfig)\r\n        configAlreadyExists = true\r\n      } catch (error) {\r\n        configAlreadyExists = false\r\n      }\r\n\r\n      if (configAlreadyExists) {\r\n        logger.error(\r\n          `It seems that there is already a configuration present (\"${pathToConfig}\"). Delete it before you try to initialize the project.`\r\n        )\r\n        process.exit(0)\r\n      } else {\r\n        // Copy skeleton to project folder\r\n        Promise.all([\r\n          fs.copy(\r\n            path.join(__dirname, '..', 'vendor'),\r\n            path.join(process.cwd(), 'vendor')\r\n          ),\r\n          fs.copy(\r\n            path.join(__dirname, '..', 'tls'),\r\n            path.join(process.cwd(), 'tls')\r\n          ),\r\n          fs.copy(\r\n            path.join(__dirname, '..', 'Dockerfile'),\r\n            path.join(process.cwd(), 'Dockerfile')\r\n          ),\r\n          fs.copy(\r\n            path.join(__dirname, '..', 'config.js'),\r\n            path.join(process.cwd(), 'config.js')\r\n          )\r\n        ])\r\n          .then(() => {\r\n            logger.success(\r\n              'We initialized your project folder and you can start changing the configuration. Once you think you are ready, run \"r3connect server\" or \"r3connect docker\".'\r\n            )\r\n          })\r\n          .catch(() => {\r\n            logger.error(\r\n              'We tried to initialize your project folder but for some reason it failed. Please check the permissions of the folder.'\r\n            )\r\n          })\r\n      }\r\n\r\n      break\r\n    }\r\n\r\n    case 'server':\r\n    case 'docker': {\r\n      // Configuration must be loaded both for Server and for Docker\r\n      try {\r\n        fs.statSync(pathToConfig)\r\n      } catch (error) {\r\n        logger.error(\r\n          'We could not find a \"config.js\" file. Please ensure that you run \"r3connect init\" before you go on.'\r\n        )\r\n        process.exit(0)\r\n      }\r\n      config = new Configuration(\r\n        loadConfig(pathToConfig),\r\n        loadConfig(pathToFallbackConfig)\r\n      )\r\n\r\n      // Now differentiate between Server and Docker\r\n      switch (command) {\r\n        case 'server': {\r\n          // Check if node-rfc is installed and assign to client for later usage\r\n          try {\r\n            const NodeRFC: Object = requirex(\r\n              path.join(process.cwd(), 'node_modules', 'node-rfc')\r\n            )\r\n            Object.defineProperty(Client, 'NodeRFC', {\r\n              get: (): Object => NodeRFC.Client\r\n            })\r\n          } catch (error) {\r\n            const target: string = path.join(\r\n              process.cwd(),\r\n              'vendor',\r\n              'nwrfcsdk'\r\n            )\r\n            const targetLib: string = path.join(target, 'lib')\r\n\r\n            logger.error('For some reason \"node-rfc\" could not be loaded.')\r\n            logger.info(\r\n              'Please make sure that you download the SAP NW RFC Library from the SAP Service Marketplace and follow these steps:'\r\n            )\r\n            logger.log(`1. Unpack the downloaded archive to \"${target}\".`)\r\n            logger.log(`2. Make sure that the directory \"${targetLib}\" exists.`)\r\n            switch (os.platform()) {\r\n              case 'win32': {\r\n                logger.log(\r\n                  `3. Add \"${targetLib}\" to the PATH environment variable via the following command:`\r\n                )\r\n                logger.log(`   SET PATH=%PATH%;${targetLib};`)\r\n                logger.log(\r\n                  '4. Run \"npm install node-rfc --save\" in the current project folder.'\r\n                )\r\n\r\n                break\r\n              }\r\n\r\n              case 'darwin':\r\n              case 'linux': {\r\n                logger.log(\r\n                  '3. As root, create a file \"/etc/ld.so.conf.d/nwrfcsdk.conf\" and add the following content:'\r\n                )\r\n                logger.log('   # include nwrfcsdk')\r\n                logger.log(`   ${targetLib}`)\r\n                logger.log('4. As root, run the command \"ldconfig\".')\r\n                logger.log(\r\n                  '5. Run \"npm install node-rfc --save\" in the current project folder.'\r\n                )\r\n\r\n                break\r\n              }\r\n\r\n              default: {\r\n                // Should not be reached\r\n              }\r\n            }\r\n\r\n            process.exit(0)\r\n          }\r\n\r\n          // Start server with configuration\r\n          const server: Object = new Server(config)\r\n          server.start()\r\n\r\n          // Update configuration in server if the file changes\r\n          fs.watch(pathToConfig, () => config.set(loadConfig(pathToConfig)))\r\n\r\n          break\r\n        }\r\n\r\n        case 'docker': {\r\n          const port = config.get('server.port')\r\n\r\n          // Build docker container\r\n          const spawn = childProcess.spawn\r\n          const docker = spawn('docker', [\r\n            'build',\r\n            `--build-arg R3CONNECT_PORT=${port}`,\r\n            '-t',\r\n            project.name,\r\n            '.'\r\n          ])\r\n\r\n          // Once it is ready\r\n          docker.on('close', (code: number) => {\r\n            if (code === 0) {\r\n              logger.success(\r\n                `The Docker container was successfully built. Start the container by running \"docker run -it -p ${port}:${port} ${project.name}\".`\r\n              )\r\n            }\r\n          })\r\n\r\n          // Or it failed?\r\n          docker.on('error', () => {\r\n            logger.error(\r\n              'There was an issue while building the Docker container. Please install Docker first and check the Docker logs in order to solve the issue.'\r\n            )\r\n          })\r\n\r\n          break\r\n        }\r\n\r\n        default: {\r\n          // Should not be reached\r\n        }\r\n      }\r\n\r\n      break\r\n    }\r\n\r\n    default: {\r\n      logger.info('Please use any of the following commands:')\r\n      logger.log('r3connect init')\r\n      logger.log('r3connect server')\r\n      logger.log('r3connect docker')\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/cli.js"],"sourceRoot":""}